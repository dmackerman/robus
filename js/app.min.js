window.Modernizr = function(a, b, c) {
    function d(a) {
        n.cssText = a;
    }
    function e(a, b) {
        return typeof a === b;
    }
    var f, g, h, i = "2.6.2", j = {}, k = b.documentElement, l = "modernizr", m = b.createElement(l), n = m.style, o = ({}.toString, 
    " -webkit- -moz- -o- -ms- ".split(" ")), p = {}, q = [], r = q.slice, s = function(a, c, d, e) {
        var f, g, h, i, j = b.createElement("div"), m = b.body, n = m || b.createElement("body");
        if (parseInt(d, 10)) for (;d--; ) h = b.createElement("div"), h.id = e ? e[d] : l + (d + 1), 
        j.appendChild(h);
        return f = [ "&#173;", '<style id="s', l, '">', a, "</style>" ].join(""), j.id = l, 
        (m ? j : n).innerHTML += f, n.appendChild(j), m || (n.style.background = "", n.style.overflow = "hidden", 
        i = k.style.overflow, k.style.overflow = "hidden", k.appendChild(n)), g = c(j, a), 
        m ? j.parentNode.removeChild(j) : (n.parentNode.removeChild(n), k.style.overflow = i), 
        !!g;
    }, t = {}.hasOwnProperty;
    h = e(t, "undefined") || e(t.call, "undefined") ? function(a, b) {
        return b in a && e(a.constructor.prototype[b], "undefined");
    } : function(a, b) {
        return t.call(a, b);
    }, Function.prototype.bind || (Function.prototype.bind = function(a) {
        var b = this;
        if ("function" != typeof b) throw new TypeError();
        var c = r.call(arguments, 1), d = function() {
            if (this instanceof d) {
                var e = function() {};
                e.prototype = b.prototype;
                var f = new e(), g = b.apply(f, c.concat(r.call(arguments)));
                return Object(g) === g ? g : f;
            }
            return b.apply(a, c.concat(r.call(arguments)));
        };
        return d;
    }), p.touch = function() {
        var c;
        return "ontouchstart" in a || a.DocumentTouch && b instanceof DocumentTouch ? c = !0 : s([ "@media (", o.join("touch-enabled),("), l, ")", "{#modernizr{top:9px;position:absolute}}" ].join(""), function(a) {
            c = 9 === a.offsetTop;
        }), c;
    };
    for (var u in p) h(p, u) && (g = u.toLowerCase(), j[g] = p[u](), q.push((j[g] ? "" : "no-") + g));
    return j.addTest = function(a, b) {
        if ("object" == typeof a) for (var d in a) h(a, d) && j.addTest(d, a[d]); else {
            if (a = a.toLowerCase(), j[a] !== c) return j;
            b = "function" == typeof b ? b() : b, "undefined" != typeof enableClasses && enableClasses && (k.className += " " + (b ? "" : "no-") + a), 
            j[a] = b;
        }
        return j;
    }, d(""), m = f = null, j._version = i, j._prefixes = o, j.testStyles = s, j;
}(this, this.document), function(a) {
    String.prototype.trim === a && (String.prototype.trim = function() {
        return this.replace(/^\s+/, "").replace(/\s+$/, "");
    }), Array.prototype.reduce === a && (Array.prototype.reduce = function(b) {
        if (void 0 === this || null === this) throw new TypeError();
        var c, d = Object(this), e = d.length >>> 0, f = 0;
        if ("function" != typeof b) throw new TypeError();
        if (0 == e && 1 == arguments.length) throw new TypeError();
        if (arguments.length >= 2) c = arguments[1]; else for (;;) {
            if (f in d) {
                c = d[f++];
                break;
            }
            if (++f >= e) throw new TypeError();
        }
        for (;e > f; ) f in d && (c = b.call(a, c, d[f], f, d)), f++;
        return c;
    });
}();

var Zepto = function() {
    function a(a) {
        return "[object Function]" == M.call(a);
    }
    function b(a) {
        return a instanceof Object;
    }
    function c(b) {
        var c, d;
        if ("[object Object]" !== M.call(b)) return !1;
        if (d = a(b.constructor) && b.constructor.prototype, !d || !hasOwnProperty.call(d, "isPrototypeOf")) return !1;
        for (c in b) ;
        return c === p || hasOwnProperty.call(b, c);
    }
    function d(a) {
        return a instanceof Array;
    }
    function e(a) {
        return "number" == typeof a.length;
    }
    function f(a) {
        return a.filter(function(a) {
            return a !== p && null !== a;
        });
    }
    function g(a) {
        return a.length > 0 ? [].concat.apply([], a) : a;
    }
    function h(a) {
        return a.replace(/::/g, "/").replace(/([A-Z]+)([A-Z][a-z])/g, "$1_$2").replace(/([a-z\d])([A-Z])/g, "$1_$2").replace(/_/g, "-").toLowerCase();
    }
    function i(a) {
        return a in z ? z[a] : z[a] = new RegExp("(^|\\s)" + a + "(\\s|$)");
    }
    function j(a, b) {
        return "number" != typeof b || B[h(a)] ? b : b + "px";
    }
    function k(a) {
        var b, c;
        return y[a] || (b = x.createElement(a), x.body.appendChild(b), c = A(b, "").getPropertyValue("display"), 
        b.parentNode.removeChild(b), "none" == c && (c = "block"), y[a] = c), y[a];
    }
    function l(a, b) {
        return b === p ? r(a) : r(a).filter(b);
    }
    function m(b, c, d, e) {
        return a(c) ? c.call(b, d, e) : c;
    }
    function n(a, b, c) {
        var d = a % 2 ? b : b.parentNode;
        d ? d.insertBefore(c, a ? 1 == a ? d.firstChild : 2 == a ? b : null : b.nextSibling) : r(c).remove();
    }
    function o(a, b) {
        b(a);
        for (var c in a.childNodes) o(a.childNodes[c], b);
    }
    var p, q, r, s, t, u, v = [], w = v.slice, x = window.document, y = {}, z = {}, A = x.defaultView.getComputedStyle, B = {
        "column-count": 1,
        columns: 1,
        "font-weight": 1,
        "line-height": 1,
        opacity: 1,
        "z-index": 1,
        zoom: 1
    }, C = /^\s*<(\w+|!)[^>]*>/, D = [ 1, 3, 8, 9, 11 ], E = [ "after", "prepend", "before", "append" ], F = x.createElement("table"), G = x.createElement("tr"), H = {
        tr: x.createElement("tbody"),
        tbody: F,
        thead: F,
        tfoot: F,
        td: G,
        th: G,
        "*": x.createElement("div")
    }, I = /complete|loaded|interactive/, J = /^\.([\w-]+)$/, K = /^#([\w-]+)$/, L = /^[\w-]+$/, M = {}.toString, N = {}, O = x.createElement("div");
    return N.matches = function(a, b) {
        if (!a || 1 !== a.nodeType) return !1;
        var c = a.webkitMatchesSelector || a.mozMatchesSelector || a.oMatchesSelector || a.matchesSelector;
        if (c) return c.call(a, b);
        var d, e = a.parentNode, f = !e;
        return f && (e = O).appendChild(a), d = ~N.qsa(e, b).indexOf(a), f && O.removeChild(a), 
        d;
    }, t = function(a) {
        return a.replace(/-+(.)?/g, function(a, b) {
            return b ? b.toUpperCase() : "";
        });
    }, u = function(a) {
        return a.filter(function(b, c) {
            return a.indexOf(b) == c;
        });
    }, N.fragment = function(a, b) {
        b === p && (b = C.test(a) && RegExp.$1), b in H || (b = "*");
        var c = H[b];
        return c.innerHTML = "" + a, r.each(w.call(c.childNodes), function() {
            c.removeChild(this);
        });
    }, N.Z = function(a, b) {
        return a = a || [], a.__proto__ = arguments.callee.prototype, a.selector = b || "", 
        a;
    }, N.isZ = function(a) {
        return a instanceof N.Z;
    }, N.init = function(b, e) {
        if (!b) return N.Z();
        if (a(b)) return r(x).ready(b);
        if (N.isZ(b)) return b;
        var g;
        if (d(b)) g = f(b); else if (c(b)) g = [ r.extend({}, b) ], b = null; else if (D.indexOf(b.nodeType) >= 0 || b === window) g = [ b ], 
        b = null; else if (C.test(b)) g = N.fragment(b.trim(), RegExp.$1), b = null; else {
            if (e !== p) return r(e).find(b);
            g = N.qsa(x, b);
        }
        return N.Z(g, b);
    }, r = function(a, b) {
        return N.init(a, b);
    }, r.extend = function(a) {
        return w.call(arguments, 1).forEach(function(b) {
            for (q in b) b[q] !== p && (a[q] = b[q]);
        }), a;
    }, N.qsa = function(a, b) {
        var c;
        return a === x && K.test(b) ? (c = a.getElementById(RegExp.$1)) ? [ c ] : v : 1 !== a.nodeType && 9 !== a.nodeType ? v : w.call(J.test(b) ? a.getElementsByClassName(RegExp.$1) : L.test(b) ? a.getElementsByTagName(b) : a.querySelectorAll(b));
    }, r.isFunction = a, r.isObject = b, r.isArray = d, r.isPlainObject = c, r.inArray = function(a, b, c) {
        return v.indexOf.call(b, a, c);
    }, r.trim = function(a) {
        return a.trim();
    }, r.uuid = 0, r.map = function(a, b) {
        var c, d, f, h = [];
        if (e(a)) for (d = 0; d < a.length; d++) c = b(a[d], d), null != c && h.push(c); else for (f in a) c = b(a[f], f), 
        null != c && h.push(c);
        return g(h);
    }, r.each = function(a, b) {
        var c, d;
        if (e(a)) {
            for (c = 0; c < a.length; c++) if (b.call(a[c], c, a[c]) === !1) return a;
        } else for (d in a) if (b.call(a[d], d, a[d]) === !1) return a;
        return a;
    }, r.fn = {
        forEach: v.forEach,
        reduce: v.reduce,
        push: v.push,
        indexOf: v.indexOf,
        concat: v.concat,
        map: function(a) {
            return r.map(this, function(b, c) {
                return a.call(b, c, b);
            });
        },
        slice: function() {
            return r(w.apply(this, arguments));
        },
        ready: function(a) {
            return I.test(x.readyState) ? a(r) : x.addEventListener("DOMContentLoaded", function() {
                a(r);
            }, !1), this;
        },
        get: function(a) {
            return a === p ? w.call(this) : this[a];
        },
        toArray: function() {
            return this.get();
        },
        size: function() {
            return this.length;
        },
        remove: function() {
            return this.each(function() {
                null != this.parentNode && this.parentNode.removeChild(this);
            });
        },
        each: function(a) {
            return this.forEach(function(b, c) {
                a.call(b, c, b);
            }), this;
        },
        filter: function(a) {
            return r([].filter.call(this, function(b) {
                return N.matches(b, a);
            }));
        },
        add: function(a, b) {
            return r(u(this.concat(r(a, b))));
        },
        is: function(a) {
            return this.length > 0 && N.matches(this[0], a);
        },
        not: function(b) {
            var c = [];
            if (a(b) && b.call !== p) this.each(function(a) {
                b.call(this, a) || c.push(this);
            }); else {
                var d = "string" == typeof b ? this.filter(b) : e(b) && a(b.item) ? w.call(b) : r(b);
                this.forEach(function(a) {
                    d.indexOf(a) < 0 && c.push(a);
                });
            }
            return r(c);
        },
        eq: function(a) {
            return -1 === a ? this.slice(a) : this.slice(a, +a + 1);
        },
        first: function() {
            var a = this[0];
            return a && !b(a) ? a : r(a);
        },
        last: function() {
            var a = this[this.length - 1];
            return a && !b(a) ? a : r(a);
        },
        find: function(a) {
            var b;
            return b = 1 == this.length ? N.qsa(this[0], a) : this.map(function() {
                return N.qsa(this, a);
            }), r(b);
        },
        closest: function(a, b) {
            for (var c = this[0]; c && !N.matches(c, a); ) c = c !== b && c !== x && c.parentNode;
            return r(c);
        },
        parents: function(a) {
            for (var b = [], c = this; c.length > 0; ) c = r.map(c, function(a) {
                return (a = a.parentNode) && a !== x && b.indexOf(a) < 0 ? (b.push(a), a) : void 0;
            });
            return l(b, a);
        },
        parent: function(a) {
            return l(u(this.pluck("parentNode")), a);
        },
        children: function(a) {
            return l(this.map(function() {
                return w.call(this.children);
            }), a);
        },
        siblings: function(a) {
            return l(this.map(function(a, b) {
                return w.call(b.parentNode.children).filter(function(a) {
                    return a !== b;
                });
            }), a);
        },
        empty: function() {
            return this.each(function() {
                this.innerHTML = "";
            });
        },
        pluck: function(a) {
            return this.map(function() {
                return this[a];
            });
        },
        show: function() {
            return this.each(function() {
                "none" == this.style.display && (this.style.display = null), "none" == A(this, "").getPropertyValue("display") && (this.style.display = k(this.nodeName));
            });
        },
        replaceWith: function(a) {
            return this.before(a).remove();
        },
        wrap: function(a) {
            return this.each(function() {
                r(this).wrapAll(r(a)[0].cloneNode(!1));
            });
        },
        wrapAll: function(a) {
            return this[0] && (r(this[0]).before(a = r(a)), a.append(this)), this;
        },
        unwrap: function() {
            return this.parent().each(function() {
                r(this).replaceWith(r(this).children());
            }), this;
        },
        clone: function() {
            return r(this.map(function() {
                return this.cloneNode(!0);
            }));
        },
        hide: function() {
            return this.css("display", "none");
        },
        toggle: function(a) {
            return (a === p ? "none" == this.css("display") : a) ? this.show() : this.hide();
        },
        prev: function() {
            return r(this.pluck("previousElementSibling"));
        },
        next: function() {
            return r(this.pluck("nextElementSibling"));
        },
        html: function(a) {
            return a === p ? this.length > 0 ? this[0].innerHTML : null : this.each(function(b) {
                var c = this.innerHTML;
                r(this).empty().append(m(this, a, b, c));
            });
        },
        text: function(a) {
            return a === p ? this.length > 0 ? this[0].textContent : null : this.each(function() {
                this.textContent = a;
            });
        },
        attr: function(a, c) {
            var d;
            return "string" == typeof a && c === p ? 0 == this.length || 1 !== this[0].nodeType ? p : "value" == a && "INPUT" == this[0].nodeName ? this.val() : !(d = this[0].getAttribute(a)) && a in this[0] ? this[0][a] : d : this.each(function(d) {
                if (1 === this.nodeType) if (b(a)) for (q in a) this.setAttribute(q, a[q]); else this.setAttribute(a, m(this, c, d, this.getAttribute(a)));
            });
        },
        removeAttr: function(a) {
            return this.each(function() {
                1 === this.nodeType && this.removeAttribute(a);
            });
        },
        prop: function(a, b) {
            return b === p ? this[0] ? this[0][a] : p : this.each(function(c) {
                this[a] = m(this, b, c, this[a]);
            });
        },
        data: function(a, b) {
            var c = this.attr("data-" + h(a), b);
            return null !== c ? c : p;
        },
        val: function(a) {
            return a === p ? this.length > 0 ? this[0].value : p : this.each(function(b) {
                this.value = m(this, a, b, this.value);
            });
        },
        offset: function() {
            if (0 == this.length) return null;
            var a = this[0].getBoundingClientRect();
            return {
                left: a.left + window.pageXOffset,
                top: a.top + window.pageYOffset,
                width: a.width,
                height: a.height
            };
        },
        css: function(a, b) {
            if (b === p && "string" == typeof a) return 0 == this.length ? p : this[0].style[t(a)] || A(this[0], "").getPropertyValue(a);
            var c = "";
            for (q in a) "string" == typeof a[q] && "" == a[q] ? this.each(function() {
                this.style.removeProperty(h(q));
            }) : c += h(q) + ":" + j(q, a[q]) + ";";
            return "string" == typeof a && ("" == b ? this.each(function() {
                this.style.removeProperty(h(a));
            }) : c = h(a) + ":" + j(a, b)), this.each(function() {
                this.style.cssText += ";" + c;
            });
        },
        index: function(a) {
            return a ? this.indexOf(r(a)[0]) : this.parent().children().indexOf(this[0]);
        },
        hasClass: function(a) {
            return this.length < 1 ? !1 : i(a).test(this[0].className);
        },
        addClass: function(a) {
            return this.each(function(b) {
                s = [];
                var c = this.className, d = m(this, a, b, c);
                d.split(/\s+/g).forEach(function(a) {
                    r(this).hasClass(a) || s.push(a);
                }, this), s.length && (this.className += (c ? " " : "") + s.join(" "));
            });
        },
        removeClass: function(a) {
            return this.each(function(b) {
                return a === p ? this.className = "" : (s = this.className, m(this, a, b, s).split(/\s+/g).forEach(function(a) {
                    s = s.replace(i(a), " ");
                }), this.className = s.trim(), void 0);
            });
        },
        toggleClass: function(a, b) {
            return this.each(function(c) {
                var d = m(this, a, c, this.className);
                (b === p ? !r(this).hasClass(d) : b) ? r(this).addClass(d) : r(this).removeClass(d);
            });
        }
    }, [ "width", "height" ].forEach(function(a) {
        r.fn[a] = function(b) {
            var c, d = a.replace(/./, function(a) {
                return a[0].toUpperCase();
            });
            return b === p ? this[0] == window ? window["inner" + d] : this[0] == x ? x.documentElement["offset" + d] : (c = this.offset()) && c[a] : this.each(function(c) {
                var d = r(this);
                d.css(a, m(this, b, c, d[a]()));
            });
        };
    }), E.forEach(function(a, c) {
        r.fn[a] = function() {
            var a = r.map(arguments, function(a) {
                return b(a) ? a : N.fragment(a);
            });
            if (a.length < 1) return this;
            var d = this.length, e = d > 1, f = 2 > c;
            return this.each(function(b, g) {
                for (var h = 0; h < a.length; h++) {
                    var i = a[f ? a.length - h - 1 : h];
                    o(i, function(a) {
                        null != a.nodeName && "SCRIPT" === a.nodeName.toUpperCase() && (!a.type || "text/javascript" === a.type) && window.eval.call(window, a.innerHTML);
                    }), e && d - 1 > b && (i = i.cloneNode(!0)), n(c, g, i);
                }
            });
        }, r.fn[c % 2 ? a + "To" : "insert" + (c ? "Before" : "After")] = function(b) {
            return r(b)[a](this), this;
        };
    }), N.Z.prototype = r.fn, N.camelize = t, N.uniq = u, r.zepto = N, r;
}();

window.Zepto = Zepto, "$" in window || (window.$ = Zepto), function(a) {
    function b(a) {
        return a._zid || (a._zid = l++);
    }
    function c(a, c, f, g) {
        if (c = d(c), c.ns) var h = e(c.ns);
        return (k[b(a)] || []).filter(function(a) {
            return !(!a || c.e && a.e != c.e || c.ns && !h.test(a.ns) || f && b(a.fn) !== b(f) || g && a.sel != g);
        });
    }
    function d(a) {
        var b = ("" + a).split(".");
        return {
            e: b[0],
            ns: b.slice(1).sort().join(" ")
        };
    }
    function e(a) {
        return new RegExp("(?:^| )" + a.replace(" ", " .* ?") + "(?: |$)");
    }
    function f(b, c, d) {
        a.isObject(b) ? a.each(b, d) : b.split(/\s/).forEach(function(a) {
            d(a, c);
        });
    }
    function g(c, e, g, h, i, j) {
        j = !!j;
        var l = b(c), m = k[l] || (k[l] = []);
        f(e, g, function(b, e) {
            var f = i && i(e, b), g = f || e, k = function(a) {
                var b = g.apply(c, [ a ].concat(a.data));
                return b === !1 && a.preventDefault(), b;
            }, l = a.extend(d(b), {
                fn: e,
                proxy: k,
                sel: h,
                del: f,
                i: m.length
            });
            m.push(l), c.addEventListener(l.e, k, j);
        });
    }
    function h(a, d, e, g) {
        var h = b(a);
        f(d || "", e, function(b, d) {
            c(a, b, d, g).forEach(function(b) {
                delete k[h][b.i], a.removeEventListener(b.e, b.proxy, !1);
            });
        });
    }
    function i(b) {
        var c = a.extend({
            originalEvent: b
        }, b);
        return a.each(p, function(a, d) {
            c[a] = function() {
                return this[d] = n, b[a].apply(b, arguments);
            }, c[d] = o;
        }), c;
    }
    function j(a) {
        if (!("defaultPrevented" in a)) {
            a.defaultPrevented = !1;
            var b = a.preventDefault;
            a.preventDefault = function() {
                this.defaultPrevented = !0, b.call(this);
            };
        }
    }
    var k = (a.zepto.qsa, {}), l = 1, m = {};
    m.click = m.mousedown = m.mouseup = m.mousemove = "MouseEvents", a.event = {
        add: g,
        remove: h
    }, a.proxy = function(c, d) {
        if (a.isFunction(c)) {
            var e = function() {
                return c.apply(d, arguments);
            };
            return e._zid = b(c), e;
        }
        if ("string" == typeof d) return a.proxy(c[d], c);
        throw new TypeError("expected function");
    }, a.fn.bind = function(a, b) {
        return this.each(function() {
            g(this, a, b);
        });
    }, a.fn.unbind = function(a, b) {
        return this.each(function() {
            h(this, a, b);
        });
    }, a.fn.one = function(a, b) {
        return this.each(function(c, d) {
            g(this, a, b, null, function(a, b) {
                return function() {
                    var c = a.apply(d, arguments);
                    return h(d, b, a), c;
                };
            });
        });
    };
    var n = function() {
        return !0;
    }, o = function() {
        return !1;
    }, p = {
        preventDefault: "isDefaultPrevented",
        stopImmediatePropagation: "isImmediatePropagationStopped",
        stopPropagation: "isPropagationStopped"
    };
    a.fn.delegate = function(b, c, d) {
        var e = !1;
        return ("blur" == c || "focus" == c) && (a.iswebkit ? c = "blur" == c ? "focusout" : "focus" == c ? "focusin" : c : e = !0), 
        this.each(function(f, h) {
            g(h, c, d, b, function(c) {
                return function(d) {
                    var e, f = a(d.target).closest(b, h).get(0);
                    return f ? (e = a.extend(i(d), {
                        currentTarget: f,
                        liveFired: h
                    }), c.apply(f, [ e ].concat([].slice.call(arguments, 1)))) : void 0;
                };
            }, e);
        });
    }, a.fn.undelegate = function(a, b, c) {
        return this.each(function() {
            h(this, b, c, a);
        });
    }, a.fn.live = function(b, c) {
        return a(document.body).delegate(this.selector, b, c), this;
    }, a.fn.die = function(b, c) {
        return a(document.body).undelegate(this.selector, b, c), this;
    }, a.fn.on = function(b, c, d) {
        return void 0 == c || a.isFunction(c) ? this.bind(b, c) : this.delegate(c, b, d);
    }, a.fn.off = function(b, c, d) {
        return void 0 == c || a.isFunction(c) ? this.unbind(b, c) : this.undelegate(c, b, d);
    }, a.fn.trigger = function(b, c) {
        return "string" == typeof b && (b = a.Event(b)), j(b), b.data = c, this.each(function() {
            "dispatchEvent" in this && this.dispatchEvent(b);
        });
    }, a.fn.triggerHandler = function(b, d) {
        var e, f;
        return this.each(function(g, h) {
            e = i("string" == typeof b ? a.Event(b) : b), e.data = d, e.target = h, a.each(c(h, b.type || b), function(a, b) {
                return f = b.proxy(e), e.isImmediatePropagationStopped() ? !1 : void 0;
            });
        }), f;
    }, "focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(b) {
        a.fn[b] = function(a) {
            return this.bind(b, a);
        };
    }), [ "focus", "blur" ].forEach(function(b) {
        a.fn[b] = function(a) {
            if (a) this.bind(b, a); else if (this.length) try {
                this.get(0)[b]();
            } catch (c) {}
            return this;
        };
    }), a.Event = function(a, b) {
        var c = document.createEvent(m[a] || "Events"), d = !0;
        if (b) for (var e in b) "bubbles" == e ? d = !!b[e] : c[e] = b[e];
        return c.initEvent(a, d, !0, null, null, null, null, null, null, null, null, null, null, null, null), 
        c;
    };
}(Zepto), function(a) {
    function b(a) {
        var b = this.os = {}, c = this.browser = {}, d = a.match(/WebKit\/([\d.]+)/), e = a.match(/(Android)\s+([\d.]+)/), f = a.match(/(iPad).*OS\s([\d_]+)/), g = !f && a.match(/(iPhone\sOS)\s([\d_]+)/), h = a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/), i = h && a.match(/TouchPad/), j = a.match(/Kindle\/([\d.]+)/), k = a.match(/Silk\/([\d._]+)/), l = a.match(/(BlackBerry).*Version\/([\d.]+)/);
        (c.webkit = !!d) && (c.version = d[1]), e && (b.android = !0, b.version = e[2]), 
        g && (b.ios = b.iphone = !0, b.version = g[2].replace(/_/g, ".")), f && (b.ios = b.ipad = !0, 
        b.version = f[2].replace(/_/g, ".")), h && (b.webos = !0, b.version = h[2]), i && (b.touchpad = !0), 
        l && (b.blackberry = !0, b.version = l[2]), j && (b.kindle = !0, b.version = j[1]), 
        k && (c.silk = !0, c.version = k[1]), !k && b.android && a.match(/Kindle Fire/) && (c.silk = !0);
    }
    b.call(a, navigator.userAgent), a.__detect = b;
}(Zepto), function(a, b) {
    function c(a) {
        return a.toLowerCase();
    }
    function d(a) {
        return e ? e + a : c(a);
    }
    var e, f = "", g = {
        Webkit: "webkit",
        Moz: "",
        O: "o",
        ms: "MS"
    }, h = window.document, i = h.createElement("div"), j = /^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i, k = {};
    a.each(g, function(a, d) {
        return i.style[a + "TransitionProperty"] !== b ? (f = "-" + c(a) + "-", e = d, !1) : void 0;
    }), k[f + "transition-property"] = k[f + "transition-duration"] = k[f + "transition-timing-function"] = k[f + "animation-name"] = k[f + "animation-duration"] = "", 
    a.fx = {
        off: e === b && i.style.transitionProperty === b,
        cssPrefix: f,
        transitionEnd: d("TransitionEnd"),
        animationEnd: d("AnimationEnd")
    }, a.fn.animate = function(b, c, d, e) {
        return a.isObject(c) && (d = c.easing, e = c.complete, c = c.duration), c && (c /= 1e3), 
        this.anim(b, c, d, e);
    }, a.fn.anim = function(c, d, e, g) {
        var h, i, l, m = {}, n = this, o = a.fx.transitionEnd;
        if (d === b && (d = .4), a.fx.off && (d = 0), "string" == typeof c) m[f + "animation-name"] = c, 
        m[f + "animation-duration"] = d + "s", o = a.fx.animationEnd; else {
            for (i in c) j.test(i) ? (h || (h = []), h.push(i + "(" + c[i] + ")")) : m[i] = c[i];
            h && (m[f + "transform"] = h.join(" ")), !a.fx.off && "object" == typeof c && (m[f + "transition-property"] = Object.keys(c).join(", "), 
            m[f + "transition-duration"] = d + "s", m[f + "transition-timing-function"] = e || "linear");
        }
        return l = function(b) {
            if ("undefined" != typeof b) {
                if (b.target !== b.currentTarget) return;
                a(b.target).unbind(o, arguments.callee);
            }
            a(this).css(k), g && g.call(this);
        }, d > 0 && this.bind(o, l), setTimeout(function() {
            n.css(m), 0 >= d && setTimeout(function() {
                n.each(function() {
                    l.call(this);
                });
            }, 0);
        }, 0), this;
    }, i = null;
}(Zepto), function(a) {
    function b(b, c, d) {
        var e = a.Event(c);
        return a(b).trigger(e, d), !e.defaultPrevented;
    }
    function c(a, c, d, e) {
        return a.global ? b(c || s, d, e) : void 0;
    }
    function d(b) {
        b.global && 0 === a.active++ && c(b, null, "ajaxStart");
    }
    function e(b) {
        b.global && !--a.active && c(b, null, "ajaxStop");
    }
    function f(a, b) {
        var d = b.context;
        return b.beforeSend.call(d, a, b) === !1 || c(b, d, "ajaxBeforeSend", [ a, b ]) === !1 ? !1 : (c(b, d, "ajaxSend", [ a, b ]), 
        void 0);
    }
    function g(a, b, d) {
        var e = d.context, f = "success";
        d.success.call(e, a, f, b), c(d, e, "ajaxSuccess", [ b, d, a ]), i(f, b, d);
    }
    function h(a, b, d, e) {
        var f = e.context;
        e.error.call(f, d, b, a), c(e, f, "ajaxError", [ d, e, a ]), i(b, d, e);
    }
    function i(a, b, d) {
        var f = d.context;
        d.complete.call(f, b, a), c(d, f, "ajaxComplete", [ b, d ]), e(d);
    }
    function j() {}
    function k(a) {
        return a && (a == x ? "html" : a == w ? "json" : u.test(a) ? "script" : v.test(a) && "xml") || "text";
    }
    function l(a, b) {
        return (a + "&" + b).replace(/[&?]{1,2}/, "?");
    }
    function m(b) {
        r(b.data) && (b.data = a.param(b.data)), b.data && (!b.type || "GET" == b.type.toUpperCase()) && (b.url = l(b.url, b.data));
    }
    function n(b, c, d, e) {
        var f = a.isArray(c);
        a.each(c, function(c, g) {
            e && (c = d ? e : e + "[" + (f ? "" : c) + "]"), !e && f ? b.add(g.name, g.value) : (d ? a.isArray(g) : r(g)) ? n(b, g, d, c) : b.add(c, g);
        });
    }
    var o, p, q = 0, r = a.isObject, s = window.document, t = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, u = /^(?:text|application)\/javascript/i, v = /^(?:text|application)\/xml/i, w = "application/json", x = "text/html", y = /^\s*$/;
    a.active = 0, a.ajaxJSONP = function(b) {
        var c, d = "jsonp" + ++q, e = s.createElement("script"), f = function() {
            a(e).remove(), d in window && (window[d] = j), i("abort", h, b);
        }, h = {
            abort: f
        };
        return b.error && (e.onerror = function() {
            h.abort(), b.error();
        }), window[d] = function(f) {
            clearTimeout(c), a(e).remove(), delete window[d], g(f, h, b);
        }, m(b), e.src = b.url.replace(/=\?/, "=" + d), a("head").append(e), b.timeout > 0 && (c = setTimeout(function() {
            h.abort(), i("timeout", h, b);
        }, b.timeout)), h;
    }, a.ajaxSettings = {
        type: "GET",
        beforeSend: j,
        success: j,
        error: j,
        complete: j,
        context: null,
        global: !0,
        xhr: function() {
            return new window.XMLHttpRequest();
        },
        accepts: {
            script: "text/javascript, application/javascript",
            json: w,
            xml: "application/xml, text/xml",
            html: x,
            text: "text/plain"
        },
        crossDomain: !1,
        timeout: 0
    }, a.ajax = function(b) {
        var c = a.extend({}, b || {});
        for (o in a.ajaxSettings) void 0 === c[o] && (c[o] = a.ajaxSettings[o]);
        d(c), c.crossDomain || (c.crossDomain = /^([\w-]+:)?\/\/([^\/]+)/.test(c.url) && RegExp.$2 != window.location.host);
        var e = c.dataType, i = /=\?/.test(c.url);
        if ("jsonp" == e || i) return i || (c.url = l(c.url, "callback=?")), a.ajaxJSONP(c);
        c.url || (c.url = window.location.toString()), m(c);
        var n, q = c.accepts[e], r = {}, s = /^([\w-]+:)\/\//.test(c.url) ? RegExp.$1 : window.location.protocol, t = a.ajaxSettings.xhr();
        c.crossDomain || (r["X-Requested-With"] = "XMLHttpRequest"), q && (r.Accept = q, 
        q.indexOf(",") > -1 && (q = q.split(",", 2)[0]), t.overrideMimeType && t.overrideMimeType(q)), 
        (c.contentType || c.data && "GET" != c.type.toUpperCase()) && (r["Content-Type"] = c.contentType || "application/x-www-form-urlencoded"), 
        c.headers = a.extend(r, c.headers || {}), t.onreadystatechange = function() {
            if (4 == t.readyState) {
                clearTimeout(n);
                var a, b = !1;
                if (t.status >= 200 && t.status < 300 || 304 == t.status || 0 == t.status && "file:" == s) {
                    e = e || k(t.getResponseHeader("content-type")), a = t.responseText;
                    try {
                        "script" == e ? (1, eval)(a) : "xml" == e ? a = t.responseXML : "json" == e && (a = y.test(a) ? null : JSON.parse(a));
                    } catch (d) {
                        b = d;
                    }
                    b ? h(b, "parsererror", t, c) : g(a, t, c);
                } else h(null, "error", t, c);
            }
        };
        var u = "async" in c ? c.async : !0;
        t.open(c.type, c.url, u);
        for (p in c.headers) t.setRequestHeader(p, c.headers[p]);
        return f(t, c) === !1 ? (t.abort(), !1) : (c.timeout > 0 && (n = setTimeout(function() {
            t.onreadystatechange = j, t.abort(), h(null, "timeout", t, c);
        }, c.timeout)), t.send(c.data ? c.data : null), t);
    }, a.get = function(b, c) {
        return a.ajax({
            url: b,
            success: c
        });
    }, a.post = function(b, c, d, e) {
        return a.isFunction(c) && (e = e || d, d = c, c = null), a.ajax({
            type: "POST",
            url: b,
            data: c,
            success: d,
            dataType: e
        });
    }, a.getJSON = function(b, c) {
        return a.ajax({
            url: b,
            success: c,
            dataType: "json"
        });
    }, a.fn.load = function(b, c) {
        if (!this.length) return this;
        var d, e = this, f = b.split(/\s/);
        return f.length > 1 && (b = f[0], d = f[1]), a.get(b, function(b) {
            e.html(d ? a(s.createElement("div")).html(b.replace(t, "")).find(d).html() : b), 
            c && c.call(e);
        }), this;
    };
    var z = encodeURIComponent;
    a.param = function(a, b) {
        var c = [];
        return c.add = function(a, b) {
            this.push(z(a) + "=" + z(b));
        }, n(c, a, b), c.join("&").replace("%20", "+");
    };
}(Zepto), function(a) {
    a.fn.serializeArray = function() {
        var b, c = [];
        return a(Array.prototype.slice.call(this.get(0).elements)).each(function() {
            b = a(this);
            var d = b.attr("type");
            "fieldset" != this.nodeName.toLowerCase() && !this.disabled && "submit" != d && "reset" != d && "button" != d && ("radio" != d && "checkbox" != d || this.checked) && c.push({
                name: b.attr("name"),
                value: b.val()
            });
        }), c;
    }, a.fn.serialize = function() {
        var a = [];
        return this.serializeArray().forEach(function(b) {
            a.push(encodeURIComponent(b.name) + "=" + encodeURIComponent(b.value));
        }), a.join("&");
    }, a.fn.submit = function(b) {
        if (b) this.bind("submit", b); else if (this.length) {
            var c = a.Event("submit");
            this.eq(0).trigger(c), c.defaultPrevented || this.get(0).submit();
        }
        return this;
    };
}(Zepto), function(a) {
    function b(a) {
        return "tagName" in a ? a : a.parentNode;
    }
    function c(a, b, c, d) {
        var e = Math.abs(a - b), f = Math.abs(c - d);
        return e >= f ? a - b > 0 ? "Left" : "Right" : c - d > 0 ? "Up" : "Down";
    }
    function d() {
        g = null, h.last && (h.el.trigger("longTap"), h = {});
    }
    function e() {
        g && clearTimeout(g), g = null;
    }
    var f, g, h = {}, i = 750;
    a(document).ready(function() {
        var j, k;
        a(document.body).bind("touchstart", function(c) {
            j = Date.now(), k = j - (h.last || j), h.el = a(b(c.touches[0].target)), f && clearTimeout(f), 
            h.x1 = c.touches[0].pageX, h.y1 = c.touches[0].pageY, k > 0 && 250 >= k && (h.isDoubleTap = !0), 
            h.last = j, g = setTimeout(d, i);
        }).bind("touchmove", function(a) {
            e(), h.x2 = a.touches[0].pageX, h.y2 = a.touches[0].pageY;
        }).bind("touchend", function() {
            e(), h.isDoubleTap ? (h.el.trigger("doubleTap"), h = {}) : h.x2 && Math.abs(h.x1 - h.x2) > 30 || h.y2 && Math.abs(h.y1 - h.y2) > 30 ? (h.el.trigger("swipe") && h.el.trigger("swipe" + c(h.x1, h.x2, h.y1, h.y2)), 
            h = {}) : "last" in h && (h.el.trigger("tap"), f = setTimeout(function() {
                f = null, h.el.trigger("singleTap"), h = {};
            }, 250));
        }).bind("touchcancel", function() {
            f && clearTimeout(f), g && clearTimeout(g), g = f = null, h = {};
        });
    }), [ "swipe", "swipeLeft", "swipeRight", "swipeUp", "swipeDown", "doubleTap", "tap", "singleTap", "longTap" ].forEach(function(b) {
        a.fn[b] = function(a) {
            return this.bind(b, a);
        };
    });
}(Zepto), function(a) {
    function b() {
        for (var b = "", c = 0; 3 > c; c++) b += k.eventLog[c] + " | ";
        var d = "<pre> \n		last 3 events: " + b + "<br /> \n		start: {x:" + k.start.x + ", y:" + k.start.y + ",time: " + k.start.time + "}<br /> \n			delta: {<br /> \n			prevPos: {" + k.delta.prevPos.x + ", " + k.delta.prevPos.y + "}<br /> \n			dist: {" + k.delta.dist.x + ", " + k.delta.dist.y + "}<br /> \n			dir: {" + k.delta.dir.x + ", " + k.delta.dir.y + "}<br /> \n			}<br /> \n		end: {<br /> \n			speed: {" + k.end.speed.x + ", " + k.end.speed.y + "}<br /> \n			flick: {" + k.end.flick.x + ", " + k.end.flick.y + "}<br /> \n			duration: " + k.end.duration + "<br /> \n		} \n		</pre>";
        a("#flickableDebugger").html(d);
    }
    function c(a) {
        q && (console.log(a), k.eventLog.splice(0, 0, a), b());
    }
    function d() {
        if (!a("#flickableDebugger").length) {
            q = !0, k = l, k.eventLog = [];
            var b = '<div id="flickableDebugger" style="position: fixed; bottom: 0; margin: 0 auto; padding: 10px; width: 100%; background: #000; color: #fff; font-family: courier, sans-serif;">Debugger</div>';
            a("body").append(b);
        }
    }
    function e() {
        var a = document.createElement("div"), b = "Khtml Ms O Moz Webkit".split(" "), c = b.length;
        return function(d) {
            if (d in a.style) return !0;
            for (d = d.replace(/^[a-z]/, function(a) {
                return a.toUpperCase();
            }); c--; ) if (b[c] + d in a.style) return !0;
            return !1;
        };
    }
    function f(a, b) {
        if (!parseInt(b)) {
            var b, c = a.data("segments"), d = g(a, a.data("flickDirection"));
            b = "y" == d ? a.height() / c : a.width() / c;
        }
        return b;
    }
    function g(a, b) {
        return "x" !== b && "y" !== b && (b = a.height() > a.width() ? "y" : "x"), b;
    }
    function h(a) {
        var d = a.timeStamp - k.start.time, e = Math.abs(Math.round(100 * (k.delta.dist.x / d)) / 100), f = Math.abs(Math.round(100 * (k.delta.dist.y / d)) / 100), g = k.delta.dir.x, h = k.delta.dir.y, i = 0, j = 0;
        e > o ? i = Math.abs(k.delta.dist.x) >= p ? g : 0 : f > o && (j = Math.abs(k.delta.dist.y) >= p ? h : 0), 
        k.end.duration = d, k.end.speed = {
            x: e,
            y: f
        }, k.end.flick = {
            x: i,
            y: j
        }, q && (c("Touch end"), b());
    }
    function i(a) {
        var c, d;
        c = "undefined" != typeof a.touches[0].pageX ? a.touches[0].pageX : a.pageX, d = "undefined" != typeof a.touches[0].pageY ? a.touches[0].pageY : a.pageY;
        var e, f, g = c, h = d, i = c - k.start.x, j = d - k.start.y;
        e = c > k.delta.prevPos.x ? 1 : c < k.delta.prevPos.x ? -1 : 0, f = d > k.delta.prevPos.y ? 1 : d < k.delta.prevPos.y ? -1 : 0, 
        k.delta.prevPos = {
            x: g,
            y: h
        }, k.delta.dist = {
            x: i,
            y: j
        }, k.delta.dir = {
            x: e,
            y: f
        }, q && b();
    }
    function j(a) {
        var c, d;
        c = "undefined" != typeof a.touches[0].pageX ? a.touches[0].pageX : a.pageX, d = "undefined" != typeof a.touches[0].pageY ? a.touches[0].pageY : a.pageY, 
        k = l, k.start = {
            x: c,
            y: d,
            time: a.timeStamp
        }, k.delta.prevPos = {
            x: c,
            y: d
        }, i(a), q && b();
    }
    var k, l = {
        start: {
            x: 0,
            y: 0,
            time: 0
        },
        delta: {
            prevPos: {
                x: 0,
                y: 0
            },
            dist: {
                x: 0,
                y: 0
            },
            dir: {
                x: 0,
                y: 0
            }
        },
        end: {
            duration: 0,
            speed: {
                x: 0,
                y: 0
            },
            flick: {
                x: 0,
                y: 0
            }
        }
    }, m = !1, n = 0, o = .7, p = 5, q = !1, r = {
        init: function(b) {
            var c = a.extend({
                enableDebugger: !1,
                segments: 5,
                snapSpeed: .3,
                flickSnapSpeed: .3,
                flickThreshold: !1,
                segmentPx: "auto",
                flickDirection: "auto",
                preventDefault: !0,
                onCreate: !1,
                onFlick: !1,
                onFlickLeft: !1,
                onFlickRight: !1,
                onFlickUp: !1,
                onFlickDown: !1,
                onScroll: !1,
                onScrollNext: !1,
                onScrollPrev: !1,
                onMove: !1,
                onStart: !1,
                onEnd: !1
            }, b);
            return this.each(function() {
                var b = a(this), k = b.data("isAlive");
                if (!k) {
                    var l = c.segments, n = g(b, c.flickDirection);
                    b.data("isAlive", !0).data("pos", 0).data("snapSpeed", parseFloat(c.snapSpeed)).data("flickSnapSpeed", parseFloat(c.flickSnapSpeed)).data("segment", 0).data("segments", l).data("flickDirection", n).data("segmentPx", f(b, c.segmentPx)), 
                    a(b).bind({
                        onStart: function() {
                            a(this).flickable("start", c.onStart);
                        },
                        onMove: function() {
                            a(this).flickable("move", c.onMove);
                        },
                        onEnd: function() {
                            a(this).flickable("finished", c.onEnd);
                        },
                        onScroll: function() {
                            a(this).flickable("scrollToSegment", c.onScroll);
                        },
                        onScrollPrev: function() {
                            a(this).flickable("prevSegment", c.onScrollPrev);
                        },
                        onScrollNext: function() {
                            a(this).flickable("nextSegment", c.onScrollNext);
                        },
                        onFlick: function() {
                            a(this).flickable("flick", c.onFlick);
                        },
                        onFlickLeft: function() {
                            a(this).flickable("flickLeft", c.onFlickLeft);
                        },
                        onFlickRight: function() {
                            a(this).flickable("flickRight", c.onFlickRight);
                        },
                        onFlickUp: function() {
                            a(this).flickable("flickUp", c.onFlickUp);
                        },
                        onFlickDown: function() {
                            a(this).flickable("flickDown", c.onFlickDown);
                        },
                        touchstart: function(b) {
                            j(b), a(this).trigger("onStart");
                        },
                        touchmove: function(b) {
                            c.preventDefault && b.preventDefault(), i(b), a(this).trigger("onMove");
                        },
                        touchend: function(b) {
                            h(b), a(this).trigger("onEnd");
                        }
                    }), e("transform") || (m = !0), parseInt(c.flickThreshold) && (o = parseInt(c.flickThreshold)), 
                    (q || c.enableDebugger) && d(), b.flickable("create", c.onCreate);
                }
            });
        },
        create: function(b) {
            var d = a(this);
            k = l, n++, c("It's alive!"), d.attr("id") || d.attr("id", "flickable" + n), d.flickable("scrollToSegment"), 
            "function" == typeof b && b.call(this, n);
        },
        start: function(b) {
            c("Touch start");
            var d = a(this), e = parseInt(d.data("segment")), f = parseInt(d.data("segmentPx")), g = -(f * e);
            d.data("anchor", g), "function" == typeof b && b.call(this, k);
        },
        segment: function(b) {
            var c = a(this), d = parseInt(c.data("segments")), e = parseInt(c.data("segment"));
            return "undefined" != typeof b && (b >= d ? b = d - 1 : 0 > b && (b = 0), b !== e ? c.data("segment", b).trigger("onScroll") : c.flickable("scrollToSegment")), 
            parseInt(c.data("segment"));
        },
        move: function(b) {
            var c, d, e = a(this), f = e.data("flickDirection"), g = parseInt(e.data("anchor")), c = g + k.delta.dist[f];
            m ? "y" == f ? e.css("top", c) : e.css("left", c) : (d = "y" == f ? "(0," + c + "px,0)" : "(" + c + "px,0,0)", 
            "undefined" != typeof document.getElementById(e.attr("id")).style.webkitTransform ? document.getElementById(e.attr("id")).style.webkitTransform = "translate3d" + d : "undefined" != typeof document.getElementById(e.attr("id")).style.mozTransform ? document.getElementById(e.attr("id")).style.mozTransform = "translate3d" + d : document.getElementById(e.attr("id")).style.transform = "translate3d" + d), 
            a(this).data("pos", c), "function" == typeof b && b.call(this, k);
        },
        scrollNext: function() {
            a(this).trigger("onScrollNext");
        },
        scrollPrev: function() {
            a(this).trigger("onScrollPrev");
        },
        nextSegment: function(b) {
            c("Next segment");
            var d = a(this), e = parseInt(d.data("segment")) + 1;
            d.flickable("segment", e), "function" == typeof b && b.call(this, k, e);
        },
        prevSegment: function(b) {
            c("Previous segment");
            var d = a(this), e = parseInt(d.data("segment")) - 1;
            d.flickable("segment", e), "function" == typeof b && b.call(this, k, e);
        },
        flick: function(b) {
            c("You flicked");
            var d = a(this);
            switch (k.end.flick.x) {
              case -1:
                d.trigger("onFlickLeft");
                break;

              case 1:
                d.trigger("onFlickRight");
            }
            switch (k.end.flick.y) {
              case -1:
                d.trigger("onFlickUp");
                break;

              case 1:
                d.trigger("onFlickDown");
            }
            "function" == typeof b && b.call(this, k);
        },
        flickLeft: function(b) {
            c("Flicked left");
            var d = a(this), e = parseInt(d.data("segment"));
            d.trigger("onScrollNext"), "function" == typeof b && b.call(this, k, e);
        },
        flickRight: function(b) {
            c("Flicked right");
            var d = a(this), e = parseInt(d.data("segment"));
            d.trigger("onScrollPrev"), "function" == typeof b && b.call(this, k, e);
        },
        flickUp: function(b) {
            c("Flicked up");
            var d = a(this), e = parseInt(d.data("segment"));
            d.trigger("onScrollNext"), "function" == typeof b && b.call(this, k, e);
        },
        flickDown: function(b) {
            c("Flicked down");
            var d = a(this), e = parseInt(d.data("segment"));
            d.trigger("onScrollPrev"), "function" == typeof b && b.call(this, k, e);
        },
        scrollToSegment: function(b) {
            var d, e = a(this), f = e.data("flickDirection"), g = parseFloat(e.data("snapSpeed")), h = parseFloat(e.data("flickSnapSpeed")), i = (parseInt(e.data("segments")), 
            parseInt(e.data("segment"))), j = parseInt(e.data("segmentPx")), l = -(j * i), n = "ease-out";
            c("Sliding to segment " + i), (k.end.flick.x || k.end.flick.y) && (g = h, n = "cubic-bezier(0, .70, .35, 1)"), 
            e.data("anchor", l).data("pos", l).data("segment", i), m ? "y" == f ? e.anim({
                top: l
            }, g, n) : e.anim({
                left: l
            }, g, n) : (d = "y" == f ? "0px, " + l + "px, 0px" : l + "px, 0px, 0px", e.anim({
                translate3d: d
            }, g, n)), "function" == typeof b && b.call(this, k, i);
        },
        finished: function(b) {
            var d, e = a(this), f = e.data("flickDirection"), g = (parseInt(e.data("segments")), 
            parseInt(e.data("segment"))), h = parseInt(e.data("segmentPx")), i = (parseInt(e.data("anchor")), 
            parseInt(e.data("pos")));
            return d = 0 > i ? Math.abs(Math.round(i / h)) : 0, c("Nearest segment is " + d), 
            "function" == typeof b && b.call(this, k, g), g == d && k.end.flick[f] ? e.trigger("onFlick") : (d == g + 1 ? e.trigger("onScrollNext") : d == g - 1 ? e.trigger("onScrollPrev") : e.flickable("segment", d), 
            void 0);
        }
    };
    a.fn.flickable = function(b) {
        return r[b] ? r[b].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof b && b ? (a.error("Method " + b + " does not exist"), 
        void 0) : r.init.apply(this, arguments);
    };
}(Zepto);

var Handlebars = {};

(function(a, b) {
    a.VERSION = "1.0.0-rc.4", a.COMPILER_REVISION = 3, a.REVISION_CHANGES = {
        1: "<= 1.0.rc.2",
        2: "== 1.0.0-rc.3",
        3: ">= 1.0.0-rc.4"
    }, a.helpers = {}, a.partials = {};
    var c = Object.prototype.toString, d = "[object Function]", e = "[object Object]";
    a.registerHelper = function(b, d, f) {
        if (c.call(b) === e) {
            if (f || d) throw new a.Exception("Arg not supported with multiple helpers");
            a.Utils.extend(this.helpers, b);
        } else f && (d.not = f), this.helpers[b] = d;
    }, a.registerPartial = function(b, d) {
        c.call(b) === e ? a.Utils.extend(this.partials, b) : this.partials[b] = d;
    }, a.registerHelper("helperMissing", function(a) {
        if (2 === arguments.length) return b;
        throw new Error("Could not find property '" + a + "'");
    }), a.registerHelper("blockHelperMissing", function(b, e) {
        var f = e.inverse || function() {}, g = e.fn, h = c.call(b);
        return h === d && (b = b.call(this)), b === !0 ? g(this) : b === !1 || null == b ? f(this) : "[object Array]" === h ? b.length > 0 ? a.helpers.each(b, e) : f(this) : g(b);
    }), a.K = function() {}, a.createFrame = Object.create || function(b) {
        a.K.prototype = b;
        var c = new a.K();
        return a.K.prototype = null, c;
    }, a.logger = {
        DEBUG: 0,
        INFO: 1,
        WARN: 2,
        ERROR: 3,
        level: 3,
        methodMap: {
            0: "debug",
            1: "info",
            2: "warn",
            3: "error"
        },
        log: function(b, c) {
            if (a.logger.level <= b) {
                var d = a.logger.methodMap[b];
                "undefined" != typeof console && console[d] && console[d].call(console, c);
            }
        }
    }, a.log = function(b, c) {
        a.logger.log(b, c);
    }, a.registerHelper("each", function(b, c) {
        var d, e = c.fn, f = c.inverse, g = 0, h = "";
        if (c.data && (d = a.createFrame(c.data)), b && "object" == typeof b) if (b instanceof Array) for (var i = b.length; i > g; g++) d && (d.index = g), 
        h += e(b[g], {
            data: d
        }); else for (var j in b) b.hasOwnProperty(j) && (d && (d.key = j), h += e(b[j], {
            data: d
        }), g++);
        return 0 === g && (h = f(this)), h;
    }), a.registerHelper("if", function(b, e) {
        var f = c.call(b);
        return f === d && (b = b.call(this)), !b || a.Utils.isEmpty(b) ? e.inverse(this) : e.fn(this);
    }), a.registerHelper("unless", function(b, c) {
        return a.helpers["if"].call(this, b, {
            fn: c.inverse,
            inverse: c.fn
        });
    }), a.registerHelper("with", function(b, c) {
        return a.Utils.isEmpty(b) ? void 0 : c.fn(b);
    }), a.registerHelper("log", function(b, c) {
        var d = c.data && null != c.data.level ? parseInt(c.data.level, 10) : 1;
        a.log(d, b);
    });
    var f = function() {
        function a() {
            this.yy = {};
        }
        var b = {
            trace: function() {},
            yy: {},
            symbols_: {
                error: 2,
                root: 3,
                program: 4,
                EOF: 5,
                simpleInverse: 6,
                statements: 7,
                statement: 8,
                openInverse: 9,
                closeBlock: 10,
                openBlock: 11,
                mustache: 12,
                partial: 13,
                CONTENT: 14,
                COMMENT: 15,
                OPEN_BLOCK: 16,
                inMustache: 17,
                CLOSE: 18,
                OPEN_INVERSE: 19,
                OPEN_ENDBLOCK: 20,
                path: 21,
                OPEN: 22,
                OPEN_UNESCAPED: 23,
                OPEN_PARTIAL: 24,
                partialName: 25,
                params: 26,
                hash: 27,
                DATA: 28,
                param: 29,
                STRING: 30,
                INTEGER: 31,
                BOOLEAN: 32,
                hashSegments: 33,
                hashSegment: 34,
                ID: 35,
                EQUALS: 36,
                PARTIAL_NAME: 37,
                pathSegments: 38,
                SEP: 39,
                $accept: 0,
                $end: 1
            },
            terminals_: {
                2: "error",
                5: "EOF",
                14: "CONTENT",
                15: "COMMENT",
                16: "OPEN_BLOCK",
                18: "CLOSE",
                19: "OPEN_INVERSE",
                20: "OPEN_ENDBLOCK",
                22: "OPEN",
                23: "OPEN_UNESCAPED",
                24: "OPEN_PARTIAL",
                28: "DATA",
                30: "STRING",
                31: "INTEGER",
                32: "BOOLEAN",
                35: "ID",
                36: "EQUALS",
                37: "PARTIAL_NAME",
                39: "SEP"
            },
            productions_: [ 0, [ 3, 2 ], [ 4, 2 ], [ 4, 3 ], [ 4, 2 ], [ 4, 1 ], [ 4, 1 ], [ 4, 0 ], [ 7, 1 ], [ 7, 2 ], [ 8, 3 ], [ 8, 3 ], [ 8, 1 ], [ 8, 1 ], [ 8, 1 ], [ 8, 1 ], [ 11, 3 ], [ 9, 3 ], [ 10, 3 ], [ 12, 3 ], [ 12, 3 ], [ 13, 3 ], [ 13, 4 ], [ 6, 2 ], [ 17, 3 ], [ 17, 2 ], [ 17, 2 ], [ 17, 1 ], [ 17, 1 ], [ 26, 2 ], [ 26, 1 ], [ 29, 1 ], [ 29, 1 ], [ 29, 1 ], [ 29, 1 ], [ 29, 1 ], [ 27, 1 ], [ 33, 2 ], [ 33, 1 ], [ 34, 3 ], [ 34, 3 ], [ 34, 3 ], [ 34, 3 ], [ 34, 3 ], [ 25, 1 ], [ 21, 1 ], [ 38, 3 ], [ 38, 1 ] ],
            performAction: function(a, b, c, d, e, f) {
                var g = f.length - 1;
                switch (e) {
                  case 1:
                    return f[g - 1];

                  case 2:
                    this.$ = new d.ProgramNode([], f[g]);
                    break;

                  case 3:
                    this.$ = new d.ProgramNode(f[g - 2], f[g]);
                    break;

                  case 4:
                    this.$ = new d.ProgramNode(f[g - 1], []);
                    break;

                  case 5:
                    this.$ = new d.ProgramNode(f[g]);
                    break;

                  case 6:
                    this.$ = new d.ProgramNode([], []);
                    break;

                  case 7:
                    this.$ = new d.ProgramNode([]);
                    break;

                  case 8:
                    this.$ = [ f[g] ];
                    break;

                  case 9:
                    f[g - 1].push(f[g]), this.$ = f[g - 1];
                    break;

                  case 10:
                    this.$ = new d.BlockNode(f[g - 2], f[g - 1].inverse, f[g - 1], f[g]);
                    break;

                  case 11:
                    this.$ = new d.BlockNode(f[g - 2], f[g - 1], f[g - 1].inverse, f[g]);
                    break;

                  case 12:
                    this.$ = f[g];
                    break;

                  case 13:
                    this.$ = f[g];
                    break;

                  case 14:
                    this.$ = new d.ContentNode(f[g]);
                    break;

                  case 15:
                    this.$ = new d.CommentNode(f[g]);
                    break;

                  case 16:
                    this.$ = new d.MustacheNode(f[g - 1][0], f[g - 1][1]);
                    break;

                  case 17:
                    this.$ = new d.MustacheNode(f[g - 1][0], f[g - 1][1]);
                    break;

                  case 18:
                    this.$ = f[g - 1];
                    break;

                  case 19:
                    this.$ = new d.MustacheNode(f[g - 1][0], f[g - 1][1]);
                    break;

                  case 20:
                    this.$ = new d.MustacheNode(f[g - 1][0], f[g - 1][1], !0);
                    break;

                  case 21:
                    this.$ = new d.PartialNode(f[g - 1]);
                    break;

                  case 22:
                    this.$ = new d.PartialNode(f[g - 2], f[g - 1]);
                    break;

                  case 23:
                    break;

                  case 24:
                    this.$ = [ [ f[g - 2] ].concat(f[g - 1]), f[g] ];
                    break;

                  case 25:
                    this.$ = [ [ f[g - 1] ].concat(f[g]), null ];
                    break;

                  case 26:
                    this.$ = [ [ f[g - 1] ], f[g] ];
                    break;

                  case 27:
                    this.$ = [ [ f[g] ], null ];
                    break;

                  case 28:
                    this.$ = [ [ new d.DataNode(f[g]) ], null ];
                    break;

                  case 29:
                    f[g - 1].push(f[g]), this.$ = f[g - 1];
                    break;

                  case 30:
                    this.$ = [ f[g] ];
                    break;

                  case 31:
                    this.$ = f[g];
                    break;

                  case 32:
                    this.$ = new d.StringNode(f[g]);
                    break;

                  case 33:
                    this.$ = new d.IntegerNode(f[g]);
                    break;

                  case 34:
                    this.$ = new d.BooleanNode(f[g]);
                    break;

                  case 35:
                    this.$ = new d.DataNode(f[g]);
                    break;

                  case 36:
                    this.$ = new d.HashNode(f[g]);
                    break;

                  case 37:
                    f[g - 1].push(f[g]), this.$ = f[g - 1];
                    break;

                  case 38:
                    this.$ = [ f[g] ];
                    break;

                  case 39:
                    this.$ = [ f[g - 2], f[g] ];
                    break;

                  case 40:
                    this.$ = [ f[g - 2], new d.StringNode(f[g]) ];
                    break;

                  case 41:
                    this.$ = [ f[g - 2], new d.IntegerNode(f[g]) ];
                    break;

                  case 42:
                    this.$ = [ f[g - 2], new d.BooleanNode(f[g]) ];
                    break;

                  case 43:
                    this.$ = [ f[g - 2], new d.DataNode(f[g]) ];
                    break;

                  case 44:
                    this.$ = new d.PartialNameNode(f[g]);
                    break;

                  case 45:
                    this.$ = new d.IdNode(f[g]);
                    break;

                  case 46:
                    f[g - 2].push(f[g]), this.$ = f[g - 2];
                    break;

                  case 47:
                    this.$ = [ f[g] ];
                }
            },
            table: [ {
                3: 1,
                4: 2,
                5: [ 2, 7 ],
                6: 3,
                7: 4,
                8: 6,
                9: 7,
                11: 8,
                12: 9,
                13: 10,
                14: [ 1, 11 ],
                15: [ 1, 12 ],
                16: [ 1, 13 ],
                19: [ 1, 5 ],
                22: [ 1, 14 ],
                23: [ 1, 15 ],
                24: [ 1, 16 ]
            }, {
                1: [ 3 ]
            }, {
                5: [ 1, 17 ]
            }, {
                5: [ 2, 6 ],
                7: 18,
                8: 6,
                9: 7,
                11: 8,
                12: 9,
                13: 10,
                14: [ 1, 11 ],
                15: [ 1, 12 ],
                16: [ 1, 13 ],
                19: [ 1, 19 ],
                20: [ 2, 6 ],
                22: [ 1, 14 ],
                23: [ 1, 15 ],
                24: [ 1, 16 ]
            }, {
                5: [ 2, 5 ],
                6: 20,
                8: 21,
                9: 7,
                11: 8,
                12: 9,
                13: 10,
                14: [ 1, 11 ],
                15: [ 1, 12 ],
                16: [ 1, 13 ],
                19: [ 1, 5 ],
                20: [ 2, 5 ],
                22: [ 1, 14 ],
                23: [ 1, 15 ],
                24: [ 1, 16 ]
            }, {
                17: 23,
                18: [ 1, 22 ],
                21: 24,
                28: [ 1, 25 ],
                35: [ 1, 27 ],
                38: 26
            }, {
                5: [ 2, 8 ],
                14: [ 2, 8 ],
                15: [ 2, 8 ],
                16: [ 2, 8 ],
                19: [ 2, 8 ],
                20: [ 2, 8 ],
                22: [ 2, 8 ],
                23: [ 2, 8 ],
                24: [ 2, 8 ]
            }, {
                4: 28,
                6: 3,
                7: 4,
                8: 6,
                9: 7,
                11: 8,
                12: 9,
                13: 10,
                14: [ 1, 11 ],
                15: [ 1, 12 ],
                16: [ 1, 13 ],
                19: [ 1, 5 ],
                20: [ 2, 7 ],
                22: [ 1, 14 ],
                23: [ 1, 15 ],
                24: [ 1, 16 ]
            }, {
                4: 29,
                6: 3,
                7: 4,
                8: 6,
                9: 7,
                11: 8,
                12: 9,
                13: 10,
                14: [ 1, 11 ],
                15: [ 1, 12 ],
                16: [ 1, 13 ],
                19: [ 1, 5 ],
                20: [ 2, 7 ],
                22: [ 1, 14 ],
                23: [ 1, 15 ],
                24: [ 1, 16 ]
            }, {
                5: [ 2, 12 ],
                14: [ 2, 12 ],
                15: [ 2, 12 ],
                16: [ 2, 12 ],
                19: [ 2, 12 ],
                20: [ 2, 12 ],
                22: [ 2, 12 ],
                23: [ 2, 12 ],
                24: [ 2, 12 ]
            }, {
                5: [ 2, 13 ],
                14: [ 2, 13 ],
                15: [ 2, 13 ],
                16: [ 2, 13 ],
                19: [ 2, 13 ],
                20: [ 2, 13 ],
                22: [ 2, 13 ],
                23: [ 2, 13 ],
                24: [ 2, 13 ]
            }, {
                5: [ 2, 14 ],
                14: [ 2, 14 ],
                15: [ 2, 14 ],
                16: [ 2, 14 ],
                19: [ 2, 14 ],
                20: [ 2, 14 ],
                22: [ 2, 14 ],
                23: [ 2, 14 ],
                24: [ 2, 14 ]
            }, {
                5: [ 2, 15 ],
                14: [ 2, 15 ],
                15: [ 2, 15 ],
                16: [ 2, 15 ],
                19: [ 2, 15 ],
                20: [ 2, 15 ],
                22: [ 2, 15 ],
                23: [ 2, 15 ],
                24: [ 2, 15 ]
            }, {
                17: 30,
                21: 24,
                28: [ 1, 25 ],
                35: [ 1, 27 ],
                38: 26
            }, {
                17: 31,
                21: 24,
                28: [ 1, 25 ],
                35: [ 1, 27 ],
                38: 26
            }, {
                17: 32,
                21: 24,
                28: [ 1, 25 ],
                35: [ 1, 27 ],
                38: 26
            }, {
                25: 33,
                37: [ 1, 34 ]
            }, {
                1: [ 2, 1 ]
            }, {
                5: [ 2, 2 ],
                8: 21,
                9: 7,
                11: 8,
                12: 9,
                13: 10,
                14: [ 1, 11 ],
                15: [ 1, 12 ],
                16: [ 1, 13 ],
                19: [ 1, 19 ],
                20: [ 2, 2 ],
                22: [ 1, 14 ],
                23: [ 1, 15 ],
                24: [ 1, 16 ]
            }, {
                17: 23,
                21: 24,
                28: [ 1, 25 ],
                35: [ 1, 27 ],
                38: 26
            }, {
                5: [ 2, 4 ],
                7: 35,
                8: 6,
                9: 7,
                11: 8,
                12: 9,
                13: 10,
                14: [ 1, 11 ],
                15: [ 1, 12 ],
                16: [ 1, 13 ],
                19: [ 1, 19 ],
                20: [ 2, 4 ],
                22: [ 1, 14 ],
                23: [ 1, 15 ],
                24: [ 1, 16 ]
            }, {
                5: [ 2, 9 ],
                14: [ 2, 9 ],
                15: [ 2, 9 ],
                16: [ 2, 9 ],
                19: [ 2, 9 ],
                20: [ 2, 9 ],
                22: [ 2, 9 ],
                23: [ 2, 9 ],
                24: [ 2, 9 ]
            }, {
                5: [ 2, 23 ],
                14: [ 2, 23 ],
                15: [ 2, 23 ],
                16: [ 2, 23 ],
                19: [ 2, 23 ],
                20: [ 2, 23 ],
                22: [ 2, 23 ],
                23: [ 2, 23 ],
                24: [ 2, 23 ]
            }, {
                18: [ 1, 36 ]
            }, {
                18: [ 2, 27 ],
                21: 41,
                26: 37,
                27: 38,
                28: [ 1, 45 ],
                29: 39,
                30: [ 1, 42 ],
                31: [ 1, 43 ],
                32: [ 1, 44 ],
                33: 40,
                34: 46,
                35: [ 1, 47 ],
                38: 26
            }, {
                18: [ 2, 28 ]
            }, {
                18: [ 2, 45 ],
                28: [ 2, 45 ],
                30: [ 2, 45 ],
                31: [ 2, 45 ],
                32: [ 2, 45 ],
                35: [ 2, 45 ],
                39: [ 1, 48 ]
            }, {
                18: [ 2, 47 ],
                28: [ 2, 47 ],
                30: [ 2, 47 ],
                31: [ 2, 47 ],
                32: [ 2, 47 ],
                35: [ 2, 47 ],
                39: [ 2, 47 ]
            }, {
                10: 49,
                20: [ 1, 50 ]
            }, {
                10: 51,
                20: [ 1, 50 ]
            }, {
                18: [ 1, 52 ]
            }, {
                18: [ 1, 53 ]
            }, {
                18: [ 1, 54 ]
            }, {
                18: [ 1, 55 ],
                21: 56,
                35: [ 1, 27 ],
                38: 26
            }, {
                18: [ 2, 44 ],
                35: [ 2, 44 ]
            }, {
                5: [ 2, 3 ],
                8: 21,
                9: 7,
                11: 8,
                12: 9,
                13: 10,
                14: [ 1, 11 ],
                15: [ 1, 12 ],
                16: [ 1, 13 ],
                19: [ 1, 19 ],
                20: [ 2, 3 ],
                22: [ 1, 14 ],
                23: [ 1, 15 ],
                24: [ 1, 16 ]
            }, {
                14: [ 2, 17 ],
                15: [ 2, 17 ],
                16: [ 2, 17 ],
                19: [ 2, 17 ],
                20: [ 2, 17 ],
                22: [ 2, 17 ],
                23: [ 2, 17 ],
                24: [ 2, 17 ]
            }, {
                18: [ 2, 25 ],
                21: 41,
                27: 57,
                28: [ 1, 45 ],
                29: 58,
                30: [ 1, 42 ],
                31: [ 1, 43 ],
                32: [ 1, 44 ],
                33: 40,
                34: 46,
                35: [ 1, 47 ],
                38: 26
            }, {
                18: [ 2, 26 ]
            }, {
                18: [ 2, 30 ],
                28: [ 2, 30 ],
                30: [ 2, 30 ],
                31: [ 2, 30 ],
                32: [ 2, 30 ],
                35: [ 2, 30 ]
            }, {
                18: [ 2, 36 ],
                34: 59,
                35: [ 1, 60 ]
            }, {
                18: [ 2, 31 ],
                28: [ 2, 31 ],
                30: [ 2, 31 ],
                31: [ 2, 31 ],
                32: [ 2, 31 ],
                35: [ 2, 31 ]
            }, {
                18: [ 2, 32 ],
                28: [ 2, 32 ],
                30: [ 2, 32 ],
                31: [ 2, 32 ],
                32: [ 2, 32 ],
                35: [ 2, 32 ]
            }, {
                18: [ 2, 33 ],
                28: [ 2, 33 ],
                30: [ 2, 33 ],
                31: [ 2, 33 ],
                32: [ 2, 33 ],
                35: [ 2, 33 ]
            }, {
                18: [ 2, 34 ],
                28: [ 2, 34 ],
                30: [ 2, 34 ],
                31: [ 2, 34 ],
                32: [ 2, 34 ],
                35: [ 2, 34 ]
            }, {
                18: [ 2, 35 ],
                28: [ 2, 35 ],
                30: [ 2, 35 ],
                31: [ 2, 35 ],
                32: [ 2, 35 ],
                35: [ 2, 35 ]
            }, {
                18: [ 2, 38 ],
                35: [ 2, 38 ]
            }, {
                18: [ 2, 47 ],
                28: [ 2, 47 ],
                30: [ 2, 47 ],
                31: [ 2, 47 ],
                32: [ 2, 47 ],
                35: [ 2, 47 ],
                36: [ 1, 61 ],
                39: [ 2, 47 ]
            }, {
                35: [ 1, 62 ]
            }, {
                5: [ 2, 10 ],
                14: [ 2, 10 ],
                15: [ 2, 10 ],
                16: [ 2, 10 ],
                19: [ 2, 10 ],
                20: [ 2, 10 ],
                22: [ 2, 10 ],
                23: [ 2, 10 ],
                24: [ 2, 10 ]
            }, {
                21: 63,
                35: [ 1, 27 ],
                38: 26
            }, {
                5: [ 2, 11 ],
                14: [ 2, 11 ],
                15: [ 2, 11 ],
                16: [ 2, 11 ],
                19: [ 2, 11 ],
                20: [ 2, 11 ],
                22: [ 2, 11 ],
                23: [ 2, 11 ],
                24: [ 2, 11 ]
            }, {
                14: [ 2, 16 ],
                15: [ 2, 16 ],
                16: [ 2, 16 ],
                19: [ 2, 16 ],
                20: [ 2, 16 ],
                22: [ 2, 16 ],
                23: [ 2, 16 ],
                24: [ 2, 16 ]
            }, {
                5: [ 2, 19 ],
                14: [ 2, 19 ],
                15: [ 2, 19 ],
                16: [ 2, 19 ],
                19: [ 2, 19 ],
                20: [ 2, 19 ],
                22: [ 2, 19 ],
                23: [ 2, 19 ],
                24: [ 2, 19 ]
            }, {
                5: [ 2, 20 ],
                14: [ 2, 20 ],
                15: [ 2, 20 ],
                16: [ 2, 20 ],
                19: [ 2, 20 ],
                20: [ 2, 20 ],
                22: [ 2, 20 ],
                23: [ 2, 20 ],
                24: [ 2, 20 ]
            }, {
                5: [ 2, 21 ],
                14: [ 2, 21 ],
                15: [ 2, 21 ],
                16: [ 2, 21 ],
                19: [ 2, 21 ],
                20: [ 2, 21 ],
                22: [ 2, 21 ],
                23: [ 2, 21 ],
                24: [ 2, 21 ]
            }, {
                18: [ 1, 64 ]
            }, {
                18: [ 2, 24 ]
            }, {
                18: [ 2, 29 ],
                28: [ 2, 29 ],
                30: [ 2, 29 ],
                31: [ 2, 29 ],
                32: [ 2, 29 ],
                35: [ 2, 29 ]
            }, {
                18: [ 2, 37 ],
                35: [ 2, 37 ]
            }, {
                36: [ 1, 61 ]
            }, {
                21: 65,
                28: [ 1, 69 ],
                30: [ 1, 66 ],
                31: [ 1, 67 ],
                32: [ 1, 68 ],
                35: [ 1, 27 ],
                38: 26
            }, {
                18: [ 2, 46 ],
                28: [ 2, 46 ],
                30: [ 2, 46 ],
                31: [ 2, 46 ],
                32: [ 2, 46 ],
                35: [ 2, 46 ],
                39: [ 2, 46 ]
            }, {
                18: [ 1, 70 ]
            }, {
                5: [ 2, 22 ],
                14: [ 2, 22 ],
                15: [ 2, 22 ],
                16: [ 2, 22 ],
                19: [ 2, 22 ],
                20: [ 2, 22 ],
                22: [ 2, 22 ],
                23: [ 2, 22 ],
                24: [ 2, 22 ]
            }, {
                18: [ 2, 39 ],
                35: [ 2, 39 ]
            }, {
                18: [ 2, 40 ],
                35: [ 2, 40 ]
            }, {
                18: [ 2, 41 ],
                35: [ 2, 41 ]
            }, {
                18: [ 2, 42 ],
                35: [ 2, 42 ]
            }, {
                18: [ 2, 43 ],
                35: [ 2, 43 ]
            }, {
                5: [ 2, 18 ],
                14: [ 2, 18 ],
                15: [ 2, 18 ],
                16: [ 2, 18 ],
                19: [ 2, 18 ],
                20: [ 2, 18 ],
                22: [ 2, 18 ],
                23: [ 2, 18 ],
                24: [ 2, 18 ]
            } ],
            defaultActions: {
                17: [ 2, 1 ],
                25: [ 2, 28 ],
                38: [ 2, 26 ],
                57: [ 2, 24 ]
            },
            parseError: function(a) {
                throw new Error(a);
            },
            parse: function(a) {
                function b() {
                    var a;
                    return a = c.lexer.lex() || 1, "number" != typeof a && (a = c.symbols_[a] || a), 
                    a;
                }
                var c = this, d = [ 0 ], e = [ null ], f = [], g = this.table, h = "", i = 0, j = 0, k = 0;
                this.lexer.setInput(a), this.lexer.yy = this.yy, this.yy.lexer = this.lexer, this.yy.parser = this, 
                "undefined" == typeof this.lexer.yylloc && (this.lexer.yylloc = {});
                var l = this.lexer.yylloc;
                f.push(l);
                var m = this.lexer.options && this.lexer.options.ranges;
                "function" == typeof this.yy.parseError && (this.parseError = this.yy.parseError);
                for (var n, o, p, q, r, s, t, u, v, w = {}; ;) {
                    if (p = d[d.length - 1], this.defaultActions[p] ? q = this.defaultActions[p] : ((null === n || "undefined" == typeof n) && (n = b()), 
                    q = g[p] && g[p][n]), "undefined" == typeof q || !q.length || !q[0]) {
                        var x = "";
                        if (!k) {
                            v = [];
                            for (s in g[p]) this.terminals_[s] && s > 2 && v.push("'" + this.terminals_[s] + "'");
                            x = this.lexer.showPosition ? "Parse error on line " + (i + 1) + ":\n" + this.lexer.showPosition() + "\nExpecting " + v.join(", ") + ", got '" + (this.terminals_[n] || n) + "'" : "Parse error on line " + (i + 1) + ": Unexpected " + (1 == n ? "end of input" : "'" + (this.terminals_[n] || n) + "'"), 
                            this.parseError(x, {
                                text: this.lexer.match,
                                token: this.terminals_[n] || n,
                                line: this.lexer.yylineno,
                                loc: l,
                                expected: v
                            });
                        }
                    }
                    if (q[0] instanceof Array && q.length > 1) throw new Error("Parse Error: multiple actions possible at state: " + p + ", token: " + n);
                    switch (q[0]) {
                      case 1:
                        d.push(n), e.push(this.lexer.yytext), f.push(this.lexer.yylloc), d.push(q[1]), n = null, 
                        o ? (n = o, o = null) : (j = this.lexer.yyleng, h = this.lexer.yytext, i = this.lexer.yylineno, 
                        l = this.lexer.yylloc, k > 0 && k--);
                        break;

                      case 2:
                        if (t = this.productions_[q[1]][1], w.$ = e[e.length - t], w._$ = {
                            first_line: f[f.length - (t || 1)].first_line,
                            last_line: f[f.length - 1].last_line,
                            first_column: f[f.length - (t || 1)].first_column,
                            last_column: f[f.length - 1].last_column
                        }, m && (w._$.range = [ f[f.length - (t || 1)].range[0], f[f.length - 1].range[1] ]), 
                        r = this.performAction.call(w, h, j, i, this.yy, q[1], e, f), "undefined" != typeof r) return r;
                        t && (d = d.slice(0, 2 * -1 * t), e = e.slice(0, -1 * t), f = f.slice(0, -1 * t)), 
                        d.push(this.productions_[q[1]][0]), e.push(w.$), f.push(w._$), u = g[d[d.length - 2]][d[d.length - 1]], 
                        d.push(u);
                        break;

                      case 3:
                        return !0;
                    }
                }
                return !0;
            }
        }, c = function() {
            var a = {
                EOF: 1,
                parseError: function(a, b) {
                    if (!this.yy.parser) throw new Error(a);
                    this.yy.parser.parseError(a, b);
                },
                setInput: function(a) {
                    return this._input = a, this._more = this._less = this.done = !1, this.yylineno = this.yyleng = 0, 
                    this.yytext = this.matched = this.match = "", this.conditionStack = [ "INITIAL" ], 
                    this.yylloc = {
                        first_line: 1,
                        first_column: 0,
                        last_line: 1,
                        last_column: 0
                    }, this.options.ranges && (this.yylloc.range = [ 0, 0 ]), this.offset = 0, this;
                },
                input: function() {
                    var a = this._input[0];
                    this.yytext += a, this.yyleng++, this.offset++, this.match += a, this.matched += a;
                    var b = a.match(/(?:\r\n?|\n).*/g);
                    return b ? (this.yylineno++, this.yylloc.last_line++) : this.yylloc.last_column++, 
                    this.options.ranges && this.yylloc.range[1]++, this._input = this._input.slice(1), 
                    a;
                },
                unput: function(a) {
                    var b = a.length, c = a.split(/(?:\r\n?|\n)/g);
                    this._input = a + this._input, this.yytext = this.yytext.substr(0, this.yytext.length - b - 1), 
                    this.offset -= b;
                    var d = this.match.split(/(?:\r\n?|\n)/g);
                    this.match = this.match.substr(0, this.match.length - 1), this.matched = this.matched.substr(0, this.matched.length - 1), 
                    c.length - 1 && (this.yylineno -= c.length - 1);
                    var e = this.yylloc.range;
                    return this.yylloc = {
                        first_line: this.yylloc.first_line,
                        last_line: this.yylineno + 1,
                        first_column: this.yylloc.first_column,
                        last_column: c ? (c.length === d.length ? this.yylloc.first_column : 0) + d[d.length - c.length].length - c[0].length : this.yylloc.first_column - b
                    }, this.options.ranges && (this.yylloc.range = [ e[0], e[0] + this.yyleng - b ]), 
                    this;
                },
                more: function() {
                    return this._more = !0, this;
                },
                less: function(a) {
                    this.unput(this.match.slice(a));
                },
                pastInput: function() {
                    var a = this.matched.substr(0, this.matched.length - this.match.length);
                    return (a.length > 20 ? "..." : "") + a.substr(-20).replace(/\n/g, "");
                },
                upcomingInput: function() {
                    var a = this.match;
                    return a.length < 20 && (a += this._input.substr(0, 20 - a.length)), (a.substr(0, 20) + (a.length > 20 ? "..." : "")).replace(/\n/g, "");
                },
                showPosition: function() {
                    var a = this.pastInput(), b = new Array(a.length + 1).join("-");
                    return a + this.upcomingInput() + "\n" + b + "^";
                },
                next: function() {
                    if (this.done) return this.EOF;
                    this._input || (this.done = !0);
                    var a, b, c, d, e;
                    this._more || (this.yytext = "", this.match = "");
                    for (var f = this._currentRules(), g = 0; g < f.length && (c = this._input.match(this.rules[f[g]]), 
                    !c || b && !(c[0].length > b[0].length) || (b = c, d = g, this.options.flex)); g++) ;
                    return b ? (e = b[0].match(/(?:\r\n?|\n).*/g), e && (this.yylineno += e.length), 
                    this.yylloc = {
                        first_line: this.yylloc.last_line,
                        last_line: this.yylineno + 1,
                        first_column: this.yylloc.last_column,
                        last_column: e ? e[e.length - 1].length - e[e.length - 1].match(/\r?\n?/)[0].length : this.yylloc.last_column + b[0].length
                    }, this.yytext += b[0], this.match += b[0], this.matches = b, this.yyleng = this.yytext.length, 
                    this.options.ranges && (this.yylloc.range = [ this.offset, this.offset += this.yyleng ]), 
                    this._more = !1, this._input = this._input.slice(b[0].length), this.matched += b[0], 
                    a = this.performAction.call(this, this.yy, this, f[d], this.conditionStack[this.conditionStack.length - 1]), 
                    this.done && this._input && (this.done = !1), a ? a : void 0) : "" === this._input ? this.EOF : this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\n" + this.showPosition(), {
                        text: "",
                        token: null,
                        line: this.yylineno
                    });
                },
                lex: function() {
                    var a = this.next();
                    return "undefined" != typeof a ? a : this.lex();
                },
                begin: function(a) {
                    this.conditionStack.push(a);
                },
                popState: function() {
                    return this.conditionStack.pop();
                },
                _currentRules: function() {
                    return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;
                },
                topState: function() {
                    return this.conditionStack[this.conditionStack.length - 2];
                },
                pushState: function(a) {
                    this.begin(a);
                }
            };
            return a.options = {}, a.performAction = function(a, b, c, d) {
                switch (c) {
                  case 0:
                    return b.yytext = "\\", 14;

                  case 1:
                    if ("\\" !== b.yytext.slice(-1) && this.begin("mu"), "\\" === b.yytext.slice(-1) && (b.yytext = b.yytext.substr(0, b.yyleng - 1), 
                    this.begin("emu")), b.yytext) return 14;
                    break;

                  case 2:
                    return 14;

                  case 3:
                    return "\\" !== b.yytext.slice(-1) && this.popState(), "\\" === b.yytext.slice(-1) && (b.yytext = b.yytext.substr(0, b.yyleng - 1)), 
                    14;

                  case 4:
                    return b.yytext = b.yytext.substr(0, b.yyleng - 4), this.popState(), 15;

                  case 5:
                    return this.begin("par"), 24;

                  case 6:
                    return 16;

                  case 7:
                    return 20;

                  case 8:
                    return 19;

                  case 9:
                    return 19;

                  case 10:
                    return 23;

                  case 11:
                    return 23;

                  case 12:
                    this.popState(), this.begin("com");
                    break;

                  case 13:
                    return b.yytext = b.yytext.substr(3, b.yyleng - 5), this.popState(), 15;

                  case 14:
                    return 22;

                  case 15:
                    return 36;

                  case 16:
                    return 35;

                  case 17:
                    return 35;

                  case 18:
                    return 39;

                  case 19:
                    break;

                  case 20:
                    return this.popState(), 18;

                  case 21:
                    return this.popState(), 18;

                  case 22:
                    return b.yytext = b.yytext.substr(1, b.yyleng - 2).replace(/\\"/g, '"'), 30;

                  case 23:
                    return b.yytext = b.yytext.substr(1, b.yyleng - 2).replace(/\\'/g, "'"), 30;

                  case 24:
                    return b.yytext = b.yytext.substr(1), 28;

                  case 25:
                    return 32;

                  case 26:
                    return 32;

                  case 27:
                    return 31;

                  case 28:
                    return 35;

                  case 29:
                    return b.yytext = b.yytext.substr(1, b.yyleng - 2), 35;

                  case 30:
                    return "INVALID";

                  case 31:
                    break;

                  case 32:
                    return this.popState(), 37;

                  case 33:
                    return 5;
                }
            }, a.rules = [ /^(?:\\\\(?=(\{\{)))/, /^(?:[^\x00]*?(?=(\{\{)))/, /^(?:[^\x00]+)/, /^(?:[^\x00]{2,}?(?=(\{\{|$)))/, /^(?:[\s\S]*?--\}\})/, /^(?:\{\{>)/, /^(?:\{\{#)/, /^(?:\{\{\/)/, /^(?:\{\{\^)/, /^(?:\{\{\s*else\b)/, /^(?:\{\{\{)/, /^(?:\{\{&)/, /^(?:\{\{!--)/, /^(?:\{\{![\s\S]*?\}\})/, /^(?:\{\{)/, /^(?:=)/, /^(?:\.(?=[}/ ]))/, /^(?:\.\.)/, /^(?:[\/.])/, /^(?:\s+)/, /^(?:\}\}\})/, /^(?:\}\})/, /^(?:"(\\["]|[^"])*")/, /^(?:'(\\[']|[^'])*')/, /^(?:@[a-zA-Z]+)/, /^(?:true(?=[}\s]))/, /^(?:false(?=[}\s]))/, /^(?:-?[0-9]+(?=[}\s]))/, /^(?:[a-zA-Z0-9_$:\-]+(?=[=}\s\/.]))/, /^(?:\[[^\]]*\])/, /^(?:.)/, /^(?:\s+)/, /^(?:[a-zA-Z0-9_$\-\/]+)/, /^(?:$)/ ], 
            a.conditions = {
                mu: {
                    rules: [ 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 33 ],
                    inclusive: !1
                },
                emu: {
                    rules: [ 3 ],
                    inclusive: !1
                },
                com: {
                    rules: [ 4 ],
                    inclusive: !1
                },
                par: {
                    rules: [ 31, 32 ],
                    inclusive: !1
                },
                INITIAL: {
                    rules: [ 0, 1, 2, 33 ],
                    inclusive: !0
                }
            }, a;
        }();
        return b.lexer = c, a.prototype = b, b.Parser = a, new a();
    }();
    a.Parser = f, a.parse = function(b) {
        return b.constructor === a.AST.ProgramNode ? b : (a.Parser.yy = a.AST, a.Parser.parse(b));
    }, a.AST = {}, a.AST.ProgramNode = function(b, c) {
        this.type = "program", this.statements = b, c && (this.inverse = new a.AST.ProgramNode(c));
    }, a.AST.MustacheNode = function(a, b, c) {
        this.type = "mustache", this.escaped = !c, this.hash = b;
        var d = this.id = a[0], e = this.params = a.slice(1), f = this.eligibleHelper = d.isSimple;
        this.isHelper = f && (e.length || b);
    }, a.AST.PartialNode = function(a, b) {
        this.type = "partial", this.partialName = a, this.context = b;
    }, a.AST.BlockNode = function(b, c, d, e) {
        var f = function(b, c) {
            if (b.original !== c.original) throw new a.Exception(b.original + " doesn't match " + c.original);
        };
        f(b.id, e), this.type = "block", this.mustache = b, this.program = c, this.inverse = d, 
        this.inverse && !this.program && (this.isInverse = !0);
    }, a.AST.ContentNode = function(a) {
        this.type = "content", this.string = a;
    }, a.AST.HashNode = function(a) {
        this.type = "hash", this.pairs = a;
    }, a.AST.IdNode = function(b) {
        this.type = "ID", this.original = b.join(".");
        for (var c = [], d = 0, e = 0, f = b.length; f > e; e++) {
            var g = b[e];
            if (".." === g || "." === g || "this" === g) {
                if (c.length > 0) throw new a.Exception("Invalid path: " + this.original);
                ".." === g ? d++ : this.isScoped = !0;
            } else c.push(g);
        }
        this.parts = c, this.string = c.join("."), this.depth = d, this.isSimple = 1 === b.length && !this.isScoped && 0 === d, 
        this.stringModeValue = this.string;
    }, a.AST.PartialNameNode = function(a) {
        this.type = "PARTIAL_NAME", this.name = a;
    }, a.AST.DataNode = function(a) {
        this.type = "DATA", this.id = a;
    }, a.AST.StringNode = function(a) {
        this.type = "STRING", this.string = a, this.stringModeValue = a;
    }, a.AST.IntegerNode = function(a) {
        this.type = "INTEGER", this.integer = a, this.stringModeValue = Number(a);
    }, a.AST.BooleanNode = function(a) {
        this.type = "BOOLEAN", this.bool = a, this.stringModeValue = "true" === a;
    }, a.AST.CommentNode = function(a) {
        this.type = "comment", this.comment = a;
    };
    var g = [ "description", "fileName", "lineNumber", "message", "name", "number", "stack" ];
    a.Exception = function() {
        for (var a = Error.prototype.constructor.apply(this, arguments), b = 0; b < g.length; b++) this[g[b]] = a[g[b]];
    }, a.Exception.prototype = new Error(), a.SafeString = function(a) {
        this.string = a;
    }, a.SafeString.prototype.toString = function() {
        return this.string.toString();
    };
    var h = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#x27;",
        "`": "&#x60;"
    }, i = /[&<>"'`]/g, j = /[&<>"'`]/, k = function(a) {
        return h[a] || "&amp;";
    };
    a.Utils = {
        extend: function(a, b) {
            for (var c in b) b.hasOwnProperty(c) && (a[c] = b[c]);
        },
        escapeExpression: function(b) {
            return b instanceof a.SafeString ? b.toString() : null == b || b === !1 ? "" : (b = b.toString(), 
            j.test(b) ? b.replace(i, k) : b);
        },
        isEmpty: function(a) {
            return a || 0 === a ? "[object Array]" === c.call(a) && 0 === a.length ? !0 : !1 : !0;
        }
    };
    var l = a.Compiler = function() {}, m = a.JavaScriptCompiler = function() {};
    l.prototype = {
        compiler: l,
        disassemble: function() {
            for (var a, b, c, d = this.opcodes, e = [], f = 0, g = d.length; g > f; f++) if (a = d[f], 
            "DECLARE" === a.opcode) e.push("DECLARE " + a.name + "=" + a.value); else {
                b = [];
                for (var h = 0; h < a.args.length; h++) c = a.args[h], "string" == typeof c && (c = '"' + c.replace("\n", "\\n") + '"'), 
                b.push(c);
                e.push(a.opcode + " " + b.join(" "));
            }
            return e.join("\n");
        },
        equals: function(a) {
            var b = this.opcodes.length;
            if (a.opcodes.length !== b) return !1;
            for (var c = 0; b > c; c++) {
                var d = this.opcodes[c], e = a.opcodes[c];
                if (d.opcode !== e.opcode || d.args.length !== e.args.length) return !1;
                for (var f = 0; f < d.args.length; f++) if (d.args[f] !== e.args[f]) return !1;
            }
            if (b = this.children.length, a.children.length !== b) return !1;
            for (c = 0; b > c; c++) if (!this.children[c].equals(a.children[c])) return !1;
            return !0;
        },
        guid: 0,
        compile: function(a, b) {
            this.children = [], this.depths = {
                list: []
            }, this.options = b;
            var c = this.options.knownHelpers;
            if (this.options.knownHelpers = {
                helperMissing: !0,
                blockHelperMissing: !0,
                each: !0,
                "if": !0,
                unless: !0,
                "with": !0,
                log: !0
            }, c) for (var d in c) this.options.knownHelpers[d] = c[d];
            return this.program(a);
        },
        accept: function(a) {
            return this[a.type](a);
        },
        program: function(a) {
            var b, c = a.statements;
            this.opcodes = [];
            for (var d = 0, e = c.length; e > d; d++) b = c[d], this[b.type](b);
            return this.isSimple = 1 === e, this.depths.list = this.depths.list.sort(function(a, b) {
                return a - b;
            }), this;
        },
        compileProgram: function(a) {
            var b, c = new this.compiler().compile(a, this.options), d = this.guid++;
            this.usePartial = this.usePartial || c.usePartial, this.children[d] = c;
            for (var e = 0, f = c.depths.list.length; f > e; e++) b = c.depths.list[e], 2 > b || this.addDepth(b - 1);
            return d;
        },
        block: function(a) {
            var b = a.mustache, c = a.program, d = a.inverse;
            c && (c = this.compileProgram(c)), d && (d = this.compileProgram(d));
            var e = this.classifyMustache(b);
            "helper" === e ? this.helperMustache(b, c, d) : "simple" === e ? (this.simpleMustache(b), 
            this.opcode("pushProgram", c), this.opcode("pushProgram", d), this.opcode("emptyHash"), 
            this.opcode("blockValue")) : (this.ambiguousMustache(b, c, d), this.opcode("pushProgram", c), 
            this.opcode("pushProgram", d), this.opcode("emptyHash"), this.opcode("ambiguousBlockValue")), 
            this.opcode("append");
        },
        hash: function(a) {
            var b, c, d = a.pairs;
            this.opcode("pushHash");
            for (var e = 0, f = d.length; f > e; e++) b = d[e], c = b[1], this.options.stringParams ? (c.depth && this.addDepth(c.depth), 
            this.opcode("getContext", c.depth || 0), this.opcode("pushStringParam", c.stringModeValue, c.type)) : this.accept(c), 
            this.opcode("assignToHash", b[0]);
            this.opcode("popHash");
        },
        partial: function(a) {
            var b = a.partialName;
            this.usePartial = !0, a.context ? this.ID(a.context) : this.opcode("push", "depth0"), 
            this.opcode("invokePartial", b.name), this.opcode("append");
        },
        content: function(a) {
            this.opcode("appendContent", a.string);
        },
        mustache: function(a) {
            var b = this.options, c = this.classifyMustache(a);
            "simple" === c ? this.simpleMustache(a) : "helper" === c ? this.helperMustache(a) : this.ambiguousMustache(a), 
            a.escaped && !b.noEscape ? this.opcode("appendEscaped") : this.opcode("append");
        },
        ambiguousMustache: function(a, b, c) {
            var d = a.id, e = d.parts[0], f = null != b || null != c;
            this.opcode("getContext", d.depth), this.opcode("pushProgram", b), this.opcode("pushProgram", c), 
            this.opcode("invokeAmbiguous", e, f);
        },
        simpleMustache: function(a) {
            var b = a.id;
            "DATA" === b.type ? this.DATA(b) : b.parts.length ? this.ID(b) : (this.addDepth(b.depth), 
            this.opcode("getContext", b.depth), this.opcode("pushContext")), this.opcode("resolvePossibleLambda");
        },
        helperMustache: function(a, b, c) {
            var d = this.setupFullMustacheParams(a, b, c), e = a.id.parts[0];
            if (this.options.knownHelpers[e]) this.opcode("invokeKnownHelper", d.length, e); else {
                if (this.options.knownHelpersOnly) throw new Error("You specified knownHelpersOnly, but used the unknown helper " + e);
                this.opcode("invokeHelper", d.length, e);
            }
        },
        ID: function(a) {
            this.addDepth(a.depth), this.opcode("getContext", a.depth);
            var b = a.parts[0];
            b ? this.opcode("lookupOnContext", a.parts[0]) : this.opcode("pushContext");
            for (var c = 1, d = a.parts.length; d > c; c++) this.opcode("lookup", a.parts[c]);
        },
        DATA: function(a) {
            this.options.data = !0, this.opcode("lookupData", a.id);
        },
        STRING: function(a) {
            this.opcode("pushString", a.string);
        },
        INTEGER: function(a) {
            this.opcode("pushLiteral", a.integer);
        },
        BOOLEAN: function(a) {
            this.opcode("pushLiteral", a.bool);
        },
        comment: function() {},
        opcode: function(a) {
            this.opcodes.push({
                opcode: a,
                args: [].slice.call(arguments, 1)
            });
        },
        declare: function(a, b) {
            this.opcodes.push({
                opcode: "DECLARE",
                name: a,
                value: b
            });
        },
        addDepth: function(a) {
            if (isNaN(a)) throw new Error("EWOT");
            0 !== a && (this.depths[a] || (this.depths[a] = !0, this.depths.list.push(a)));
        },
        classifyMustache: function(a) {
            var b = a.isHelper, c = a.eligibleHelper, d = this.options;
            if (c && !b) {
                var e = a.id.parts[0];
                d.knownHelpers[e] ? b = !0 : d.knownHelpersOnly && (c = !1);
            }
            return b ? "helper" : c ? "ambiguous" : "simple";
        },
        pushParams: function(a) {
            for (var b, c = a.length; c--; ) b = a[c], this.options.stringParams ? (b.depth && this.addDepth(b.depth), 
            this.opcode("getContext", b.depth || 0), this.opcode("pushStringParam", b.stringModeValue, b.type)) : this[b.type](b);
        },
        setupMustacheParams: function(a) {
            var b = a.params;
            return this.pushParams(b), a.hash ? this.hash(a.hash) : this.opcode("emptyHash"), 
            b;
        },
        setupFullMustacheParams: function(a, b, c) {
            var d = a.params;
            return this.pushParams(d), this.opcode("pushProgram", b), this.opcode("pushProgram", c), 
            a.hash ? this.hash(a.hash) : this.opcode("emptyHash"), d;
        }
    };
    var n = function(a) {
        this.value = a;
    };
    m.prototype = {
        nameLookup: function(a, b) {
            return /^[0-9]+$/.test(b) ? a + "[" + b + "]" : m.isValidJavaScriptVariableName(b) ? a + "." + b : a + "['" + b + "']";
        },
        appendToBuffer: function(a) {
            return this.environment.isSimple ? "return " + a + ";" : {
                appendToBuffer: !0,
                content: a,
                toString: function() {
                    return "buffer += " + a + ";";
                }
            };
        },
        initializeBuffer: function() {
            return this.quotedString("");
        },
        namespace: "Handlebars",
        compile: function(b, c, d, e) {
            this.environment = b, this.options = c || {}, a.log(a.logger.DEBUG, this.environment.disassemble() + "\n\n"), 
            this.name = this.environment.name, this.isChild = !!d, this.context = d || {
                programs: [],
                environments: [],
                aliases: {}
            }, this.preamble(), this.stackSlot = 0, this.stackVars = [], this.registers = {
                list: []
            }, this.compileStack = [], this.inlineStack = [], this.compileChildren(b, c);
            var f, g = b.opcodes;
            for (this.i = 0, r = g.length; this.i < r; this.i++) f = g[this.i], "DECLARE" === f.opcode ? this[f.name] = f.value : this[f.opcode].apply(this, f.args);
            return this.createFunctionContext(e);
        },
        nextOpcode: function() {
            var a = this.environment.opcodes;
            return a[this.i + 1];
        },
        eat: function() {
            this.i = this.i + 1;
        },
        preamble: function() {
            var a = [];
            if (this.isChild) a.push(""); else {
                var b = this.namespace, c = "helpers = helpers || " + b + ".helpers;";
                this.environment.usePartial && (c = c + " partials = partials || " + b + ".partials;"), 
                this.options.data && (c += " data = data || {};"), a.push(c);
            }
            this.environment.isSimple ? a.push("") : a.push(", buffer = " + this.initializeBuffer()), 
            this.lastContext = 0, this.source = a;
        },
        createFunctionContext: function(b) {
            var c = this.stackVars.concat(this.registers.list);
            if (c.length > 0 && (this.source[1] = this.source[1] + ", " + c.join(", ")), !this.isChild) for (var d in this.context.aliases) this.source[1] = this.source[1] + ", " + d + "=" + this.context.aliases[d];
            this.source[1] && (this.source[1] = "var " + this.source[1].substring(2) + ";"), 
            this.isChild || (this.source[1] += "\n" + this.context.programs.join("\n") + "\n"), 
            this.environment.isSimple || this.source.push("return buffer;");
            for (var e = this.isChild ? [ "depth0", "data" ] : [ "Handlebars", "depth0", "helpers", "partials", "data" ], f = 0, g = this.environment.depths.list.length; g > f; f++) e.push("depth" + this.environment.depths.list[f]);
            var h = this.mergeSource();
            if (!this.isChild) {
                var i = a.COMPILER_REVISION, j = a.REVISION_CHANGES[i];
                h = "this.compilerInfo = [" + i + ",'" + j + "'];\n" + h;
            }
            if (b) return e.push(h), Function.apply(this, e);
            var k = "function " + (this.name || "") + "(" + e.join(",") + ") {\n  " + h + "}";
            return a.log(a.logger.DEBUG, k + "\n\n"), k;
        },
        mergeSource: function() {
            for (var a, c = "", d = 0, e = this.source.length; e > d; d++) {
                var f = this.source[d];
                f.appendToBuffer ? a = a ? a + "\n    + " + f.content : f.content : (a && (c += "buffer += " + a + ";\n  ", 
                a = b), c += f + "\n  ");
            }
            return c;
        },
        blockValue: function() {
            this.context.aliases.blockHelperMissing = "helpers.blockHelperMissing";
            var a = [ "depth0" ];
            this.setupParams(0, a), this.replaceStack(function(b) {
                return a.splice(1, 0, b), "blockHelperMissing.call(" + a.join(", ") + ")";
            });
        },
        ambiguousBlockValue: function() {
            this.context.aliases.blockHelperMissing = "helpers.blockHelperMissing";
            var a = [ "depth0" ];
            this.setupParams(0, a);
            var b = this.topStack();
            a.splice(1, 0, b), a[a.length - 1] = "options", this.source.push("if (!" + this.lastHelper + ") { " + b + " = blockHelperMissing.call(" + a.join(", ") + "); }");
        },
        appendContent: function(a) {
            this.source.push(this.appendToBuffer(this.quotedString(a)));
        },
        append: function() {
            this.flushInline();
            var a = this.popStack();
            this.source.push("if(" + a + " || " + a + " === 0) { " + this.appendToBuffer(a) + " }"), 
            this.environment.isSimple && this.source.push("else { " + this.appendToBuffer("''") + " }");
        },
        appendEscaped: function() {
            this.context.aliases.escapeExpression = "this.escapeExpression", this.source.push(this.appendToBuffer("escapeExpression(" + this.popStack() + ")"));
        },
        getContext: function(a) {
            this.lastContext !== a && (this.lastContext = a);
        },
        lookupOnContext: function(a) {
            this.push(this.nameLookup("depth" + this.lastContext, a, "context"));
        },
        pushContext: function() {
            this.pushStackLiteral("depth" + this.lastContext);
        },
        resolvePossibleLambda: function() {
            this.context.aliases.functionType = '"function"', this.replaceStack(function(a) {
                return "typeof " + a + " === functionType ? " + a + ".apply(depth0) : " + a;
            });
        },
        lookup: function(a) {
            this.replaceStack(function(b) {
                return b + " == null || " + b + " === false ? " + b + " : " + this.nameLookup(b, a, "context");
            });
        },
        lookupData: function(a) {
            this.push(this.nameLookup("data", a, "data"));
        },
        pushStringParam: function(a, b) {
            this.pushStackLiteral("depth" + this.lastContext), this.pushString(b), "string" == typeof a ? this.pushString(a) : this.pushStackLiteral(a);
        },
        emptyHash: function() {
            this.pushStackLiteral("{}"), this.options.stringParams && (this.register("hashTypes", "{}"), 
            this.register("hashContexts", "{}"));
        },
        pushHash: function() {
            this.hash = {
                values: [],
                types: [],
                contexts: []
            };
        },
        popHash: function() {
            var a = this.hash;
            this.hash = b, this.options.stringParams && (this.register("hashContexts", "{" + a.contexts.join(",") + "}"), 
            this.register("hashTypes", "{" + a.types.join(",") + "}")), this.push("{\n    " + a.values.join(",\n    ") + "\n  }");
        },
        pushString: function(a) {
            this.pushStackLiteral(this.quotedString(a));
        },
        push: function(a) {
            return this.inlineStack.push(a), a;
        },
        pushLiteral: function(a) {
            this.pushStackLiteral(a);
        },
        pushProgram: function(a) {
            null != a ? this.pushStackLiteral(this.programExpression(a)) : this.pushStackLiteral(null);
        },
        invokeHelper: function(a, b) {
            this.context.aliases.helperMissing = "helpers.helperMissing";
            var c = this.lastHelper = this.setupHelper(a, b, !0);
            this.push(c.name), this.replaceStack(function(a) {
                return a + " ? " + a + ".call(" + c.callParams + ") " + ": helperMissing.call(" + c.helperMissingParams + ")";
            });
        },
        invokeKnownHelper: function(a, b) {
            var c = this.setupHelper(a, b);
            this.push(c.name + ".call(" + c.callParams + ")");
        },
        invokeAmbiguous: function(a, b) {
            this.context.aliases.functionType = '"function"', this.pushStackLiteral("{}");
            var c = this.setupHelper(0, a, b), d = this.lastHelper = this.nameLookup("helpers", a, "helper"), e = this.nameLookup("depth" + this.lastContext, a, "context"), f = this.nextStack();
            this.source.push("if (" + f + " = " + d + ") { " + f + " = " + f + ".call(" + c.callParams + "); }"), 
            this.source.push("else { " + f + " = " + e + "; " + f + " = typeof " + f + " === functionType ? " + f + ".apply(depth0) : " + f + "; }");
        },
        invokePartial: function(a) {
            var b = [ this.nameLookup("partials", a, "partial"), "'" + a + "'", this.popStack(), "helpers", "partials" ];
            this.options.data && b.push("data"), this.context.aliases.self = "this", this.push("self.invokePartial(" + b.join(", ") + ")");
        },
        assignToHash: function(a) {
            var b, c, d = this.popStack();
            this.options.stringParams && (c = this.popStack(), b = this.popStack());
            var e = this.hash;
            b && e.contexts.push("'" + a + "': " + b), c && e.types.push("'" + a + "': " + c), 
            e.values.push("'" + a + "': (" + d + ")");
        },
        compiler: m,
        compileChildren: function(a, b) {
            for (var c, d, e = a.children, f = 0, g = e.length; g > f; f++) {
                c = e[f], d = new this.compiler();
                var h = this.matchExistingProgram(c);
                null == h ? (this.context.programs.push(""), h = this.context.programs.length, c.index = h, 
                c.name = "program" + h, this.context.programs[h] = d.compile(c, b, this.context), 
                this.context.environments[h] = c) : (c.index = h, c.name = "program" + h);
            }
        },
        matchExistingProgram: function(a) {
            for (var b = 0, c = this.context.environments.length; c > b; b++) {
                var d = this.context.environments[b];
                if (d && d.equals(a)) return b;
            }
        },
        programExpression: function(a) {
            if (this.context.aliases.self = "this", null == a) return "self.noop";
            for (var b, c = this.environment.children[a], d = c.depths.list, e = [ c.index, c.name, "data" ], f = 0, g = d.length; g > f; f++) b = d[f], 
            1 === b ? e.push("depth0") : e.push("depth" + (b - 1));
            return (0 === d.length ? "self.program(" : "self.programWithDepth(") + e.join(", ") + ")";
        },
        register: function(a, b) {
            this.useRegister(a), this.source.push(a + " = " + b + ";");
        },
        useRegister: function(a) {
            this.registers[a] || (this.registers[a] = !0, this.registers.list.push(a));
        },
        pushStackLiteral: function(a) {
            return this.push(new n(a));
        },
        pushStack: function(a) {
            this.flushInline();
            var b = this.incrStack();
            return a && this.source.push(b + " = " + a + ";"), this.compileStack.push(b), b;
        },
        replaceStack: function(a) {
            var b, c = "", d = this.isInline();
            if (d) {
                var e = this.popStack(!0);
                if (e instanceof n) b = e.value; else {
                    var f = this.stackSlot ? this.topStackName() : this.incrStack();
                    c = "(" + this.push(f) + " = " + e + "),", b = this.topStack();
                }
            } else b = this.topStack();
            var g = a.call(this, b);
            return d ? ((this.inlineStack.length || this.compileStack.length) && this.popStack(), 
            this.push("(" + c + g + ")")) : (/^stack/.test(b) || (b = this.nextStack()), this.source.push(b + " = (" + c + g + ");")), 
            b;
        },
        nextStack: function() {
            return this.pushStack();
        },
        incrStack: function() {
            return this.stackSlot++, this.stackSlot > this.stackVars.length && this.stackVars.push("stack" + this.stackSlot), 
            this.topStackName();
        },
        topStackName: function() {
            return "stack" + this.stackSlot;
        },
        flushInline: function() {
            var a = this.inlineStack;
            if (a.length) {
                this.inlineStack = [];
                for (var b = 0, c = a.length; c > b; b++) {
                    var d = a[b];
                    d instanceof n ? this.compileStack.push(d) : this.pushStack(d);
                }
            }
        },
        isInline: function() {
            return this.inlineStack.length;
        },
        popStack: function(a) {
            var b = this.isInline(), c = (b ? this.inlineStack : this.compileStack).pop();
            return !a && c instanceof n ? c.value : (b || this.stackSlot--, c);
        },
        topStack: function(a) {
            var b = this.isInline() ? this.inlineStack : this.compileStack, c = b[b.length - 1];
            return !a && c instanceof n ? c.value : c;
        },
        quotedString: function(a) {
            return '"' + a.replace(/\\/g, "\\\\").replace(/"/g, '\\"').replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029") + '"';
        },
        setupHelper: function(a, b, c) {
            var d = [];
            this.setupParams(a, d, c);
            var e = this.nameLookup("helpers", b, "helper");
            return {
                params: d,
                name: e,
                callParams: [ "depth0" ].concat(d).join(", "),
                helperMissingParams: c && [ "depth0", this.quotedString(b) ].concat(d).join(", ")
            };
        },
        setupParams: function(a, b, c) {
            var d, e, f, g = [], h = [], i = [];
            g.push("hash:" + this.popStack()), e = this.popStack(), f = this.popStack(), (f || e) && (f || (this.context.aliases.self = "this", 
            f = "self.noop"), e || (this.context.aliases.self = "this", e = "self.noop"), g.push("inverse:" + e), 
            g.push("fn:" + f));
            for (var j = 0; a > j; j++) d = this.popStack(), b.push(d), this.options.stringParams && (i.push(this.popStack()), 
            h.push(this.popStack()));
            return this.options.stringParams && (g.push("contexts:[" + h.join(",") + "]"), g.push("types:[" + i.join(",") + "]"), 
            g.push("hashContexts:hashContexts"), g.push("hashTypes:hashTypes")), this.options.data && g.push("data:data"), 
            g = "{" + g.join(",") + "}", c ? (this.register("options", g), b.push("options")) : b.push(g), 
            b.join(", ");
        }
    };
    for (var o = "break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "), p = m.RESERVED_WORDS = {}, q = 0, r = o.length; r > q; q++) p[o[q]] = !0;
    m.isValidJavaScriptVariableName = function(a) {
        return !m.RESERVED_WORDS[a] && /^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a) ? !0 : !1;
    }, a.precompile = function(b, c) {
        if (null == b || "string" != typeof b && b.constructor !== a.AST.ProgramNode) throw new a.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed " + b);
        c = c || {}, "data" in c || (c.data = !0);
        var d = a.parse(b), e = new l().compile(d, c);
        return new m().compile(e, c);
    }, a.compile = function(c, d) {
        function e() {
            var e = a.parse(c), f = new l().compile(e, d), g = new m().compile(f, d, b, !0);
            return a.template(g);
        }
        if (null == c || "string" != typeof c && c.constructor !== a.AST.ProgramNode) throw new a.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed " + c);
        d = d || {}, "data" in d || (d.data = !0);
        var f;
        return function(a, b) {
            return f || (f = e()), f.call(this, a, b);
        };
    }, a.VM = {
        template: function(b) {
            var c = {
                escapeExpression: a.Utils.escapeExpression,
                invokePartial: a.VM.invokePartial,
                programs: [],
                program: function(b, c, d) {
                    var e = this.programs[b];
                    return d ? e = a.VM.program(b, c, d) : e || (e = this.programs[b] = a.VM.program(b, c)), 
                    e;
                },
                programWithDepth: a.VM.programWithDepth,
                noop: a.VM.noop,
                compilerInfo: null
            };
            return function(d, e) {
                e = e || {};
                var f = b.call(c, a, d, e.helpers, e.partials, e.data), g = c.compilerInfo || [], h = g[0] || 1, i = a.COMPILER_REVISION;
                if (h !== i) {
                    if (i > h) {
                        var j = a.REVISION_CHANGES[i], k = a.REVISION_CHANGES[h];
                        throw "Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (" + j + ") or downgrade your runtime to an older version (" + k + ").";
                    }
                    throw "Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (" + g[1] + ").";
                }
                return f;
            };
        },
        programWithDepth: function(a, b, c) {
            var d = Array.prototype.slice.call(arguments, 3), e = function(a, e) {
                return e = e || {}, b.apply(this, [ a, e.data || c ].concat(d));
            };
            return e.program = a, e.depth = d.length, e;
        },
        program: function(a, b, c) {
            var d = function(a, d) {
                return d = d || {}, b(a, d.data || c);
            };
            return d.program = a, d.depth = 0, d;
        },
        noop: function() {
            return "";
        },
        invokePartial: function(c, d, e, f, g, h) {
            var i = {
                helpers: f,
                partials: g,
                data: h
            };
            if (c === b) throw new a.Exception("The partial " + d + " could not be found");
            if (c instanceof Function) return c(e, i);
            if (a.compile) return g[d] = a.compile(c, {
                data: h !== b
            }), g[d](e, i);
            throw new a.Exception("The partial " + d + " could not be compiled when running in runtime-only mode");
        }
    }, a.template = a.VM.template;
})(Handlebars), function() {
    var a = this, b = a._, c = {}, d = Array.prototype, e = Object.prototype, f = Function.prototype, g = d.push, h = d.slice, i = d.concat, j = e.toString, k = e.hasOwnProperty, l = d.forEach, m = d.map, n = d.reduce, o = d.reduceRight, p = d.filter, q = d.every, r = d.some, s = d.indexOf, t = d.lastIndexOf, u = Array.isArray, v = Object.keys, w = f.bind, x = function(a) {
        return a instanceof x ? a : this instanceof x ? (this._wrapped = a, void 0) : new x(a);
    };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = x), 
    exports._ = x) : a._ = x, x.VERSION = "1.4.4";
    var y = x.each = x.forEach = function(a, b, d) {
        if (null != a) if (l && a.forEach === l) a.forEach(b, d); else if (a.length === +a.length) {
            for (var e = 0, f = a.length; f > e; e++) if (b.call(d, a[e], e, a) === c) return;
        } else for (var g in a) if (x.has(a, g) && b.call(d, a[g], g, a) === c) return;
    };
    x.map = x.collect = function(a, b, c) {
        var d = [];
        return null == a ? d : m && a.map === m ? a.map(b, c) : (y(a, function(a, e, f) {
            d[d.length] = b.call(c, a, e, f);
        }), d);
    };
    var z = "Reduce of empty array with no initial value";
    x.reduce = x.foldl = x.inject = function(a, b, c, d) {
        var e = arguments.length > 2;
        if (null == a && (a = []), n && a.reduce === n) return d && (b = x.bind(b, d)), 
        e ? a.reduce(b, c) : a.reduce(b);
        if (y(a, function(a, f, g) {
            e ? c = b.call(d, c, a, f, g) : (c = a, e = !0);
        }), !e) throw new TypeError(z);
        return c;
    }, x.reduceRight = x.foldr = function(a, b, c, d) {
        var e = arguments.length > 2;
        if (null == a && (a = []), o && a.reduceRight === o) return d && (b = x.bind(b, d)), 
        e ? a.reduceRight(b, c) : a.reduceRight(b);
        var f = a.length;
        if (f !== +f) {
            var g = x.keys(a);
            f = g.length;
        }
        if (y(a, function(h, i, j) {
            i = g ? g[--f] : --f, e ? c = b.call(d, c, a[i], i, j) : (c = a[i], e = !0);
        }), !e) throw new TypeError(z);
        return c;
    }, x.find = x.detect = function(a, b, c) {
        var d;
        return A(a, function(a, e, f) {
            return b.call(c, a, e, f) ? (d = a, !0) : void 0;
        }), d;
    }, x.filter = x.select = function(a, b, c) {
        var d = [];
        return null == a ? d : p && a.filter === p ? a.filter(b, c) : (y(a, function(a, e, f) {
            b.call(c, a, e, f) && (d[d.length] = a);
        }), d);
    }, x.reject = function(a, b, c) {
        return x.filter(a, function(a, d, e) {
            return !b.call(c, a, d, e);
        }, c);
    }, x.every = x.all = function(a, b, d) {
        b || (b = x.identity);
        var e = !0;
        return null == a ? e : q && a.every === q ? a.every(b, d) : (y(a, function(a, f, g) {
            return (e = e && b.call(d, a, f, g)) ? void 0 : c;
        }), !!e);
    };
    var A = x.some = x.any = function(a, b, d) {
        b || (b = x.identity);
        var e = !1;
        return null == a ? e : r && a.some === r ? a.some(b, d) : (y(a, function(a, f, g) {
            return e || (e = b.call(d, a, f, g)) ? c : void 0;
        }), !!e);
    };
    x.contains = x.include = function(a, b) {
        return null == a ? !1 : s && a.indexOf === s ? -1 != a.indexOf(b) : A(a, function(a) {
            return a === b;
        });
    }, x.invoke = function(a, b) {
        var c = h.call(arguments, 2), d = x.isFunction(b);
        return x.map(a, function(a) {
            return (d ? b : a[b]).apply(a, c);
        });
    }, x.pluck = function(a, b) {
        return x.map(a, function(a) {
            return a[b];
        });
    }, x.where = function(a, b, c) {
        return x.isEmpty(b) ? c ? null : [] : x[c ? "find" : "filter"](a, function(a) {
            for (var c in b) if (b[c] !== a[c]) return !1;
            return !0;
        });
    }, x.findWhere = function(a, b) {
        return x.where(a, b, !0);
    }, x.max = function(a, b, c) {
        if (!b && x.isArray(a) && a[0] === +a[0] && 65535 > a.length) return Math.max.apply(Math, a);
        if (!b && x.isEmpty(a)) return -1 / 0;
        var d = {
            computed: -1 / 0,
            value: -1 / 0
        };
        return y(a, function(a, e, f) {
            var g = b ? b.call(c, a, e, f) : a;
            g >= d.computed && (d = {
                value: a,
                computed: g
            });
        }), d.value;
    }, x.min = function(a, b, c) {
        if (!b && x.isArray(a) && a[0] === +a[0] && 65535 > a.length) return Math.min.apply(Math, a);
        if (!b && x.isEmpty(a)) return 1 / 0;
        var d = {
            computed: 1 / 0,
            value: 1 / 0
        };
        return y(a, function(a, e, f) {
            var g = b ? b.call(c, a, e, f) : a;
            d.computed > g && (d = {
                value: a,
                computed: g
            });
        }), d.value;
    }, x.shuffle = function(a) {
        var b, c = 0, d = [];
        return y(a, function(a) {
            b = x.random(c++), d[c - 1] = d[b], d[b] = a;
        }), d;
    };
    var B = function(a) {
        return x.isFunction(a) ? a : function(b) {
            return b[a];
        };
    };
    x.sortBy = function(a, b, c) {
        var d = B(b);
        return x.pluck(x.map(a, function(a, b, e) {
            return {
                value: a,
                index: b,
                criteria: d.call(c, a, b, e)
            };
        }).sort(function(a, b) {
            var c = a.criteria, d = b.criteria;
            if (c !== d) {
                if (c > d || void 0 === c) return 1;
                if (d > c || void 0 === d) return -1;
            }
            return a.index < b.index ? -1 : 1;
        }), "value");
    };
    var C = function(a, b, c, d) {
        var e = {}, f = B(b || x.identity);
        return y(a, function(b, g) {
            var h = f.call(c, b, g, a);
            d(e, h, b);
        }), e;
    };
    x.groupBy = function(a, b, c) {
        return C(a, b, c, function(a, b, c) {
            (x.has(a, b) ? a[b] : a[b] = []).push(c);
        });
    }, x.countBy = function(a, b, c) {
        return C(a, b, c, function(a, b) {
            x.has(a, b) || (a[b] = 0), a[b]++;
        });
    }, x.sortedIndex = function(a, b, c, d) {
        c = null == c ? x.identity : B(c);
        for (var e = c.call(d, b), f = 0, g = a.length; g > f; ) {
            var h = f + g >>> 1;
            e > c.call(d, a[h]) ? f = h + 1 : g = h;
        }
        return f;
    }, x.toArray = function(a) {
        return a ? x.isArray(a) ? h.call(a) : a.length === +a.length ? x.map(a, x.identity) : x.values(a) : [];
    }, x.size = function(a) {
        return null == a ? 0 : a.length === +a.length ? a.length : x.keys(a).length;
    }, x.first = x.head = x.take = function(a, b, c) {
        return null == a ? void 0 : null == b || c ? a[0] : h.call(a, 0, b);
    }, x.initial = function(a, b, c) {
        return h.call(a, 0, a.length - (null == b || c ? 1 : b));
    }, x.last = function(a, b, c) {
        return null == a ? void 0 : null == b || c ? a[a.length - 1] : h.call(a, Math.max(a.length - b, 0));
    }, x.rest = x.tail = x.drop = function(a, b, c) {
        return h.call(a, null == b || c ? 1 : b);
    }, x.compact = function(a) {
        return x.filter(a, x.identity);
    };
    var D = function(a, b, c) {
        return y(a, function(a) {
            x.isArray(a) ? b ? g.apply(c, a) : D(a, b, c) : c.push(a);
        }), c;
    };
    x.flatten = function(a, b) {
        return D(a, b, []);
    }, x.without = function(a) {
        return x.difference(a, h.call(arguments, 1));
    }, x.uniq = x.unique = function(a, b, c, d) {
        x.isFunction(b) && (d = c, c = b, b = !1);
        var e = c ? x.map(a, c, d) : a, f = [], g = [];
        return y(e, function(c, d) {
            (b ? d && g[g.length - 1] === c : x.contains(g, c)) || (g.push(c), f.push(a[d]));
        }), f;
    }, x.union = function() {
        return x.uniq(i.apply(d, arguments));
    }, x.intersection = function(a) {
        var b = h.call(arguments, 1);
        return x.filter(x.uniq(a), function(a) {
            return x.every(b, function(b) {
                return x.indexOf(b, a) >= 0;
            });
        });
    }, x.difference = function(a) {
        var b = i.apply(d, h.call(arguments, 1));
        return x.filter(a, function(a) {
            return !x.contains(b, a);
        });
    }, x.zip = function() {
        for (var a = h.call(arguments), b = x.max(x.pluck(a, "length")), c = Array(b), d = 0; b > d; d++) c[d] = x.pluck(a, "" + d);
        return c;
    }, x.object = function(a, b) {
        if (null == a) return {};
        for (var c = {}, d = 0, e = a.length; e > d; d++) b ? c[a[d]] = b[d] : c[a[d][0]] = a[d][1];
        return c;
    }, x.indexOf = function(a, b, c) {
        if (null == a) return -1;
        var d = 0, e = a.length;
        if (c) {
            if ("number" != typeof c) return d = x.sortedIndex(a, b), a[d] === b ? d : -1;
            d = 0 > c ? Math.max(0, e + c) : c;
        }
        if (s && a.indexOf === s) return a.indexOf(b, c);
        for (;e > d; d++) if (a[d] === b) return d;
        return -1;
    }, x.lastIndexOf = function(a, b, c) {
        if (null == a) return -1;
        var d = null != c;
        if (t && a.lastIndexOf === t) return d ? a.lastIndexOf(b, c) : a.lastIndexOf(b);
        for (var e = d ? c : a.length; e--; ) if (a[e] === b) return e;
        return -1;
    }, x.range = function(a, b, c) {
        1 >= arguments.length && (b = a || 0, a = 0), c = arguments[2] || 1;
        for (var d = Math.max(Math.ceil((b - a) / c), 0), e = 0, f = Array(d); d > e; ) f[e++] = a, 
        a += c;
        return f;
    }, x.bind = function(a, b) {
        if (a.bind === w && w) return w.apply(a, h.call(arguments, 1));
        var c = h.call(arguments, 2);
        return function() {
            return a.apply(b, c.concat(h.call(arguments)));
        };
    }, x.partial = function(a) {
        var b = h.call(arguments, 1);
        return function() {
            return a.apply(this, b.concat(h.call(arguments)));
        };
    }, x.bindAll = function(a) {
        var b = h.call(arguments, 1);
        return 0 === b.length && (b = x.functions(a)), y(b, function(b) {
            a[b] = x.bind(a[b], a);
        }), a;
    }, x.memoize = function(a, b) {
        var c = {};
        return b || (b = x.identity), function() {
            var d = b.apply(this, arguments);
            return x.has(c, d) ? c[d] : c[d] = a.apply(this, arguments);
        };
    }, x.delay = function(a, b) {
        var c = h.call(arguments, 2);
        return setTimeout(function() {
            return a.apply(null, c);
        }, b);
    }, x.defer = function(a) {
        return x.delay.apply(x, [ a, 1 ].concat(h.call(arguments, 1)));
    }, x.throttle = function(a, b) {
        var c, d, e, f, g = 0, h = function() {
            g = new Date(), e = null, f = a.apply(c, d);
        };
        return function() {
            var i = new Date(), j = b - (i - g);
            return c = this, d = arguments, 0 >= j ? (clearTimeout(e), e = null, g = i, f = a.apply(c, d)) : e || (e = setTimeout(h, j)), 
            f;
        };
    }, x.debounce = function(a, b, c) {
        var d, e;
        return function() {
            var f = this, g = arguments, h = function() {
                d = null, c || (e = a.apply(f, g));
            }, i = c && !d;
            return clearTimeout(d), d = setTimeout(h, b), i && (e = a.apply(f, g)), e;
        };
    }, x.once = function(a) {
        var b, c = !1;
        return function() {
            return c ? b : (c = !0, b = a.apply(this, arguments), a = null, b);
        };
    }, x.wrap = function(a, b) {
        return function() {
            var c = [ a ];
            return g.apply(c, arguments), b.apply(this, c);
        };
    }, x.compose = function() {
        var a = arguments;
        return function() {
            for (var b = arguments, c = a.length - 1; c >= 0; c--) b = [ a[c].apply(this, b) ];
            return b[0];
        };
    }, x.after = function(a, b) {
        return 0 >= a ? b() : function() {
            return 1 > --a ? b.apply(this, arguments) : void 0;
        };
    }, x.keys = v || function(a) {
        if (a !== Object(a)) throw new TypeError("Invalid object");
        var b = [];
        for (var c in a) x.has(a, c) && (b[b.length] = c);
        return b;
    }, x.values = function(a) {
        var b = [];
        for (var c in a) x.has(a, c) && b.push(a[c]);
        return b;
    }, x.pairs = function(a) {
        var b = [];
        for (var c in a) x.has(a, c) && b.push([ c, a[c] ]);
        return b;
    }, x.invert = function(a) {
        var b = {};
        for (var c in a) x.has(a, c) && (b[a[c]] = c);
        return b;
    }, x.functions = x.methods = function(a) {
        var b = [];
        for (var c in a) x.isFunction(a[c]) && b.push(c);
        return b.sort();
    }, x.extend = function(a) {
        return y(h.call(arguments, 1), function(b) {
            if (b) for (var c in b) a[c] = b[c];
        }), a;
    }, x.pick = function(a) {
        var b = {}, c = i.apply(d, h.call(arguments, 1));
        return y(c, function(c) {
            c in a && (b[c] = a[c]);
        }), b;
    }, x.omit = function(a) {
        var b = {}, c = i.apply(d, h.call(arguments, 1));
        for (var e in a) x.contains(c, e) || (b[e] = a[e]);
        return b;
    }, x.defaults = function(a) {
        return y(h.call(arguments, 1), function(b) {
            if (b) for (var c in b) null == a[c] && (a[c] = b[c]);
        }), a;
    }, x.clone = function(a) {
        return x.isObject(a) ? x.isArray(a) ? a.slice() : x.extend({}, a) : a;
    }, x.tap = function(a, b) {
        return b(a), a;
    };
    var E = function(a, b, c, d) {
        if (a === b) return 0 !== a || 1 / a == 1 / b;
        if (null == a || null == b) return a === b;
        a instanceof x && (a = a._wrapped), b instanceof x && (b = b._wrapped);
        var e = j.call(a);
        if (e != j.call(b)) return !1;
        switch (e) {
          case "[object String]":
            return a == b + "";

          case "[object Number]":
            return a != +a ? b != +b : 0 == a ? 1 / a == 1 / b : a == +b;

          case "[object Date]":
          case "[object Boolean]":
            return +a == +b;

          case "[object RegExp]":
            return a.source == b.source && a.global == b.global && a.multiline == b.multiline && a.ignoreCase == b.ignoreCase;
        }
        if ("object" != typeof a || "object" != typeof b) return !1;
        for (var f = c.length; f--; ) if (c[f] == a) return d[f] == b;
        c.push(a), d.push(b);
        var g = 0, h = !0;
        if ("[object Array]" == e) {
            if (g = a.length, h = g == b.length) for (;g-- && (h = E(a[g], b[g], c, d)); ) ;
        } else {
            var i = a.constructor, k = b.constructor;
            if (i !== k && !(x.isFunction(i) && i instanceof i && x.isFunction(k) && k instanceof k)) return !1;
            for (var l in a) if (x.has(a, l) && (g++, !(h = x.has(b, l) && E(a[l], b[l], c, d)))) break;
            if (h) {
                for (l in b) if (x.has(b, l) && !g--) break;
                h = !g;
            }
        }
        return c.pop(), d.pop(), h;
    };
    x.isEqual = function(a, b) {
        return E(a, b, [], []);
    }, x.isEmpty = function(a) {
        if (null == a) return !0;
        if (x.isArray(a) || x.isString(a)) return 0 === a.length;
        for (var b in a) if (x.has(a, b)) return !1;
        return !0;
    }, x.isElement = function(a) {
        return !(!a || 1 !== a.nodeType);
    }, x.isArray = u || function(a) {
        return "[object Array]" == j.call(a);
    }, x.isObject = function(a) {
        return a === Object(a);
    }, y([ "Arguments", "Function", "String", "Number", "Date", "RegExp" ], function(a) {
        x["is" + a] = function(b) {
            return j.call(b) == "[object " + a + "]";
        };
    }), x.isArguments(arguments) || (x.isArguments = function(a) {
        return !(!a || !x.has(a, "callee"));
    }), "function" != typeof /./ && (x.isFunction = function(a) {
        return "function" == typeof a;
    }), x.isFinite = function(a) {
        return isFinite(a) && !isNaN(parseFloat(a));
    }, x.isNaN = function(a) {
        return x.isNumber(a) && a != +a;
    }, x.isBoolean = function(a) {
        return a === !0 || a === !1 || "[object Boolean]" == j.call(a);
    }, x.isNull = function(a) {
        return null === a;
    }, x.isUndefined = function(a) {
        return void 0 === a;
    }, x.has = function(a, b) {
        return k.call(a, b);
    }, x.noConflict = function() {
        return a._ = b, this;
    }, x.identity = function(a) {
        return a;
    }, x.times = function(a, b, c) {
        for (var d = Array(a), e = 0; a > e; e++) d[e] = b.call(c, e);
        return d;
    }, x.random = function(a, b) {
        return null == b && (b = a, a = 0), a + Math.floor(Math.random() * (b - a + 1));
    };
    var F = {
        escape: {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;",
            "/": "&#x2F;"
        }
    };
    F.unescape = x.invert(F.escape);
    var G = {
        escape: RegExp("[" + x.keys(F.escape).join("") + "]", "g"),
        unescape: RegExp("(" + x.keys(F.unescape).join("|") + ")", "g")
    };
    x.each([ "escape", "unescape" ], function(a) {
        x[a] = function(b) {
            return null == b ? "" : ("" + b).replace(G[a], function(b) {
                return F[a][b];
            });
        };
    }), x.result = function(a, b) {
        if (null == a) return null;
        var c = a[b];
        return x.isFunction(c) ? c.call(a) : c;
    }, x.mixin = function(a) {
        y(x.functions(a), function(b) {
            var c = x[b] = a[b];
            x.prototype[b] = function() {
                var a = [ this._wrapped ];
                return g.apply(a, arguments), L.call(this, c.apply(x, a));
            };
        });
    };
    var H = 0;
    x.uniqueId = function(a) {
        var b = ++H + "";
        return a ? a + b : b;
    }, x.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var I = /(.)^/, J = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "	": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
    }, K = /\\|'|\r|\n|\t|\u2028|\u2029/g;
    x.template = function(a, b, c) {
        var d;
        c = x.defaults({}, c, x.templateSettings);
        var e = RegExp([ (c.escape || I).source, (c.interpolate || I).source, (c.evaluate || I).source ].join("|") + "|$", "g"), f = 0, g = "__p+='";
        a.replace(e, function(b, c, d, e, h) {
            return g += a.slice(f, h).replace(K, function(a) {
                return "\\" + J[a];
            }), c && (g += "'+\n((__t=(" + c + "))==null?'':_.escape(__t))+\n'"), d && (g += "'+\n((__t=(" + d + "))==null?'':__t)+\n'"), 
            e && (g += "';\n" + e + "\n__p+='"), f = h + b.length, b;
        }), g += "';\n", c.variable || (g = "with(obj||{}){\n" + g + "}\n"), g = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + g + "return __p;\n";
        try {
            d = Function(c.variable || "obj", "_", g);
        } catch (h) {
            throw h.source = g, h;
        }
        if (b) return d(b, x);
        var i = function(a) {
            return d.call(this, a, x);
        };
        return i.source = "function(" + (c.variable || "obj") + "){\n" + g + "}", i;
    }, x.chain = function(a) {
        return x(a).chain();
    };
    var L = function(a) {
        return this._chain ? x(a).chain() : a;
    };
    x.mixin(x), y([ "pop", "push", "reverse", "shift", "sort", "splice", "unshift" ], function(a) {
        var b = d[a];
        x.prototype[a] = function() {
            var c = this._wrapped;
            return b.apply(c, arguments), "shift" != a && "splice" != a || 0 !== c.length || delete c[0], 
            L.call(this, c);
        };
    }), y([ "concat", "join", "slice" ], function(a) {
        var b = d[a];
        x.prototype[a] = function() {
            return L.call(this, b.apply(this._wrapped, arguments));
        };
    }), x.extend(x.prototype, {
        chain: function() {
            return this._chain = !0, this;
        },
        value: function() {
            return this._wrapped;
        }
    });
}.call(this), function(a, b) {
    function c(a) {
        return a && "object" == typeof a && a.__wrapped__ ? a : this instanceof c ? (this.__wrapped__ = a, 
        void 0) : new c(a);
    }
    function d(b, c) {
        return a.eval("(function(" + b + "){" + c + "})");
    }
    function e(a, b, c) {
        b || (b = 0);
        var d = a.length, e = d - b >= (c || gb);
        if (e) for (var f = {}, c = b - 1; ++c < d; ) {
            var g = a[c] + "";
            (Ab.call(f, g) ? f[g] : f[g] = []).push(a[c]);
        }
        return function(c) {
            if (e) {
                var d = c + "";
                return Ab.call(f, d) && -1 < P(f[d], c);
            }
            return -1 < P(a, c, b);
        };
    }
    function f(a) {
        return a.charCodeAt(0);
    }
    function g(a, b) {
        var c = a.b, d = b.b, a = a.a, b = b.a;
        if (a !== b) {
            if (a > b || "undefined" == typeof a) return 1;
            if (b > a || "undefined" == typeof b) return -1;
        }
        return d > c ? -1 : 1;
    }
    function h(a, b, c) {
        function d() {
            var h = arguments, i = f ? this : b;
            return e || (a = b[g]), c.length && (h = h.length ? c.concat(o(h)) : c), this instanceof d ? (n.prototype = a.prototype, 
            i = new n(), n.prototype = Y, h = a.apply(i, h), y(h) ? h : i) : a.apply(i, h);
        }
        var e = x(a), f = !c, g = b;
        return f && (c = b), e || (b = a), d;
    }
    function i(a, b) {
        return a ? "function" != typeof a ? function(b) {
            return b[a];
        } : "undefined" != typeof b ? function(c, d, e) {
            return a.call(b, c, d, e);
        } : a : U;
    }
    function j() {
        for (var a, b = {
            b: "",
            c: "",
            e: ab,
            f: Yb,
            g: "",
            h: $b,
            i: ac,
            j: vb,
            k: "",
            l: X
        }, c = 0; a = arguments[c]; c++) for (var e in a) b[e] = a[e];
        if (a = b.a, b.d = /^[^,]+/.exec(a)[0], c = "var i,l=" + b.d + ",t=" + b.d + ";if(!" + b.d + ")return t;" + b.k + ";", 
        b.b ? (c += "var m=l.length;i=-1;if(typeof m=='number'){", b.i && (c += "if(k(l)){l=l.split('')}"), 
        c += "while(++i<m){" + b.b + "}}else {") : b.h && (c += "var m=l.length;i=-1;if(m&&j(l)){while(++i<m){i+='';" + b.g + "}}else {"), 
        b.e || (c += "var u=typeof l=='function'&&s.call(l,'prototype');"), b.f && b.l ? (c += "var q=-1,r=p[typeof l]?n(l):[],m=r.length;while(++q<m){i=r[q];", 
        b.e || (c += "if(!(u&&i=='prototype')){"), c += b.g + "", b.e || (c += "}")) : (c += "for(i in l){", 
        (!b.e || b.l) && (c += "if(", b.e || (c += "!(u&&i=='prototype')"), !b.e && b.l && (c += "&&"), 
        b.l && (c += "h.call(l,i)"), c += "){"), c += b.g + ";", (!b.e || b.l) && (c += "}")), 
        c += "}", b.e) for (c += "var f=l.constructor;", e = 0; 7 > e; e++) c += "i='" + b.j[e] + "';if(", 
        "constructor" == b.j[e] && (c += "!(f&&f.prototype===l)&&"), c += "h.call(l,i)){" + b.g + "}";
        return (b.b || b.h) && (c += "}"), c += b.c + ";return t", d("e,h,j,k,p,n,s", "return function(" + a + "){" + c + "}")(i, Ab, q, A, fc, Ib, Cb);
    }
    function k(a) {
        return "\\" + gc[a];
    }
    function l(a) {
        return nc[a];
    }
    function m(a) {
        return "function" != typeof a.toString && "string" == typeof (a + "");
    }
    function n() {}
    function o(a, b, c) {
        b || (b = 0), "undefined" == typeof c && (c = a ? a.length : 0);
        for (var d = -1, c = c - b || 0, e = Array(0 > c ? 0 : c); ++d < c; ) e[d] = a[b + d];
        return e;
    }
    function p(a) {
        return oc[a];
    }
    function q(a) {
        return Db.call(a) == Mb;
    }
    function r(a) {
        var b = Z;
        if (!a || "object" != typeof a || q(a)) return b;
        var c = a.constructor;
        return !x(c) && (!bc || !m(a)) || c instanceof c ? bb ? (lc(a, function(a, c, d) {
            return b = !Ab.call(d, c), Z;
        }), b === Z) : (lc(a, function(a, c) {
            b = c;
        }), b === Z || Ab.call(a, b)) : b;
    }
    function s(a) {
        var b = [];
        return mc(a, function(a, c) {
            b.push(c);
        }), b;
    }
    function t(a, b, c, d, e) {
        if (a == Y) return a;
        if (c && (b = Z), c = y(a)) {
            var f = Db.call(a);
            if (!dc[f] || bc && m(a)) return a;
            var g = qc(a);
        }
        if (!c || !b) return c ? g ? o(a) : kc({}, a) : a;
        switch (c = ec[f], f) {
          case Ob:
          case Pb:
            return new c(+a);

          case Qb:
          case Tb:
            return new c(a);

          case Sb:
            return c(a.source, nb.exec(a));
        }
        for (d || (d = []), e || (e = []), f = d.length; f--; ) if (d[f] == a) return e[f];
        var h = g ? c(a.length) : {};
        return d.push(a), e.push(h), (g ? tc : mc)(a, function(a, c) {
            h[c] = t(a, b, Y, d, e);
        }), g && (Ab.call(a, "index") && (h.index = a.index), Ab.call(a, "input") && (h.input = a.input)), 
        h;
    }
    function u(a) {
        var b = [];
        return lc(a, function(a, c) {
            x(a) && b.push(c);
        }), b.sort();
    }
    function v(a) {
        var b = {};
        return mc(a, function(a, c) {
            b[a] = c;
        }), b;
    }
    function w(a, b, c, d) {
        if (a === b) return 0 !== a || 1 / a == 1 / b;
        if (a == Y || b == Y) return a === b;
        var e = Db.call(a), f = Db.call(b);
        if (e == Mb && (e = Rb), f == Mb && (f = Rb), e != f) return Z;
        switch (e) {
          case Ob:
          case Pb:
            return +a == +b;

          case Qb:
            return a != +a ? b != +b : 0 == a ? 1 / a == 1 / b : a == +b;

          case Sb:
          case Tb:
            return a == b + "";
        }
        if (f = e == Nb, !f) {
            if (a.__wrapped__ || b.__wrapped__) return w(a.__wrapped__ || a, b.__wrapped__ || b);
            if (e != Rb || bc && (m(a) || m(b))) return Z;
            var e = _b && q(a) ? Object : a.constructor, g = _b && q(b) ? Object : b.constructor;
            if (!(e == g || x(e) && e instanceof e && x(g) && g instanceof g)) return Z;
        }
        for (c || (c = []), d || (d = []), e = c.length; e--; ) if (c[e] == a) return d[e] == b;
        var h = X, i = 0;
        if (c.push(a), d.push(b), f) {
            if (i = a.length, h = i == b.length) for (;i-- && (h = w(a[i], b[i], c, d)); ) ;
            return h;
        }
        return lc(a, function(a, e, f) {
            return Ab.call(f, e) ? (i++, h = Ab.call(b, e) && w(a, b[e], c, d)) : void 0;
        }), h && lc(b, function(a, b, c) {
            return Ab.call(c, b) ? h = -1 < --i : void 0;
        }), h;
    }
    function x(a) {
        return "function" == typeof a;
    }
    function y(a) {
        return a ? fc[typeof a] : Z;
    }
    function z(a) {
        return "number" == typeof a || Db.call(a) == Qb;
    }
    function A(a) {
        return "string" == typeof a || Db.call(a) == Tb;
    }
    function B(a, b, c) {
        var d = arguments, e = 0, f = 2, g = d[3], h = d[4];
        for (c !== fb && (g = [], h = [], "number" != typeof c && (f = d.length)); ++e < f; ) mc(d[e], function(b, c) {
            var d, e, f;
            if (b && ((e = qc(b)) || rc(b))) {
                for (var i = g.length; i-- && !(d = g[i] == b); ) ;
                d ? a[c] = h[i] : (g.push(b), h.push((f = a[c], f = e ? qc(f) ? f : [] : rc(f) ? f : {})), 
                a[c] = B(f, b, fb, g, h));
            } else b != Y && (a[c] = b);
        });
        return a;
    }
    function C(a) {
        var b = [];
        return mc(a, function(a) {
            b.push(a);
        }), b;
    }
    function D(a, b, c) {
        var d = -1, e = a ? a.length : 0, f = Z, c = (0 > c ? Jb(0, e + c) : c) || 0;
        return "number" == typeof e ? f = -1 < (A(a) ? a.indexOf(b, c) : P(a, b, c)) : tc(a, function(a) {
            return ++d >= c ? !(f = a === b) : void 0;
        }), f;
    }
    function E(a, b, c) {
        var d = X, b = i(b, c);
        if (qc(a)) for (var c = -1, e = a.length; ++c < e && (d = !!b(a[c], c, a)); ) ; else tc(a, function(a, c, e) {
            return d = !!b(a, c, e);
        });
        return d;
    }
    function F(a, b, c) {
        var d = [], b = i(b, c);
        if (qc(a)) for (var c = -1, e = a.length; ++c < e; ) {
            var f = a[c];
            b(f, c, a) && d.push(f);
        } else tc(a, function(a, c, e) {
            b(a, c, e) && d.push(a);
        });
        return d;
    }
    function G(a, b, c) {
        var d, b = i(b, c);
        return tc(a, function(a, c, e) {
            return b(a, c, e) ? (d = a, Z) : void 0;
        }), d;
    }
    function H(a, b, c) {
        var d = -1, e = a ? a.length : 0, f = Array("number" == typeof e ? e : 0), b = i(b, c);
        if (qc(a)) for (;++d < e; ) f[d] = b(a[d], d, a); else tc(a, function(a, c, e) {
            f[++d] = b(a, c, e);
        });
        return f;
    }
    function I(a, b, c) {
        var d = -1/0, e = -1, g = a ? a.length : 0, h = d;
        if (b || !qc(a)) b = !b && A(a) ? f : i(b, c), tc(a, function(a, c, e) {
            c = b(a, c, e), c > d && (d = c, h = a);
        }); else for (;++e < g; ) a[e] > h && (h = a[e]);
        return h;
    }
    function J(a, b) {
        return H(a, b + "");
    }
    function K(a, b, c, d) {
        var e = 3 > arguments.length;
        return b || (b = U), tc(a, function(a, f, g) {
            c = e ? (e = Z, a) : b.call(d, c, a, f, g);
        }), c;
    }
    function L(a, b, c, d) {
        var e = a, f = a ? a.length : 0, g = 3 > arguments.length;
        if ("number" != typeof f) var h = sc(a), f = h.length; else ac && A(a) && (e = a.split(""));
        return b || (b = U), tc(a, function(a, i, j) {
            i = h ? h[--f] : --f, c = g ? (g = Z, e[i]) : b.call(d, c, e[i], i, j);
        }), c;
    }
    function M(a, b, c) {
        var d, b = i(b, c);
        if (qc(a)) for (var c = -1, e = a.length; ++c < e && !(d = b(a[c], c, a)); ) ; else tc(a, function(a, c, e) {
            return !(d = b(a, c, e));
        });
        return !!d;
    }
    function N(a, b, c) {
        if (a) {
            var d = a.length;
            return b == Y || c ? a[0] : o(a, 0, Kb(Jb(0, b), d));
        }
    }
    function O(a, b) {
        for (var c = -1, d = a ? a.length : 0, e = []; ++c < d; ) {
            var f = a[c];
            qc(f) ? Bb.apply(e, b ? f : O(f)) : e.push(f);
        }
        return e;
    }
    function P(a, b, c) {
        var d = -1, e = a ? a.length : 0;
        if ("number" == typeof c) d = (0 > c ? Jb(0, e + c) : c || 0) - 1; else if (c) return d = R(a, b), 
        a[d] === b ? d : -1;
        for (;++d < e; ) if (a[d] === b) return d;
        return -1;
    }
    function Q(a, b, c) {
        return o(a, b == Y || c ? 1 : Jb(0, b));
    }
    function R(a, b, c, d) {
        for (var e = 0, f = a ? a.length : e, c = c ? i(c, d) : U, b = c(b); f > e; ) d = e + f >>> 1, 
        c(a[d]) < b ? e = d + 1 : f = d;
        return e;
    }
    function S(a, b, c, d) {
        var e = -1, f = a ? a.length : 0, g = [], h = g;
        "function" == typeof b && (d = c, c = b, b = Z);
        var j = !b && f > 74;
        if (j) var k = {};
        for (c && (h = [], c = i(c, d)); ++e < f; ) {
            var d = a[e], l = c ? c(d, e, a) : d;
            j && (h = Ab.call(k, l + "") ? k[l] : k[l] = []), (b ? !e || h[h.length - 1] !== l : 0 > P(h, l)) && ((c || j) && h.push(l), 
            g.push(d));
        }
        return g;
    }
    function T(a, b) {
        return Xb || Eb && 2 < arguments.length ? Eb.call.apply(Eb, arguments) : h(a, b, o(arguments, 2));
    }
    function U(a) {
        return a;
    }
    function V(a) {
        tc(u(a), function(b) {
            var d = c[b] = a[b];
            c.prototype[b] = function() {
                var a = [ this.__wrapped__ ];
                return Bb.apply(a, arguments), a = d.apply(c, a), new c(a);
            };
        });
    }
    function W() {
        return this.__wrapped__;
    }
    var X = !0, Y = null, Z = !1, $ = "object" == typeof exports && exports, _ = "object" == typeof global && global;
    _.global === _ && (a = _);
    var ab, bb, cb = [], db = new function() {}(), eb = 0, fb = db, gb = 30, hb = a._, ib = /[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/, jb = /&(?:amp|lt|gt|quot|#x27);/g, kb = /\b__p\+='';/g, lb = /\b(__p\+=)''\+/g, mb = /(__e\(.*?\)|\b__t\))\+'';/g, nb = /\w*$/, ob = /(?:__e|__t=)\(\s*(?![\d\s"']|this\.)/g, pb = RegExp("^" + (db.valueOf + "").replace(/[.*+?^=!:${}()|[\]\/\\]/g, "\\$&").replace(/valueOf|for [^\]]+/g, ".+?") + "$"), qb = /\$\{((?:(?=\\?)\\?[\s\S])*?)}/g, rb = /<%=([\s\S]+?)%>/g, sb = /($^)/, tb = /[&<>"']/g, ub = /['\n\r\t\u2028\u2029\\]/g, vb = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "), wb = Math.ceil, xb = cb.concat, yb = Math.floor, zb = pb.test(zb = Object.getPrototypeOf) && zb, Ab = db.hasOwnProperty, Bb = cb.push, Cb = db.propertyIsEnumerable, Db = db.toString, Eb = pb.test(Eb = o.bind) && Eb, Fb = pb.test(Fb = Array.isArray) && Fb, Gb = a.isFinite, Hb = a.isNaN, Ib = pb.test(Ib = Object.keys) && Ib, Jb = Math.max, Kb = Math.min, Lb = Math.random, Mb = "[object Arguments]", Nb = "[object Array]", Ob = "[object Boolean]", Pb = "[object Date]", Qb = "[object Number]", Rb = "[object Object]", Sb = "[object RegExp]", Tb = "[object String]", Ub = !/1/.test(Function("1")), Vb = !!a.attachEvent, Wb = Eb && !/\n|true/.test(Eb + Vb), Xb = Eb && !Wb, Yb = Ib && (Vb || Wb), Zb = (Zb = {
        0: 1,
        length: 1
    }, cb.splice.call(Zb, 0, 1), Zb[0]), $b = X;
    (function() {
        function a() {
            this.x = 1;
        }
        var b = [];
        a.prototype = {
            valueOf: 1,
            y: 1
        };
        for (var c in new a()) b.push(c);
        for (c in arguments) $b = !c;
        ab = !/valueOf/.test(b), bb = "x" != b[0];
    })(1);
    var _b = !q(arguments), ac = "xx" != "x"[0] + Object("x")[0];
    try {
        var bc = Db.call(document) == Rb;
    } catch (cc) {}
    var dc = {
        "[object Function]": Z
    };
    dc[Mb] = dc[Nb] = dc[Ob] = dc[Pb] = dc[Qb] = dc[Rb] = dc[Sb] = dc[Tb] = X;
    var ec = {};
    ec[Nb] = Array, ec[Ob] = Boolean, ec[Pb] = Date, ec[Rb] = Object, ec[Qb] = Number, 
    ec[Sb] = RegExp, ec[Tb] = String;
    var fc = {
        "boolean": Z,
        "function": X,
        object: X,
        number: Z,
        string: Z,
        undefined: Z
    }, gc = {
        "\\": "\\",
        "'": "'",
        "\n": "n",
        "\r": "r",
        "	": "t",
        "\u2028": "u2028",
        "\u2029": "u2029"
    };
    c.templateSettings = {
        escape: /<%-([\s\S]+?)%>/g,
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: rb,
        variable: ""
    }, (Vb || Wb || !Ub) && (d = Function);
    var hc = {
        a: "o,v,g",
        k: "for(var a=1,b=typeof g=='number'?2:arguments.length;a<b;a++){if((l=arguments[a])){",
        g: "t[i]=l[i]",
        c: "}}"
    }, ic = {
        a: "d,c,w",
        k: "c=c&&typeof w=='undefined'?c:e(c,w)",
        b: "if(c(l[i],i,d)===false)return t",
        g: "if(c(l[i],i,d)===false)return t"
    }, jc = {
        b: Y
    }, kc = j(hc);
    _b && (q = function(a) {
        return a ? Ab.call(a, "callee") : Z;
    });
    var lc = j(ic, jc, {
        l: Z
    }), mc = j(ic, jc), nc = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#x27;"
    }, oc = v(nc), pc = j(hc, {
        g: "if(t[i]==null)" + hc.g
    }), qc = Fb || function(a) {
        return Db.call(a) == Nb;
    };
    x(/x/) && (x = function(a) {
        return "[object Function]" == Db.call(a);
    });
    var rc = zb ? function(a) {
        if (!a || "object" != typeof a) return Z;
        var b = a.valueOf, c = "function" == typeof b && (c = zb(b)) && zb(c);
        return c ? a == c || zb(a) == c && !q(a) : r(a);
    } : r, sc = Ib ? function(a) {
        return "function" == typeof a && Cb.call(a, "prototype") ? s(a) : y(a) ? Ib(a) : [];
    } : s, tc = j(ic);
    c.assign = kc, c.bindAll = function(a) {
        for (var b = arguments, c = 1 < b.length ? 0 : (b = u(a), -1), d = b.length; ++c < d; ) {
            var e = b[c];
            a[e] = T(a[e], a);
        }
        return a;
    }, c.chain = function(a) {
        return new c(a);
    }, c.compact = function(a) {
        for (var b = -1, c = a ? a.length : 0, d = []; ++b < c; ) {
            var e = a[b];
            e && d.push(e);
        }
        return d;
    }, c.countBy = function(a, b, c) {
        var d = {}, b = i(b, c);
        return tc(a, function(a, c, e) {
            c = b(a, c, e), Ab.call(d, c) ? d[c]++ : d[c] = 1;
        }), d;
    }, c.defaults = pc, c.difference = function(a) {
        for (var b = -1, c = a ? a.length : 0, d = xb.apply(cb, arguments), d = e(d, c), f = []; ++b < c; ) {
            var g = a[b];
            d(g) || f.push(g);
        }
        return f;
    }, c.filter = F, c.flatten = O, c.forEach = tc, c.forIn = lc, c.forOwn = mc, c.functions = u, 
    c.groupBy = function(a, b, c) {
        var d = {}, b = i(b, c);
        return tc(a, function(a, c, e) {
            c = b(a, c, e), (Ab.call(d, c) ? d[c] : d[c] = []).push(a);
        }), d;
    }, c.initial = function(a, b, c) {
        if (!a) return [];
        var d = a.length;
        return o(a, 0, Kb(Jb(0, d - (b == Y || c ? 1 : b || 0)), d));
    }, c.intersection = function(a) {
        var b = arguments, c = b.length, d = {}, f = [];
        return tc(a, function(a) {
            if (0 > P(f, a)) {
                for (var g = c; --g; ) if (!(d[g] || (d[g] = e(b[g])))(a)) return;
                f.push(a);
            }
        }), f;
    }, c.invert = v, c.invoke = function(a, b) {
        var c = o(arguments, 2), d = "function" == typeof b, e = [];
        return tc(a, function(a) {
            e.push((d ? b : a[b]).apply(a, c));
        }), e;
    }, c.keys = sc, c.map = H, c.max = I, c.merge = B, c.min = function(a, b, c) {
        var d = 1/0, e = -1, g = a ? a.length : 0, h = d;
        if (b || !qc(a)) b = !b && A(a) ? f : i(b, c), tc(a, function(a, c, e) {
            c = b(a, c, e), d > c && (d = c, h = a);
        }); else for (;++e < g; ) a[e] < h && (h = a[e]);
        return h;
    }, c.object = function(a, b) {
        for (var c = -1, d = a ? a.length : 0, e = {}; ++c < d; ) {
            var f = a[c];
            b ? e[f] = b[c] : e[f[0]] = f[1];
        }
        return e;
    }, c.omit = function(a, b, c) {
        var d = "function" == typeof b, e = {};
        if (d) b = i(b, c); else var f = xb.apply(cb, arguments);
        return lc(a, function(a, c, g) {
            (d ? !b(a, c, g) : 0 > P(f, c, 1)) && (e[c] = a);
        }), e;
    }, c.pairs = function(a) {
        var b = [];
        return mc(a, function(a, c) {
            b.push([ c, a ]);
        }), b;
    }, c.pick = function(a, b, c) {
        var d = {};
        if ("function" != typeof b) for (var e = 0, f = xb.apply(cb, arguments), g = f.length; ++e < g; ) {
            var h = f[e];
            h in a && (d[h] = a[h]);
        } else b = i(b, c), lc(a, function(a, c, e) {
            b(a, c, e) && (d[c] = a);
        });
        return d;
    }, c.pluck = J, c.range = function(a, b, c) {
        a = +a || 0, c = +c || 1, b == Y && (b = a, a = 0);
        for (var d = -1, b = Jb(0, wb((b - a) / c)), e = Array(b); ++d < b; ) e[d] = a, 
        a += c;
        return e;
    }, c.reject = function(a, b, c) {
        return b = i(b, c), F(a, function(a, c, d) {
            return !b(a, c, d);
        });
    }, c.rest = Q, c.shuffle = function(a) {
        var b = -1, c = Array(a ? a.length : 0);
        return tc(a, function(a) {
            var d = yb(Lb() * (++b + 1));
            c[b] = c[d], c[d] = a;
        }), c;
    }, c.sortBy = function(a, b, c) {
        var d = [], b = i(b, c);
        for (tc(a, function(a, c, e) {
            d.push({
                a: b(a, c, e),
                b: c,
                c: a
            });
        }), a = d.length, d.sort(g); a--; ) d[a] = d[a].c;
        return d;
    }, c.tap = function(a, b) {
        return b(a), a;
    }, c.times = function(a, b, c) {
        for (var a = +a || 0, d = -1, e = Array(a); ++d < a; ) e[d] = b.call(c, d);
        return e;
    }, c.toArray = function(a) {
        return "number" == typeof (a ? a.length : 0) ? ac && A(a) ? a.split("") : o(a) : C(a);
    }, c.union = function() {
        return S(xb.apply(cb, arguments));
    }, c.uniq = S, c.values = C, c.where = function(a, b) {
        var c = sc(b);
        return F(a, function(a) {
            for (var d = c.length; d--; ) {
                var e = a[c[d]] === b[c[d]];
                if (!e) break;
            }
            return !!e;
        });
    }, c.without = function(a) {
        for (var b = -1, c = a ? a.length : 0, d = e(arguments, 1, 20), f = []; ++b < c; ) {
            var g = a[b];
            d(g) || f.push(g);
        }
        return f;
    }, c.zip = function(a) {
        for (var b = -1, c = a ? I(J(arguments, "length")) : 0, d = Array(c); ++b < c; ) d[b] = J(arguments, b);
        return d;
    }, c.collect = H, c.drop = Q, c.each = tc, c.extend = kc, c.methods = u, c.select = F, 
    c.tail = Q, c.unique = S, V(c), c.after = function(a, b) {
        return 1 > a ? b() : function() {
            return 1 > --a ? b.apply(this, arguments) : void 0;
        };
    }, c.bind = T, c.bindKey = function(a, b) {
        return h(a, b, o(arguments, 2));
    }, c.clone = t, c.compose = function() {
        var a = arguments;
        return function() {
            for (var b = arguments, c = a.length; c--; ) b = [ a[c].apply(this, b) ];
            return b[0];
        };
    }, c.contains = D, c.debounce = function(a, b, c) {
        function d() {
            h = Y, c || (f = a.apply(g, e));
        }
        var e, f, g, h;
        return function() {
            var i = c && !h;
            return e = arguments, g = this, clearTimeout(h), h = setTimeout(d, b), i && (f = a.apply(g, e)), 
            f;
        };
    }, c.defer = function(a) {
        var c = o(arguments, 1);
        return setTimeout(function() {
            a.apply(b, c);
        }, 1);
    }, c.delay = function(a, c) {
        var d = o(arguments, 2);
        return setTimeout(function() {
            a.apply(b, d);
        }, c);
    }, c.escape = function(a) {
        return a == Y ? "" : (a + "").replace(tb, l);
    }, c.every = E, c.find = G, c.has = function(a, b) {
        return a ? Ab.call(a, b) : Z;
    }, c.identity = U, c.indexOf = P, c.isArguments = q, c.isArray = qc, c.isBoolean = function(a) {
        return a === X || a === Z || Db.call(a) == Ob;
    }, c.isDate = function(a) {
        return Db.call(a) == Pb;
    }, c.isElement = function(a) {
        return a ? 1 === a.nodeType : Z;
    }, c.isEmpty = function(a) {
        var b = X;
        if (!a) return b;
        var c = Db.call(a), d = a.length;
        return c == Nb || c == Tb || c == Mb || _b && q(a) || c == Rb && "number" == typeof d && x(a.splice) ? !d : (mc(a, function() {
            return b = Z;
        }), b);
    }, c.isEqual = w, c.isFinite = function(a) {
        return Gb(a) && !Hb(parseFloat(a));
    }, c.isFunction = x, c.isNaN = function(a) {
        return z(a) && a != +a;
    }, c.isNull = function(a) {
        return a === Y;
    }, c.isNumber = z, c.isObject = y, c.isPlainObject = rc, c.isRegExp = function(a) {
        return Db.call(a) == Sb;
    }, c.isString = A, c.isUndefined = function(a) {
        return "undefined" == typeof a;
    }, c.lastIndexOf = function(a, b, c) {
        var d = a ? a.length : 0;
        for ("number" == typeof c && (d = (0 > c ? Jb(0, d + c) : Kb(c, d - 1)) + 1); d--; ) if (a[d] === b) return d;
        return -1;
    }, c.memoize = function(a, b) {
        var c = {};
        return function() {
            var d = b ? b.apply(this, arguments) : arguments[0];
            return Ab.call(c, d) ? c[d] : c[d] = a.apply(this, arguments);
        };
    }, c.mixin = V, c.noConflict = function() {
        return a._ = hb, this;
    }, c.once = function(a) {
        var b, c = Z;
        return function() {
            return c ? b : (c = X, b = a.apply(this, arguments), a = Y, b);
        };
    }, c.partial = function(a) {
        return h(a, o(arguments, 1));
    }, c.random = function(a, b) {
        return a == Y && b == Y && (b = 1), a = +a || 0, b == Y && (b = a, a = 0), a + yb(Lb() * ((+b || 0) - a + 1));
    }, c.reduce = K, c.reduceRight = L, c.result = function(a, b) {
        var c = a ? a[b] : Y;
        return x(c) ? a[b]() : c;
    }, c.size = function(a) {
        var b = a ? a.length : 0;
        return "number" == typeof b ? b : sc(a).length;
    }, c.some = M, c.sortedIndex = R, c.template = function(a, b, e) {
        a || (a = ""), e || (e = {});
        var f, g, h = c.templateSettings, i = 0, j = e.interpolate || h.interpolate || sb, l = "__p+='", m = e.variable || h.variable, n = m;
        a.replace(RegExp((e.escape || h.escape || sb).source + "|" + j.source + "|" + (j === rb ? qb : sb).source + "|" + (e.evaluate || h.evaluate || sb).source + "|$", "g"), function(b, c, d, e, g, h) {
            return d || (d = e), l += a.slice(i, h).replace(ub, k), c && (l += "'+__e(" + c + ")+'"), 
            g && (l += "';" + g + ";__p+='"), d && (l += "'+((__t=(" + d + "))==null?'':__t)+'"), 
            f || (f = g || ib.test(c || d)), i = h + b.length, b;
        }), l += "';\n", n || (m = "obj", f ? l = "with(" + m + "){" + l + "}" : (e = RegExp("(\\(\\s*)" + m + "\\." + m + "\\b", "g"), 
        l = l.replace(ob, "$&" + m + ".").replace(e, "$1__d"))), l = (f ? l.replace(kb, "") : l).replace(lb, "$1").replace(mb, "$1;"), 
        l = "function(" + m + "){" + (n ? "" : m + "||(" + m + "={});") + "var __t,__p='',__e=_.escape" + (f ? ",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}" : (n ? "" : ",__d=" + m + "." + m + "||" + m) + ";") + l + "return __p}";
        try {
            g = d("_", "return " + l)(c);
        } catch (o) {
            throw o.source = l, o;
        }
        return b ? g(b) : (g.source = l, g);
    }, c.throttle = function(a, b) {
        function c() {
            h = new Date(), g = Y, e = a.apply(f, d);
        }
        var d, e, f, g, h = 0;
        return function() {
            var i = new Date(), j = b - (i - h);
            return d = arguments, f = this, 0 >= j ? (clearTimeout(g), g = Y, h = i, e = a.apply(f, d)) : g || (g = setTimeout(c, j)), 
            e;
        };
    }, c.unescape = function(a) {
        return a == Y ? "" : (a + "").replace(jb, p);
    }, c.uniqueId = function(a) {
        return (a == Y ? "" : a + "") + ++eb;
    }, c.wrap = function(a, b) {
        return function() {
            var c = [ a ];
            return Bb.apply(c, arguments), b.apply(this, c);
        };
    }, c.all = E, c.any = M, c.detect = G, c.foldl = K, c.foldr = L, c.include = D, 
    c.inject = K, mc(c, function(a, b) {
        c.prototype[b] || (c.prototype[b] = function() {
            var b = [ this.__wrapped__ ];
            return Bb.apply(b, arguments), a.apply(c, b);
        });
    }), c.first = N, c.last = function(a, b, c) {
        if (a) {
            var d = a.length;
            return b == Y || c ? a[d - 1] : o(a, Jb(0, d - b));
        }
    }, c.take = N, c.head = N, mc(c, function(a, b) {
        c.prototype[b] || (c.prototype[b] = function(b, d) {
            var e = a(this.__wrapped__, b, d);
            return b == Y || d ? e : new c(e);
        });
    }), c.VERSION = "1.0.0-rc.2", c.prototype.chain = function() {
        return this;
    }, c.prototype.toString = function() {
        return "" + this.__wrapped__;
    }, c.prototype.value = W, c.prototype.valueOf = W, tc("pop push reverse shift sort splice unshift".split(" "), function(a) {
        var b = cb[a];
        c.prototype[a] = function() {
            var a = this.__wrapped__;
            return b.apply(a, arguments), Zb && 0 === a.length && delete a[0], this;
        };
    }), tc([ "concat", "join", "slice" ], function(a) {
        var b = cb[a];
        c.prototype[a] = function() {
            var a = b.apply(this.__wrapped__, arguments);
            return new c(a);
        };
    }), "function" == typeof define && "object" == typeof define.amd && define.amd ? (a._ = c, 
    define(function() {
        return c;
    })) : $ ? "object" == typeof module && module && module.exports == $ ? (module.exports = c)._ = c : $._ = c : a._ = c;
}(this), function() {
    var a, b = this, c = b.Backbone, d = [], e = d.push, f = d.slice, g = d.splice;
    a = "undefined" != typeof exports ? exports : b.Backbone = {}, a.VERSION = "1.0.0";
    var h = b._;
    h || "undefined" == typeof require || (h = require("underscore")), a.$ = b.jQuery || b.Zepto || b.ender || b.$, 
    a.noConflict = function() {
        return b.Backbone = c, this;
    }, a.emulateHTTP = !1, a.emulateJSON = !1;
    var i = a.Events = {
        on: function(a, b, c) {
            if (!k(this, "on", a, [ b, c ]) || !b) return this;
            this._events || (this._events = {});
            var d = this._events[a] || (this._events[a] = []);
            return d.push({
                callback: b,
                context: c,
                ctx: c || this
            }), this;
        },
        once: function(a, b, c) {
            if (!k(this, "once", a, [ b, c ]) || !b) return this;
            var d = this, e = h.once(function() {
                d.off(a, e), b.apply(this, arguments);
            });
            return e._callback = b, this.on(a, e, c);
        },
        off: function(a, b, c) {
            var d, e, f, g, i, j, l, m;
            if (!this._events || !k(this, "off", a, [ b, c ])) return this;
            if (!a && !b && !c) return this._events = {}, this;
            for (g = a ? [ a ] : h.keys(this._events), i = 0, j = g.length; j > i; i++) if (a = g[i], 
            f = this._events[a]) {
                if (this._events[a] = d = [], b || c) for (l = 0, m = f.length; m > l; l++) e = f[l], 
                (b && b !== e.callback && b !== e.callback._callback || c && c !== e.context) && d.push(e);
                d.length || delete this._events[a];
            }
            return this;
        },
        trigger: function(a) {
            if (!this._events) return this;
            var b = f.call(arguments, 1);
            if (!k(this, "trigger", a, b)) return this;
            var c = this._events[a], d = this._events.all;
            return c && l(c, b), d && l(d, arguments), this;
        },
        stopListening: function(a, b, c) {
            var d = this._listeners;
            if (!d) return this;
            var e = !b && !c;
            "object" == typeof b && (c = this), a && ((d = {})[a._listenerId] = a);
            for (var f in d) d[f].off(b, c, this), e && delete this._listeners[f];
            return this;
        }
    }, j = /\s+/, k = function(a, b, c, d) {
        if (!c) return !0;
        if ("object" == typeof c) {
            for (var e in c) a[b].apply(a, [ e, c[e] ].concat(d));
            return !1;
        }
        if (j.test(c)) {
            for (var f = c.split(j), g = 0, h = f.length; h > g; g++) a[b].apply(a, [ f[g] ].concat(d));
            return !1;
        }
        return !0;
    }, l = function(a, b) {
        var c, d = -1, e = a.length, f = b[0], g = b[1], h = b[2];
        switch (b.length) {
          case 0:
            for (;++d < e; ) (c = a[d]).callback.call(c.ctx);
            return;

          case 1:
            for (;++d < e; ) (c = a[d]).callback.call(c.ctx, f);
            return;

          case 2:
            for (;++d < e; ) (c = a[d]).callback.call(c.ctx, f, g);
            return;

          case 3:
            for (;++d < e; ) (c = a[d]).callback.call(c.ctx, f, g, h);
            return;

          default:
            for (;++d < e; ) (c = a[d]).callback.apply(c.ctx, b);
        }
    }, m = {
        listenTo: "on",
        listenToOnce: "once"
    };
    h.each(m, function(a, b) {
        i[b] = function(b, c, d) {
            var e = this._listeners || (this._listeners = {}), f = b._listenerId || (b._listenerId = h.uniqueId("l"));
            return e[f] = b, "object" == typeof c && (d = this), b[a](c, d, this), this;
        };
    }), i.bind = i.on, i.unbind = i.off, h.extend(a, i);
    var n = a.Model = function(a, b) {
        var c, d = a || {};
        b || (b = {}), this.cid = h.uniqueId("c"), this.attributes = {}, h.extend(this, h.pick(b, o)), 
        b.parse && (d = this.parse(d, b) || {}), (c = h.result(this, "defaults")) && (d = h.defaults({}, d, c)), 
        this.set(d, b), this.changed = {}, this.initialize.apply(this, arguments);
    }, o = [ "url", "urlRoot", "collection" ];
    h.extend(n.prototype, i, {
        changed: null,
        validationError: null,
        idAttribute: "id",
        initialize: function() {},
        toJSON: function() {
            return h.clone(this.attributes);
        },
        sync: function() {
            return a.sync.apply(this, arguments);
        },
        get: function(a) {
            return this.attributes[a];
        },
        escape: function(a) {
            return h.escape(this.get(a));
        },
        has: function(a) {
            return null != this.get(a);
        },
        set: function(a, b, c) {
            var d, e, f, g, i, j, k, l;
            if (null == a) return this;
            if ("object" == typeof a ? (e = a, c = b) : (e = {})[a] = b, c || (c = {}), !this._validate(e, c)) return !1;
            f = c.unset, i = c.silent, g = [], j = this._changing, this._changing = !0, j || (this._previousAttributes = h.clone(this.attributes), 
            this.changed = {}), l = this.attributes, k = this._previousAttributes, this.idAttribute in e && (this.id = e[this.idAttribute]);
            for (d in e) b = e[d], h.isEqual(l[d], b) || g.push(d), h.isEqual(k[d], b) ? delete this.changed[d] : this.changed[d] = b, 
            f ? delete l[d] : l[d] = b;
            if (!i) {
                g.length && (this._pending = !0);
                for (var m = 0, n = g.length; n > m; m++) this.trigger("change:" + g[m], this, l[g[m]], c);
            }
            if (j) return this;
            if (!i) for (;this._pending; ) this._pending = !1, this.trigger("change", this, c);
            return this._pending = !1, this._changing = !1, this;
        },
        unset: function(a, b) {
            return this.set(a, void 0, h.extend({}, b, {
                unset: !0
            }));
        },
        clear: function(a) {
            var b = {};
            for (var c in this.attributes) b[c] = void 0;
            return this.set(b, h.extend({}, a, {
                unset: !0
            }));
        },
        hasChanged: function(a) {
            return null == a ? !h.isEmpty(this.changed) : h.has(this.changed, a);
        },
        changedAttributes: function(a) {
            if (!a) return this.hasChanged() ? h.clone(this.changed) : !1;
            var b, c = !1, d = this._changing ? this._previousAttributes : this.attributes;
            for (var e in a) h.isEqual(d[e], b = a[e]) || ((c || (c = {}))[e] = b);
            return c;
        },
        previous: function(a) {
            return null != a && this._previousAttributes ? this._previousAttributes[a] : null;
        },
        previousAttributes: function() {
            return h.clone(this._previousAttributes);
        },
        fetch: function(a) {
            a = a ? h.clone(a) : {}, void 0 === a.parse && (a.parse = !0);
            var b = this, c = a.success;
            return a.success = function(d) {
                return b.set(b.parse(d, a), a) ? (c && c(b, d, a), b.trigger("sync", b, d, a), void 0) : !1;
            }, L(this, a), this.sync("read", this, a);
        },
        save: function(a, b, c) {
            var d, e, f, g = this.attributes;
            if (null == a || "object" == typeof a ? (d = a, c = b) : (d = {})[a] = b, !(!d || c && c.wait || this.set(d, c))) return !1;
            if (c = h.extend({
                validate: !0
            }, c), !this._validate(d, c)) return !1;
            d && c.wait && (this.attributes = h.extend({}, g, d)), void 0 === c.parse && (c.parse = !0);
            var i = this, j = c.success;
            return c.success = function(a) {
                i.attributes = g;
                var b = i.parse(a, c);
                return c.wait && (b = h.extend(d || {}, b)), h.isObject(b) && !i.set(b, c) ? !1 : (j && j(i, a, c), 
                i.trigger("sync", i, a, c), void 0);
            }, L(this, c), e = this.isNew() ? "create" : c.patch ? "patch" : "update", "patch" === e && (c.attrs = d), 
            f = this.sync(e, this, c), d && c.wait && (this.attributes = g), f;
        },
        destroy: function(a) {
            a = a ? h.clone(a) : {};
            var b = this, c = a.success, d = function() {
                b.trigger("destroy", b, b.collection, a);
            };
            if (a.success = function(e) {
                (a.wait || b.isNew()) && d(), c && c(b, e, a), b.isNew() || b.trigger("sync", b, e, a);
            }, this.isNew()) return a.success(), !1;
            L(this, a);
            var e = this.sync("delete", this, a);
            return a.wait || d(), e;
        },
        url: function() {
            var a = h.result(this, "urlRoot") || h.result(this.collection, "url") || K();
            return this.isNew() ? a : a + ("/" === a.charAt(a.length - 1) ? "" : "/") + encodeURIComponent(this.id);
        },
        parse: function(a) {
            return a;
        },
        clone: function() {
            return new this.constructor(this.attributes);
        },
        isNew: function() {
            return null == this.id;
        },
        isValid: function(a) {
            return this._validate({}, h.extend(a || {}, {
                validate: !0
            }));
        },
        _validate: function(a, b) {
            if (!b.validate || !this.validate) return !0;
            a = h.extend({}, this.attributes, a);
            var c = this.validationError = this.validate(a, b) || null;
            return c ? (this.trigger("invalid", this, c, h.extend(b || {}, {
                validationError: c
            })), !1) : !0;
        }
    });
    var p = [ "keys", "values", "pairs", "invert", "pick", "omit" ];
    h.each(p, function(a) {
        n.prototype[a] = function() {
            var b = f.call(arguments);
            return b.unshift(this.attributes), h[a].apply(h, b);
        };
    });
    var q = a.Collection = function(a, b) {
        b || (b = {}), b.url && (this.url = b.url), b.model && (this.model = b.model), void 0 !== b.comparator && (this.comparator = b.comparator), 
        this._reset(), this.initialize.apply(this, arguments), a && this.reset(a, h.extend({
            silent: !0
        }, b));
    }, r = {
        add: !0,
        remove: !0,
        merge: !0
    }, s = {
        add: !0,
        merge: !1,
        remove: !1
    };
    h.extend(q.prototype, i, {
        model: n,
        initialize: function() {},
        toJSON: function(a) {
            return this.map(function(b) {
                return b.toJSON(a);
            });
        },
        sync: function() {
            return a.sync.apply(this, arguments);
        },
        add: function(a, b) {
            return this.set(a, h.defaults(b || {}, s));
        },
        remove: function(a, b) {
            a = h.isArray(a) ? a.slice() : [ a ], b || (b = {});
            var c, d, e, f;
            for (c = 0, d = a.length; d > c; c++) f = this.get(a[c]), f && (delete this._byId[f.id], 
            delete this._byId[f.cid], e = this.indexOf(f), this.models.splice(e, 1), this.length--, 
            b.silent || (b.index = e, f.trigger("remove", f, this, b)), this._removeReference(f));
            return this;
        },
        set: function(a, b) {
            b = h.defaults(b || {}, r), b.parse && (a = this.parse(a, b)), h.isArray(a) || (a = a ? [ a ] : []);
            var c, d, f, i, j, k = b.at, l = this.comparator && null == k && b.sort !== !1, m = h.isString(this.comparator) ? this.comparator : null, n = [], o = [], p = {};
            for (c = 0, d = a.length; d > c; c++) (f = this._prepareModel(a[c], b)) && ((i = this.get(f)) ? (b.remove && (p[i.cid] = !0), 
            b.merge && (i.set(f.attributes, b), l && !j && i.hasChanged(m) && (j = !0))) : b.add && (n.push(f), 
            f.on("all", this._onModelEvent, this), this._byId[f.cid] = f, null != f.id && (this._byId[f.id] = f)));
            if (b.remove) {
                for (c = 0, d = this.length; d > c; ++c) p[(f = this.models[c]).cid] || o.push(f);
                o.length && this.remove(o, b);
            }
            if (n.length && (l && (j = !0), this.length += n.length, null != k ? g.apply(this.models, [ k, 0 ].concat(n)) : e.apply(this.models, n)), 
            j && this.sort({
                silent: !0
            }), b.silent) return this;
            for (c = 0, d = n.length; d > c; c++) (f = n[c]).trigger("add", f, this, b);
            return j && this.trigger("sort", this, b), this;
        },
        reset: function(a, b) {
            b || (b = {});
            for (var c = 0, d = this.models.length; d > c; c++) this._removeReference(this.models[c]);
            return b.previousModels = this.models, this._reset(), this.add(a, h.extend({
                silent: !0
            }, b)), b.silent || this.trigger("reset", this, b), this;
        },
        push: function(a, b) {
            return a = this._prepareModel(a, b), this.add(a, h.extend({
                at: this.length
            }, b)), a;
        },
        pop: function(a) {
            var b = this.at(this.length - 1);
            return this.remove(b, a), b;
        },
        unshift: function(a, b) {
            return a = this._prepareModel(a, b), this.add(a, h.extend({
                at: 0
            }, b)), a;
        },
        shift: function(a) {
            var b = this.at(0);
            return this.remove(b, a), b;
        },
        slice: function(a, b) {
            return this.models.slice(a, b);
        },
        get: function(a) {
            return null == a ? void 0 : this._byId[null != a.id ? a.id : a.cid || a];
        },
        at: function(a) {
            return this.models[a];
        },
        where: function(a, b) {
            return h.isEmpty(a) ? b ? void 0 : [] : this[b ? "find" : "filter"](function(b) {
                for (var c in a) if (a[c] !== b.get(c)) return !1;
                return !0;
            });
        },
        findWhere: function(a) {
            return this.where(a, !0);
        },
        sort: function(a) {
            if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
            return a || (a = {}), h.isString(this.comparator) || 1 === this.comparator.length ? this.models = this.sortBy(this.comparator, this) : this.models.sort(h.bind(this.comparator, this)), 
            a.silent || this.trigger("sort", this, a), this;
        },
        sortedIndex: function(a, b, c) {
            b || (b = this.comparator);
            var d = h.isFunction(b) ? b : function(a) {
                return a.get(b);
            };
            return h.sortedIndex(this.models, a, d, c);
        },
        pluck: function(a) {
            return h.invoke(this.models, "get", a);
        },
        fetch: function(a) {
            a = a ? h.clone(a) : {}, void 0 === a.parse && (a.parse = !0);
            var b = a.success, c = this;
            return a.success = function(d) {
                var e = a.reset ? "reset" : "set";
                c[e](d, a), b && b(c, d, a), c.trigger("sync", c, d, a);
            }, L(this, a), this.sync("read", this, a);
        },
        create: function(a, b) {
            if (b = b ? h.clone(b) : {}, !(a = this._prepareModel(a, b))) return !1;
            b.wait || this.add(a, b);
            var c = this, d = b.success;
            return b.success = function(e) {
                b.wait && c.add(a, b), d && d(a, e, b);
            }, a.save(null, b), a;
        },
        parse: function(a) {
            return a;
        },
        clone: function() {
            return new this.constructor(this.models);
        },
        _reset: function() {
            this.length = 0, this.models = [], this._byId = {};
        },
        _prepareModel: function(a, b) {
            if (a instanceof n) return a.collection || (a.collection = this), a;
            b || (b = {}), b.collection = this;
            var c = new this.model(a, b);
            return c._validate(a, b) ? c : (this.trigger("invalid", this, a, b), !1);
        },
        _removeReference: function(a) {
            this === a.collection && delete a.collection, a.off("all", this._onModelEvent, this);
        },
        _onModelEvent: function(a, b, c, d) {
            ("add" !== a && "remove" !== a || c === this) && ("destroy" === a && this.remove(b, d), 
            b && a === "change:" + b.idAttribute && (delete this._byId[b.previous(b.idAttribute)], 
            null != b.id && (this._byId[b.id] = b)), this.trigger.apply(this, arguments));
        }
    });
    var t = [ "forEach", "each", "map", "collect", "reduce", "foldl", "inject", "reduceRight", "foldr", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "toArray", "size", "first", "head", "take", "initial", "rest", "tail", "drop", "last", "without", "indexOf", "shuffle", "lastIndexOf", "isEmpty", "chain" ];
    h.each(t, function(a) {
        q.prototype[a] = function() {
            var b = f.call(arguments);
            return b.unshift(this.models), h[a].apply(h, b);
        };
    });
    var u = [ "groupBy", "countBy", "sortBy" ];
    h.each(u, function(a) {
        q.prototype[a] = function(b, c) {
            var d = h.isFunction(b) ? b : function(a) {
                return a.get(b);
            };
            return h[a](this.models, d, c);
        };
    });
    var v = a.View = function(a) {
        this.cid = h.uniqueId("view"), this._configure(a || {}), this._ensureElement(), 
        this.initialize.apply(this, arguments), this.delegateEvents();
    }, w = /^(\S+)\s*(.*)$/, x = [ "model", "collection", "el", "id", "attributes", "className", "tagName", "events" ];
    h.extend(v.prototype, i, {
        tagName: "div",
        $: function(a) {
            return this.$el.find(a);
        },
        initialize: function() {},
        render: function() {
            return this;
        },
        remove: function() {
            return this.$el.remove(), this.stopListening(), this;
        },
        setElement: function(b, c) {
            return this.$el && this.undelegateEvents(), this.$el = b instanceof a.$ ? b : a.$(b), 
            this.el = this.$el[0], c !== !1 && this.delegateEvents(), this;
        },
        delegateEvents: function(a) {
            if (!a && !(a = h.result(this, "events"))) return this;
            this.undelegateEvents();
            for (var b in a) {
                var c = a[b];
                if (h.isFunction(c) || (c = this[a[b]]), c) {
                    var d = b.match(w), e = d[1], f = d[2];
                    c = h.bind(c, this), e += ".delegateEvents" + this.cid, "" === f ? this.$el.on(e, c) : this.$el.on(e, f, c);
                }
            }
            return this;
        },
        undelegateEvents: function() {
            return this.$el.off(".delegateEvents" + this.cid), this;
        },
        _configure: function(a) {
            this.options && (a = h.extend({}, h.result(this, "options"), a)), h.extend(this, h.pick(a, x)), 
            this.options = a;
        },
        _ensureElement: function() {
            if (this.el) this.setElement(h.result(this, "el"), !1); else {
                var b = h.extend({}, h.result(this, "attributes"));
                this.id && (b.id = h.result(this, "id")), this.className && (b["class"] = h.result(this, "className"));
                var c = a.$("<" + h.result(this, "tagName") + ">").attr(b);
                this.setElement(c, !1);
            }
        }
    }), a.sync = function(b, c, d) {
        var e = y[b];
        h.defaults(d || (d = {}), {
            emulateHTTP: a.emulateHTTP,
            emulateJSON: a.emulateJSON
        });
        var f = {
            type: e,
            dataType: "json"
        };
        if (d.url || (f.url = h.result(c, "url") || K()), null != d.data || !c || "create" !== b && "update" !== b && "patch" !== b || (f.contentType = "application/json", 
        f.data = JSON.stringify(d.attrs || c.toJSON(d))), d.emulateJSON && (f.contentType = "application/x-www-form-urlencoded", 
        f.data = f.data ? {
            model: f.data
        } : {}), d.emulateHTTP && ("PUT" === e || "DELETE" === e || "PATCH" === e)) {
            f.type = "POST", d.emulateJSON && (f.data._method = e);
            var g = d.beforeSend;
            d.beforeSend = function(a) {
                return a.setRequestHeader("X-HTTP-Method-Override", e), g ? g.apply(this, arguments) : void 0;
            };
        }
        "GET" === f.type || d.emulateJSON || (f.processData = !1), "PATCH" !== f.type || !window.ActiveXObject || window.external && window.external.msActiveXFilteringEnabled || (f.xhr = function() {
            return new ActiveXObject("Microsoft.XMLHTTP");
        });
        var i = d.xhr = a.ajax(h.extend(f, d));
        return c.trigger("request", c, i, d), i;
    };
    var y = {
        create: "POST",
        update: "PUT",
        patch: "PATCH",
        "delete": "DELETE",
        read: "GET"
    };
    a.ajax = function() {
        return a.$.ajax.apply(a.$, arguments);
    };
    var z = a.Router = function(a) {
        a || (a = {}), a.routes && (this.routes = a.routes), this._bindRoutes(), this.initialize.apply(this, arguments);
    }, A = /\((.*?)\)/g, B = /(\(\?)?:\w+/g, C = /\*\w+/g, D = /[\-{}\[\]+?.,\\\^$|#\s]/g;
    h.extend(z.prototype, i, {
        initialize: function() {},
        route: function(b, c, d) {
            h.isRegExp(b) || (b = this._routeToRegExp(b)), h.isFunction(c) && (d = c, c = ""), 
            d || (d = this[c]);
            var e = this;
            return a.history.route(b, function(f) {
                var g = e._extractParameters(b, f);
                d && d.apply(e, g), e.trigger.apply(e, [ "route:" + c ].concat(g)), e.trigger("route", c, g), 
                a.history.trigger("route", e, c, g);
            }), this;
        },
        navigate: function(b, c) {
            return a.history.navigate(b, c), this;
        },
        _bindRoutes: function() {
            if (this.routes) {
                this.routes = h.result(this, "routes");
                for (var a, b = h.keys(this.routes); null != (a = b.pop()); ) this.route(a, this.routes[a]);
            }
        },
        _routeToRegExp: function(a) {
            return a = a.replace(D, "\\$&").replace(A, "(?:$1)?").replace(B, function(a, b) {
                return b ? a : "([^/]+)";
            }).replace(C, "(.*?)"), new RegExp("^" + a + "$");
        },
        _extractParameters: function(a, b) {
            var c = a.exec(b).slice(1);
            return h.map(c, function(a) {
                return a ? decodeURIComponent(a) : null;
            });
        }
    });
    var E = a.History = function() {
        this.handlers = [], h.bindAll(this, "checkUrl"), "undefined" != typeof window && (this.location = window.location, 
        this.history = window.history);
    }, F = /^[#\/]|\s+$/g, G = /^\/+|\/+$/g, H = /msie [\w.]+/, I = /\/$/;
    E.started = !1, h.extend(E.prototype, i, {
        interval: 50,
        getHash: function(a) {
            var b = (a || this).location.href.match(/#(.*)$/);
            return b ? b[1] : "";
        },
        getFragment: function(a, b) {
            if (null == a) if (this._hasPushState || !this._wantsHashChange || b) {
                a = this.location.pathname;
                var c = this.root.replace(I, "");
                a.indexOf(c) || (a = a.substr(c.length));
            } else a = this.getHash();
            return a.replace(F, "");
        },
        start: function(b) {
            if (E.started) throw new Error("Backbone.history has already been started");
            E.started = !0, this.options = h.extend({}, {
                root: "/"
            }, this.options, b), this.root = this.options.root, this._wantsHashChange = this.options.hashChange !== !1, 
            this._wantsPushState = !!this.options.pushState, this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
            var c = this.getFragment(), d = document.documentMode, e = H.exec(navigator.userAgent.toLowerCase()) && (!d || 7 >= d);
            this.root = ("/" + this.root + "/").replace(G, "/"), e && this._wantsHashChange && (this.iframe = a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow, 
            this.navigate(c)), this._hasPushState ? a.$(window).on("popstate", this.checkUrl) : this._wantsHashChange && "onhashchange" in window && !e ? a.$(window).on("hashchange", this.checkUrl) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)), 
            this.fragment = c;
            var f = this.location, g = f.pathname.replace(/[^\/]$/, "$&/") === this.root;
            return this._wantsHashChange && this._wantsPushState && !this._hasPushState && !g ? (this.fragment = this.getFragment(null, !0), 
            this.location.replace(this.root + this.location.search + "#" + this.fragment), !0) : (this._wantsPushState && this._hasPushState && g && f.hash && (this.fragment = this.getHash().replace(F, ""), 
            this.history.replaceState({}, document.title, this.root + this.fragment + f.search)), 
            this.options.silent ? void 0 : this.loadUrl());
        },
        stop: function() {
            a.$(window).off("popstate", this.checkUrl).off("hashchange", this.checkUrl), clearInterval(this._checkUrlInterval), 
            E.started = !1;
        },
        route: function(a, b) {
            this.handlers.unshift({
                route: a,
                callback: b
            });
        },
        checkUrl: function() {
            var a = this.getFragment();
            return a === this.fragment && this.iframe && (a = this.getFragment(this.getHash(this.iframe))), 
            a === this.fragment ? !1 : (this.iframe && this.navigate(a), this.loadUrl() || this.loadUrl(this.getHash()), 
            void 0);
        },
        loadUrl: function(a) {
            var b = this.fragment = this.getFragment(a), c = h.any(this.handlers, function(a) {
                return a.route.test(b) ? (a.callback(b), !0) : void 0;
            });
            return c;
        },
        navigate: function(a, b) {
            if (!E.started) return !1;
            if (b && b !== !0 || (b = {
                trigger: b
            }), a = this.getFragment(a || ""), this.fragment !== a) {
                this.fragment = a;
                var c = this.root + a;
                if (this._hasPushState) this.history[b.replace ? "replaceState" : "pushState"]({}, document.title, c); else {
                    if (!this._wantsHashChange) return this.location.assign(c);
                    this._updateHash(this.location, a, b.replace), this.iframe && a !== this.getFragment(this.getHash(this.iframe)) && (b.replace || this.iframe.document.open().close(), 
                    this._updateHash(this.iframe.location, a, b.replace));
                }
                b.trigger && this.loadUrl(a);
            }
        },
        _updateHash: function(a, b, c) {
            if (c) {
                var d = a.href.replace(/(javascript:|#).*$/, "");
                a.replace(d + "#" + b);
            } else a.hash = "#" + b;
        }
    }), a.history = new E();
    var J = function(a, b) {
        var c, d = this;
        c = a && h.has(a, "constructor") ? a.constructor : function() {
            return d.apply(this, arguments);
        }, h.extend(c, d, b);
        var e = function() {
            this.constructor = c;
        };
        return e.prototype = d.prototype, c.prototype = new e(), a && h.extend(c.prototype, a), 
        c.__super__ = d.prototype, c;
    };
    n.extend = q.extend = z.extend = v.extend = E.extend = J;
    var K = function() {
        throw new Error('A "url" property or function must be specified');
    }, L = function(a, b) {
        var c = b.error;
        b.error = function(d) {
            c && c(a, d, b), a.trigger("error", a, d, b);
        };
    };
}.call(this), function(a) {
    "use strict";
    var b, c, d;
    "undefined" == typeof window ? (b = require("underscore"), c = require("backbone"), 
    d = module.exports = c) : (b = window._, c = window.Backbone, d = window), c.Relational = {
        showWarnings: !0
    }, c.Semaphore = {
        _permitsAvailable: null,
        _permitsUsed: 0,
        acquire: function() {
            if (this._permitsAvailable && this._permitsUsed >= this._permitsAvailable) throw new Error("Max permits acquired");
            this._permitsUsed++;
        },
        release: function() {
            if (0 === this._permitsUsed) throw new Error("All permits released");
            this._permitsUsed--;
        },
        isLocked: function() {
            return this._permitsUsed > 0;
        },
        setAvailablePermits: function(a) {
            if (this._permitsUsed > a) throw new Error("Available permits cannot be less than used permits");
            this._permitsAvailable = a;
        }
    }, c.BlockingQueue = function() {
        this._queue = [];
    }, b.extend(c.BlockingQueue.prototype, c.Semaphore, {
        _queue: null,
        add: function(a) {
            this.isBlocked() ? this._queue.push(a) : a();
        },
        process: function() {
            for (;this._queue && this._queue.length; ) this._queue.shift()();
        },
        block: function() {
            this.acquire();
        },
        unblock: function() {
            this.release(), this.isBlocked() || this.process();
        },
        isBlocked: function() {
            return this.isLocked();
        }
    }), c.Relational.eventQueue = new c.BlockingQueue(), c.Store = function() {
        this._collections = [], this._reverseRelations = [], this._orphanRelations = [], 
        this._subModels = [], this._modelScopes = [ d ];
    }, b.extend(c.Store.prototype, c.Events, {
        initializeRelation: function(a, d, e) {
            var f = b.isString(d.type) ? c[d.type] || this.getObjectByName(d.type) : d.type;
            f && f.prototype instanceof c.Relation ? new f(a, d, e) : c.Relational.showWarnings && "undefined" != typeof console && console.warn("Relation=%o; missing or invalid relation type!", d);
        },
        addModelScope: function(a) {
            this._modelScopes.push(a);
        },
        removeModelScope: function(a) {
            this._modelScopes = b.without(this._modelScopes, a);
        },
        addSubModels: function(a, b) {
            this._subModels.push({
                superModelType: b,
                subModels: a
            });
        },
        setupSuperModel: function(a) {
            b.find(this._subModels, function(c) {
                return b.find(c.subModels || [], function(b, d) {
                    var e = this.getObjectByName(b);
                    return a === e ? (c.superModelType._subModels[d] = a, a._superModel = c.superModelType, 
                    a._subModelTypeValue = d, a._subModelTypeAttribute = c.superModelType.prototype.subModelTypeAttribute, 
                    !0) : void 0;
                }, this);
            }, this);
        },
        addReverseRelation: function(a) {
            var c = b.any(this._reverseRelations, function(c) {
                return b.all(a || [], function(a, b) {
                    return a === c[b];
                });
            });
            !c && a.model && a.type && (this._reverseRelations.push(a), this._addRelation(a.model, a), 
            this.retroFitRelation(a));
        },
        addOrphanRelation: function(a) {
            var c = b.any(this._orphanRelations, function(c) {
                return b.all(a || [], function(a, b) {
                    return a === c[b];
                });
            });
            !c && a.model && a.type && this._orphanRelations.push(a);
        },
        processOrphanRelations: function() {
            b.each(this._orphanRelations.slice(0), function(a) {
                var d = c.Relational.store.getObjectByName(a.relatedModel);
                d && (this.initializeRelation(null, a), this._orphanRelations = b.without(this._orphanRelations, a));
            }, this);
        },
        _addRelation: function(a, c) {
            a.prototype.relations || (a.prototype.relations = []), a.prototype.relations.push(c), 
            b.each(a._subModels || [], function(a) {
                this._addRelation(a, c);
            }, this);
        },
        retroFitRelation: function(a) {
            var b = this.getCollection(a.model, !1);
            b && b.each(function(b) {
                b instanceof a.model && new a.type(b, a);
            }, this);
        },
        getCollection: function(a, d) {
            a instanceof c.RelationalModel && (a = a.constructor);
            for (var e = a; e._superModel; ) e = e._superModel;
            var f = b.findWhere(this._collections, {
                model: e
            });
            return f || d === !1 || (f = this._createCollection(e)), f;
        },
        getObjectByName: function(c) {
            var d = c.split("."), e = null;
            return b.find(this._modelScopes, function(c) {
                return e = b.reduce(d || [], function(b, c) {
                    return b ? b[c] : a;
                }, c), e && e !== c ? !0 : void 0;
            }, this), e;
        },
        _createCollection: function(a) {
            var b;
            return a instanceof c.RelationalModel && (a = a.constructor), a.prototype instanceof c.RelationalModel && (b = new c.Collection(), 
            b.model = a, this._collections.push(b)), b;
        },
        resolveIdForItem: function(a, d) {
            var e = b.isString(d) || b.isNumber(d) ? d : null;
            return null === e && (d instanceof c.RelationalModel ? e = d.id : b.isObject(d) && (e = d[a.prototype.idAttribute])), 
            e || 0 === e || (e = null), e;
        },
        find: function(a, b) {
            var c = this.resolveIdForItem(a, b), d = this.getCollection(a);
            if (d) {
                var e = d.get(c);
                if (e instanceof a) return e;
            }
            return null;
        },
        register: function(a) {
            var b = this.getCollection(a);
            if (b) {
                var c = a.collection;
                b.add(a), this.listenTo(a, "destroy", this.unregister, this), a.collection = c;
            }
        },
        checkId: function(a, b) {
            var d = this.getCollection(a), e = d && d.get(b);
            if (e && a !== e) throw c.Relational.showWarnings && "undefined" != typeof console && console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o", e, a), 
            new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!");
        },
        update: function(a) {
            var b = this.getCollection(a);
            b._onModelEvent("change:" + a.idAttribute, a, b), a.trigger("relational:change:id", a, b);
        },
        unregister: function(a) {
            this.stopListening(a, "destroy", this.unregister);
            var b = this.getCollection(a);
            b && b.remove(a);
        },
        reset: function() {
            this.stopListening(), this._collections = [], this._subModels = [], this._modelScopes = [ d ];
        }
    }), c.Relational.store = new c.Store(), c.Relation = function(a, d, e) {
        if (this.instance = a, d = b.isObject(d) ? d : {}, this.reverseRelation = b.defaults(d.reverseRelation || {}, this.options.reverseRelation), 
        this.options = b.defaults(d, this.options, c.Relation.prototype.options), this.reverseRelation.type = b.isString(this.reverseRelation.type) ? c[this.reverseRelation.type] || c.Relational.store.getObjectByName(this.reverseRelation.type) : this.reverseRelation.type, 
        this.key = this.options.key, this.keySource = this.options.keySource || this.key, 
        this.keyDestination = this.options.keyDestination || this.keySource || this.key, 
        this.model = this.options.model || this.instance.constructor, this.relatedModel = this.options.relatedModel, 
        b.isString(this.relatedModel) && (this.relatedModel = c.Relational.store.getObjectByName(this.relatedModel)), 
        this.checkPreconditions() && (!this.options.isAutoRelation && this.reverseRelation.type && this.reverseRelation.key && c.Relational.store.addReverseRelation(b.defaults({
            isAutoRelation: !0,
            model: this.relatedModel,
            relatedModel: this.model,
            reverseRelation: this.options
        }, this.reverseRelation)), a)) {
            var f = this.keySource;
            f !== this.key && "object" == typeof this.instance.get(this.key) && (f = this.key), 
            this.setKeyContents(this.instance.get(f)), this.relatedCollection = c.Relational.store.getCollection(this.relatedModel), 
            this.keySource !== this.key && this.instance.unset(this.keySource, {
                silent: !0
            }), this.instance._relations[this.key] = this, this.initialize(e), this.options.autoFetch && this.instance.fetchRelated(this.key, b.isObject(this.options.autoFetch) ? this.options.autoFetch : {}), 
            this.listenTo(this.instance, "destroy", this.destroy).listenTo(this.relatedCollection, "relational:add relational:change:id", this.tryAddRelated).listenTo(this.relatedCollection, "relational:remove", this.removeRelated);
        }
    }, c.Relation.extend = c.Model.extend, b.extend(c.Relation.prototype, c.Events, c.Semaphore, {
        options: {
            createModels: !0,
            includeInJSON: !0,
            isAutoRelation: !1,
            autoFetch: !1,
            parse: !1
        },
        instance: null,
        key: null,
        keyContents: null,
        relatedModel: null,
        relatedCollection: null,
        reverseRelation: null,
        related: null,
        checkPreconditions: function() {
            var a = this.instance, d = this.key, e = this.model, f = this.relatedModel, g = c.Relational.showWarnings && "undefined" != typeof console;
            if (!e || !d || !f) return g && console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).", this, e, d, f), 
            !1;
            if (!(e.prototype instanceof c.RelationalModel)) return g && console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).", this, a), 
            !1;
            if (!(f.prototype instanceof c.RelationalModel)) return g && console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).", this, f), 
            !1;
            if (this instanceof c.HasMany && this.reverseRelation.type === c.HasMany) return g && console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.", this), 
            !1;
            if (a && b.keys(a._relations).length) {
                var h = b.find(a._relations, function(a) {
                    return a.key === d;
                }, this);
                if (h) return g && console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.", this, d, a, h), 
                !1;
            }
            return !0;
        },
        setRelated: function(a) {
            this.related = a, this.instance.acquire(), this.instance.attributes[this.key] = a, 
            this.instance.release();
        },
        _isReverseRelation: function(a) {
            return a.instance instanceof this.relatedModel && this.reverseRelation.key === a.key && this.key === a.reverseRelation.key;
        },
        getReverseRelations: function(a) {
            var c = [], d = b.isUndefined(a) ? this.related && (this.related.models || [ this.related ]) : [ a ];
            return b.each(d || [], function(a) {
                b.each(a.getRelations() || [], function(a) {
                    this._isReverseRelation(a) && c.push(a);
                }, this);
            }, this), c;
        },
        destroy: function() {
            this.stopListening(), this instanceof c.HasOne ? this.setRelated(null) : this instanceof c.HasMany && this.setRelated(this._prepareCollection()), 
            b.each(this.getReverseRelations(), function(a) {
                a.removeRelated(this.instance);
            }, this);
        }
    }), c.HasOne = c.Relation.extend({
        options: {
            reverseRelation: {
                type: "HasMany"
            }
        },
        initialize: function(a) {
            this.listenTo(this.instance, "relational:change:" + this.key, this.onChange);
            var c = this.findRelated(a);
            this.setRelated(c), b.each(this.getReverseRelations(), function(b) {
                b.addRelated(this.instance, a);
            }, this);
        },
        findRelated: function(a) {
            var c = null;
            if (a = b.defaults({
                parse: this.options.parse
            }, a), this.keyContents instanceof this.relatedModel) c = this.keyContents; else if (this.keyContents || 0 === this.keyContents) {
                var d = b.defaults({
                    create: this.options.createModels
                }, a);
                c = this.relatedModel.findOrCreate(this.keyContents, d);
            }
            return this.related && (this.keyId = null), c;
        },
        setKeyContents: function(a) {
            this.keyContents = a, this.keyId = c.Relational.store.resolveIdForItem(this.relatedModel, this.keyContents);
        },
        onChange: function(a, d, e) {
            if (!this.isLocked()) {
                this.acquire(), e = e ? b.clone(e) : {};
                var f = b.isUndefined(e.__related), g = f ? this.related : e.__related;
                if (f) {
                    this.setKeyContents(d);
                    var h = this.findRelated(e);
                    this.setRelated(h);
                }
                if (g && this.related !== g && b.each(this.getReverseRelations(g), function(a) {
                    a.removeRelated(this.instance, null, e);
                }, this), b.each(this.getReverseRelations(), function(a) {
                    a.addRelated(this.instance, e);
                }, this), !e.silent && this.related !== g) {
                    var i = this;
                    this.changed = !0, c.Relational.eventQueue.add(function() {
                        i.instance.trigger("change:" + i.key, i.instance, i.related, e, !0), i.changed = !1;
                    });
                }
                this.release();
            }
        },
        tryAddRelated: function(a, b, c) {
            !this.keyId && 0 !== this.keyId || a.id !== this.keyId || (this.addRelated(a, c), 
            this.keyId = null);
        },
        addRelated: function(a, c) {
            var d = this;
            a.queue(function() {
                if (a !== d.related) {
                    var e = d.related || null;
                    d.setRelated(a), d.onChange(d.instance, a, b.defaults({
                        __related: e
                    }, c));
                }
            });
        },
        removeRelated: function(a, c, d) {
            if (this.related && a === this.related) {
                var e = this.related || null;
                this.setRelated(null), this.onChange(this.instance, a, b.defaults({
                    __related: e
                }, d));
            }
        }
    }), c.HasMany = c.Relation.extend({
        collectionType: null,
        options: {
            reverseRelation: {
                type: "HasOne"
            },
            collectionType: c.Collection,
            collectionKey: !0,
            collectionOptions: {}
        },
        initialize: function(a) {
            if (this.listenTo(this.instance, "relational:change:" + this.key, this.onChange), 
            this.collectionType = this.options.collectionType, b.isString(this.collectionType) && (this.collectionType = c.Relational.store.getObjectByName(this.collectionType)), 
            this.collectionType !== c.Collection && !(this.collectionType.prototype instanceof c.Collection)) throw new Error("`collectionType` must inherit from Backbone.Collection");
            var d = this.findRelated(a);
            this.setRelated(d);
        },
        _prepareCollection: function(a) {
            if (this.related && this.stopListening(this.related), !(a && a instanceof c.Collection)) {
                var d = b.isFunction(this.options.collectionOptions) ? this.options.collectionOptions(this.instance) : this.options.collectionOptions;
                a = new this.collectionType(null, d);
            }
            if (a.model = this.relatedModel, this.options.collectionKey) {
                var e = this.options.collectionKey === !0 ? this.options.reverseRelation.key : this.options.collectionKey;
                a[e] && a[e] !== this.instance ? c.Relational.showWarnings && "undefined" != typeof console && console.warn("Relation=%o; collectionKey=%s already exists on collection=%o", this, e, this.options.collectionKey) : e && (a[e] = this.instance);
            }
            return this.listenTo(a, "relational:add", this.handleAddition).listenTo(a, "relational:remove", this.handleRemoval).listenTo(a, "relational:reset", this.handleReset), 
            a;
        },
        findRelated: function(a) {
            var d = null;
            if (a = b.defaults({
                parse: this.options.parse
            }, a), this.keyContents instanceof c.Collection) this._prepareCollection(this.keyContents), 
            d = this.keyContents; else {
                var e = [];
                b.each(this.keyContents, function(c) {
                    if (c instanceof this.relatedModel) var d = c; else d = this.relatedModel.findOrCreate(c, b.extend({
                        merge: !0
                    }, a, {
                        create: this.options.createModels
                    }));
                    d && e.push(d);
                }, this), d = this.related instanceof c.Collection ? this.related : this._prepareCollection(), 
                d.set(e, b.defaults({
                    merge: !1,
                    parse: !1
                }, a));
            }
            return this.keyIds = b.difference(this.keyIds, b.pluck(d.models, "id")), d;
        },
        setKeyContents: function(a) {
            this.keyContents = a instanceof c.Collection ? a : null, this.keyIds = [], this.keyContents || !a && 0 !== a || (this.keyContents = b.isArray(a) ? a : [ a ], 
            b.each(this.keyContents, function(a) {
                var b = c.Relational.store.resolveIdForItem(this.relatedModel, a);
                (b || 0 === b) && this.keyIds.push(b);
            }, this));
        },
        onChange: function(a, d, e) {
            e = e ? b.clone(e) : {}, this.setKeyContents(d), this.changed = !1;
            var f = this.findRelated(e);
            if (this.setRelated(f), !e.silent) {
                var g = this;
                c.Relational.eventQueue.add(function() {
                    g.changed && (g.instance.trigger("change:" + g.key, g.instance, g.related, e, !0), 
                    g.changed = !1);
                });
            }
        },
        handleAddition: function(a, d, e) {
            e = e ? b.clone(e) : {}, this.changed = !0, b.each(this.getReverseRelations(a), function(a) {
                a.addRelated(this.instance, e);
            }, this);
            var f = this;
            !e.silent && c.Relational.eventQueue.add(function() {
                f.instance.trigger("add:" + f.key, a, f.related, e);
            });
        },
        handleRemoval: function(a, d, e) {
            e = e ? b.clone(e) : {}, this.changed = !0, b.each(this.getReverseRelations(a), function(a) {
                a.removeRelated(this.instance, null, e);
            }, this);
            var f = this;
            !e.silent && c.Relational.eventQueue.add(function() {
                f.instance.trigger("remove:" + f.key, a, f.related, e);
            });
        },
        handleReset: function(a, d) {
            var e = this;
            d = d ? b.clone(d) : {}, !d.silent && c.Relational.eventQueue.add(function() {
                e.instance.trigger("reset:" + e.key, e.related, d);
            });
        },
        tryAddRelated: function(a, c, d) {
            var e = b.contains(this.keyIds, a.id);
            e && (this.addRelated(a, d), this.keyIds = b.without(this.keyIds, a.id));
        },
        addRelated: function(a, c) {
            var d = this;
            a.queue(function() {
                d.related && !d.related.get(a) && d.related.add(a, b.defaults({
                    parse: !1
                }, c));
            });
        },
        removeRelated: function(a, b, c) {
            this.related.get(a) && this.related.remove(a, c);
        }
    }), c.RelationalModel = c.Model.extend({
        relations: null,
        _relations: null,
        _isInitialized: !1,
        _deferProcessing: !1,
        _queue: null,
        subModelTypeAttribute: "type",
        subModelTypes: null,
        constructor: function(a, d) {
            if (d && d.collection) {
                var e = this, f = this.collection = d.collection;
                delete d.collection, this._deferProcessing = !0;
                var g = function(a) {
                    a === e && (e._deferProcessing = !1, e.processQueue(), f.off("relational:add", g));
                };
                f.on("relational:add", g), b.defer(function() {
                    g(e);
                });
            }
            c.Relational.store.processOrphanRelations(), this._queue = new c.BlockingQueue(), 
            this._queue.block(), c.Relational.eventQueue.block();
            try {
                c.Model.apply(this, arguments);
            } finally {
                c.Relational.eventQueue.unblock();
            }
        },
        trigger: function(a) {
            if (a.length > 5 && 0 === a.indexOf("change")) {
                var b = this, d = arguments;
                c.Relational.eventQueue.add(function() {
                    if (b._isInitialized) {
                        var e = !0;
                        if ("change" === a) e = b.hasChanged(); else {
                            var f = a.slice(7), g = b.getRelation(f);
                            g && (e = d[4] === !0, e ? b.changed[f] = d[2] : g.changed || delete b.changed[f]);
                        }
                        e && c.Model.prototype.trigger.apply(b, d);
                    }
                });
            } else c.Model.prototype.trigger.apply(this, arguments);
            return this;
        },
        initializeRelations: function(a) {
            this.acquire(), this._relations = {}, b.each(this.relations || [], function(b) {
                c.Relational.store.initializeRelation(this, b, a);
            }, this), this._isInitialized = !0, this.release(), this.processQueue();
        },
        updateRelations: function(a) {
            this._isInitialized && !this.isLocked() && b.each(this._relations, function(b) {
                var c = this.attributes[b.keySource] || this.attributes[b.key];
                b.related !== c && this.trigger("relational:change:" + b.key, this, c, a || {});
            }, this);
        },
        queue: function(a) {
            this._queue.add(a);
        },
        processQueue: function() {
            this._isInitialized && !this._deferProcessing && this._queue.isBlocked() && this._queue.unblock();
        },
        getRelation: function(a) {
            return this._relations[a];
        },
        getRelations: function() {
            return b.values(this._relations);
        },
        fetchRelated: function(a, d, e) {
            d = b.extend({
                update: !0,
                remove: !1
            }, d);
            var f, g = [], h = this.getRelation(a), i = h && (h.keyIds || (h.keyId || 0 === h.keyId ? [ h.keyId ] : []));
            if (e) {
                var j = h.related instanceof c.Collection ? h.related.models : [ h.related ];
                b.each(j, function(a) {
                    (a.id || 0 === a.id) && i.push(a.id);
                });
            }
            if (i && i.length) {
                var k = [], j = b.map(i, function(a) {
                    var b = c.Relational.store.find(h.relatedModel, a);
                    if (!b) {
                        var e = {};
                        e[h.relatedModel.prototype.idAttribute] = a, b = h.relatedModel.findOrCreate(e, d), 
                        k.push(b);
                    }
                    return b;
                }, this);
                if (h.related instanceof c.Collection && b.isFunction(h.related.url) && (f = h.related.url(j)), 
                f && f !== h.related.url()) {
                    var l = b.defaults({
                        error: function() {
                            var a = arguments;
                            b.each(k, function(b) {
                                b.trigger("destroy", b, b.collection, d), d.error && d.error.apply(b, a);
                            });
                        },
                        url: f
                    }, d);
                    g = [ h.related.fetch(l) ];
                } else g = b.map(j, function(a) {
                    var c = b.defaults({
                        error: function() {
                            b.contains(k, a) && (a.trigger("destroy", a, a.collection, d), d.error && d.error.apply(a, arguments));
                        }
                    }, d);
                    return a.fetch(c);
                }, this);
            }
            return g;
        },
        get: function(d) {
            var e = c.Model.prototype.get.call(this, d);
            if (!this.dotNotation || -1 === d.indexOf(".")) return e;
            var f = d.split("."), g = b.reduce(f, function(a, b) {
                if (!(a instanceof c.Model)) throw new Error("Attribute must be an instanceof Backbone.Model. Is: " + a + ", currentSplit: " + b);
                return c.Model.prototype.get.call(a, b);
            }, this);
            if (e !== a && g !== a) throw new Error("Ambiguous result for '" + d + "'. direct result: " + e + ", dotNotation: " + g);
            return e || g;
        },
        set: function(a, d, e) {
            c.Relational.eventQueue.block();
            var f;
            b.isObject(a) || null == a ? (f = a, e = d) : (f = {}, f[a] = d);
            try {
                var g = this.id, h = f && this.idAttribute in f && f[this.idAttribute];
                c.Relational.store.checkId(this, h);
                var i = c.Model.prototype.set.apply(this, arguments);
                this._isInitialized || this.isLocked() ? h && h !== g && c.Relational.store.update(this) : (this.constructor.initializeModelHierarchy(), 
                c.Relational.store.register(this), this.initializeRelations(e)), f && this.updateRelations(e);
            } finally {
                c.Relational.eventQueue.unblock();
            }
            return i;
        },
        unset: function(a, b) {
            c.Relational.eventQueue.block();
            var d = c.Model.prototype.unset.apply(this, arguments);
            return this.updateRelations(b), c.Relational.eventQueue.unblock(), d;
        },
        clear: function(a) {
            c.Relational.eventQueue.block();
            var b = c.Model.prototype.clear.apply(this, arguments);
            return this.updateRelations(a), c.Relational.eventQueue.unblock(), b;
        },
        clone: function() {
            var a = b.clone(this.attributes);
            return b.isUndefined(a[this.idAttribute]) || (a[this.idAttribute] = null), b.each(this.getRelations(), function(b) {
                delete a[b.key];
            }), new this.constructor(a);
        },
        toJSON: function(a) {
            if (this.isLocked()) return this.id;
            this.acquire();
            var d = c.Model.prototype.toJSON.call(this, a);
            return !this.constructor._superModel || this.constructor._subModelTypeAttribute in d || (d[this.constructor._subModelTypeAttribute] = this.constructor._subModelTypeValue), 
            b.each(this._relations, function(e) {
                var f = d[e.key], g = e.options.includeInJSON, h = null;
                g === !0 ? f && b.isFunction(f.toJSON) && (h = f.toJSON(a)) : b.isString(g) ? (f instanceof c.Collection ? h = f.pluck(g) : f instanceof c.Model && (h = f.get(g)), 
                g === e.relatedModel.prototype.idAttribute && (e instanceof c.HasMany ? h = h.concat(e.keyIds) : e instanceof c.HasOne && (h = h || e.keyId))) : b.isArray(g) ? f instanceof c.Collection ? (h = [], 
                f.each(function(a) {
                    var c = {};
                    b.each(g, function(b) {
                        c[b] = a.get(b);
                    }), h.push(c);
                })) : f instanceof c.Model && (h = {}, b.each(g, function(a) {
                    h[a] = f.get(a);
                })) : delete d[e.key], g && (d[e.keyDestination] = h), e.keyDestination !== e.key && delete d[e.key];
            }), this.release(), d;
        }
    }, {
        setup: function() {
            return this.prototype.relations = (this.prototype.relations || []).slice(0), this._subModels = {}, 
            this._superModel = null, this.prototype.hasOwnProperty("subModelTypes") ? c.Relational.store.addSubModels(this.prototype.subModelTypes, this) : this.prototype.subModelTypes = null, 
            b.each(this.prototype.relations || [], function(a) {
                if (a.model || (a.model = this), a.reverseRelation && a.model === this) {
                    var d = !0;
                    if (b.isString(a.relatedModel)) {
                        var e = c.Relational.store.getObjectByName(a.relatedModel);
                        d = e && e.prototype instanceof c.RelationalModel;
                    }
                    d ? c.Relational.store.initializeRelation(null, a) : b.isString(a.relatedModel) && c.Relational.store.addOrphanRelation(a);
                }
            }, this), this;
        },
        build: function(a, b) {
            var c = this;
            if (this.initializeModelHierarchy(), this._subModels && this.prototype.subModelTypeAttribute in a) {
                var d = a[this.prototype.subModelTypeAttribute], e = this._subModels[d];
                e && (c = e);
            }
            return new c(a, b);
        },
        initializeModelHierarchy: function() {
            if (b.isUndefined(this._superModel) || b.isNull(this._superModel)) if (c.Relational.store.setupSuperModel(this), 
            this._superModel && this._superModel.prototype.relations) {
                var a = b.select(this._superModel.prototype.relations || [], function(a) {
                    return !b.any(this.prototype.relations || [], function(b) {
                        return a.relatedModel === b.relatedModel && a.key === b.key;
                    }, this);
                }, this);
                this.prototype.relations = a.concat(this.prototype.relations);
            } else this._superModel = !1;
            this.prototype.subModelTypes && b.keys(this.prototype.subModelTypes).length !== b.keys(this._subModels).length && b.each(this.prototype.subModelTypes || [], function(a) {
                var b = c.Relational.store.getObjectByName(a);
                b && b.initializeModelHierarchy();
            });
        },
        findOrCreate: function(a, d) {
            d || (d = {});
            var e = b.isObject(a) && d.parse && this.prototype.parse ? this.prototype.parse(a) : a, f = c.Relational.store.find(this, e);
            return b.isObject(a) && (f && d.merge !== !1 ? (delete d.collection, f.set(e, d)) : f || d.create === !1 || (f = this.build(a, d))), 
            f;
        }
    }), b.extend(c.RelationalModel.prototype, c.Semaphore), c.Collection.prototype.__prepareModel = c.Collection.prototype._prepareModel, 
    c.Collection.prototype._prepareModel = function(a, b) {
        var d;
        return a instanceof c.Model ? (a.collection || (a.collection = this), d = a) : (b || (b = {}), 
        b.collection = this, d = "undefined" != typeof this.model.findOrCreate ? this.model.findOrCreate(a, b) : new this.model(a, b), 
        d && d.isNew() && !d._validate(a, b) && (this.trigger("invalid", this, a, b), d = !1)), 
        d;
    };
    var e = c.Collection.prototype.__set = c.Collection.prototype.set;
    c.Collection.prototype.set = function(a, d) {
        if (!(this.model.prototype instanceof c.RelationalModel)) return e.apply(this, arguments);
        d && d.parse && (a = this.parse(a, d)), b.isArray(a) || (a = a ? [ a ] : []);
        var f = [], g = [];
        return b.each(a, function(a) {
            a instanceof c.Model || (a = c.Collection.prototype._prepareModel.call(this, a, d)), 
            a && (g.push(a), this.get(a) || this.get(a.cid) ? null != a.id && (this._byId[a.id] = a) : f.push(a));
        }, this), e.call(this, g, b.defaults({
            parse: !1
        }, d)), b.each(f, function(a) {
            (this.get(a) || this.get(a.cid)) && this.trigger("relational:add", a, this, d);
        }, this), this;
    };
    var f = c.Collection.prototype.__remove = c.Collection.prototype.remove;
    c.Collection.prototype.remove = function(a, d) {
        if (!(this.model.prototype instanceof c.RelationalModel)) return f.apply(this, arguments);
        a = b.isArray(a) ? a.slice() : [ a ], d || (d = {});
        var e = [];
        return b.each(a, function(a) {
            a = this.get(a) || this.get(a.cid), a && e.push(a);
        }, this), e.length && (f.call(this, e, d), b.each(e, function(a) {
            this.trigger("relational:remove", a, this, d);
        }, this)), this;
    };
    var g = c.Collection.prototype.__reset = c.Collection.prototype.reset;
    c.Collection.prototype.reset = function(a, d) {
        return d = b.extend({
            merge: !0
        }, d), g.call(this, a, d), this.model.prototype instanceof c.RelationalModel && this.trigger("relational:reset", this, d), 
        this;
    };
    var h = c.Collection.prototype.__sort = c.Collection.prototype.sort;
    c.Collection.prototype.sort = function(a) {
        return h.call(this, a), this.model.prototype instanceof c.RelationalModel && this.trigger("relational:reset", this, a), 
        this;
    };
    var i = c.Collection.prototype.__trigger = c.Collection.prototype.trigger;
    c.Collection.prototype.trigger = function(a) {
        if (!(this.model.prototype instanceof c.RelationalModel)) return i.apply(this, arguments);
        if ("add" === a || "remove" === a || "reset" === a) {
            var d = this, e = arguments;
            b.isObject(e[3]) && (e = b.toArray(e), e[3] = b.clone(e[3])), c.Relational.eventQueue.add(function() {
                i.apply(d, e);
            });
        } else i.apply(this, arguments);
        return this;
    }, c.RelationalModel.extend = function() {
        var a = c.Model.extend.apply(this, arguments);
        return a.setup(this), a;
    };
}(), function(a, b) {
    "object" == typeof exports ? module.exports = b(require("underscore"), require("backbone")) : "function" == typeof define && define.amd ? define([ "underscore", "backbone" ], function(c, d) {
        return b(c || a._, d || a.Backbone);
    }) : b(_, Backbone);
}(this, function(a, b) {
    function c() {
        return (0 | 65536 * (1 + Math.random())).toString(16).substring(1);
    }
    function d() {
        return c() + c() + "-" + c() + "-" + c() + "-" + c() + "-" + c() + c() + c();
    }
    return b.LocalStorage = window.Store = function(a) {
        if (!this.localStorage) throw "Backbone.localStorage: Environment does not support localStorage.";
        this.name = a;
        var b = this.localStorage().getItem(this.name);
        this.records = b && b.split(",") || [];
    }, a.extend(b.LocalStorage.prototype, {
        save: function() {
            this.localStorage().setItem(this.name, this.records.join(","));
        },
        create: function(a) {
            return a.id || (a.id = d(), a.set(a.idAttribute, a.id)), this.localStorage().setItem(this.name + "-" + a.id, JSON.stringify(a)), 
            this.records.push(a.id.toString()), this.save(), this.find(a);
        },
        update: function(b) {
            return this.localStorage().setItem(this.name + "-" + b.id, JSON.stringify(b)), a.include(this.records, b.id.toString()) || this.records.push(b.id.toString()), 
            this.save(), this.find(b);
        },
        find: function(a) {
            return this.jsonData(this.localStorage().getItem(this.name + "-" + a.id));
        },
        findAll: function() {
            return (a.chain || a)(this.records).map(function(a) {
                return this.jsonData(this.localStorage().getItem(this.name + "-" + a));
            }, this).compact().value();
        },
        destroy: function(b) {
            return b.isNew() ? !1 : (this.localStorage().removeItem(this.name + "-" + b.id), 
            this.records = a.reject(this.records, function(a) {
                return a === b.id.toString();
            }), this.save(), b);
        },
        localStorage: function() {
            return localStorage;
        },
        jsonData: function(a) {
            return a && JSON.parse(a);
        },
        _clear: function() {
            var b = this.localStorage(), c = new RegExp("^" + this.name + "-");
            b.removeItem(this.name), (a.chain || a)(b).keys().filter(function(a) {
                return c.test(a);
            }).each(function(a) {
                b.removeItem(a);
            });
        },
        _storageSize: function() {
            return this.localStorage().length;
        }
    }), b.LocalStorage.sync = window.Store.sync = b.localSync = function(a, c, d) {
        var e, f, g = c.localStorage || c.collection.localStorage, h = b.$.Deferred && b.$.Deferred();
        try {
            switch (a) {
              case "read":
                e = void 0 != c.id ? g.find(c) : g.findAll();
                break;

              case "create":
                e = g.create(c);
                break;

              case "update":
                e = g.update(c);
                break;

              case "delete":
                e = g.destroy(c);
            }
        } catch (i) {
            f = i.code === DOMException.QUOTA_EXCEEDED_ERR && 0 === g._storageSize() ? "Private browsing is unsupported" : i.message;
        }
        return e ? (d && d.success && ("0.9.10" === b.VERSION ? d.success(c, e, d) : d.success(e)), 
        h && h.resolve(e)) : (f = f ? f : "Record Not Found", d && d.error && ("0.9.10" === b.VERSION ? d.error(c, f, d) : d.error(f)), 
        h && h.reject(f)), d && d.complete && d.complete(e), h && h.promise();
    }, b.ajaxSync = b.sync, b.getSyncMethod = function(a) {
        return a.localStorage || a.collection && a.collection.localStorage ? b.localSync : b.ajaxSync;
    }, b.sync = function(a, c, d) {
        return b.getSyncMethod(c).apply(this, [ a, c, d ]);
    }, b.LocalStorage;
});

var Jr = Jr || {};

(function(a) {
    a.View = Backbone.View.extend({
        delegateEvents: function(a) {
            var b, c, d;
            this.events = this.events || a;
            for (b in this.events) 0 === b.indexOf("click") && Modernizr.touch && (c = b.replace("click", "touchend"), 
            d = this.events[b], this.events[c] = d, delete this.events[b]);
            return Backbone.View.prototype.delegateEvents.call(this, this.events);
        }
    }), a.Navigator = {
        backButtonFlag: !0,
        history: [],
        directions: {
            UP: "UP",
            DOWN: "DOWN",
            LEFT: "LEFT",
            RIGHT: "RIGHT"
        },
        opposites: {
            UP: "DOWN",
            DOWN: "UP",
            LEFT: "RIGHT",
            RIGHT: "LEFT"
        },
        animations: {
            SLIDE_STACK: "SLIDE_STACK",
            SLIDE_OVER: "SLIDE_OVER"
        },
        navigate: function(a, b) {
            return this.history.push(b), this.backButtonFlag = !1, Backbone.history.navigate(a, b);
        },
        renderView: function(a, b) {
            var c, d;
            return c = this.history.length > 0 ? this.history[this.history.length - 1].animation : null, 
            c ? (d = $("<div></div>"), this.resetContent(d, b), this.normalRenderView(d, b), 
            this.animate(a, d, c.type, c.direction), this.afterAnimation()) : (this.resetContent(a, b), 
            this.normalRenderView(a, b));
        },
        normalRenderView: function(a, b) {
            return a.append(b.render().el);
        },
        resetContent: function(a) {
            return a.html("");
        },
        afterAnimation: function() {
            var a, b, c = this.history.pop();
            a = c.animation, b = this.opposites[a.direction], c.animation.direction = b, this.history.push(c), 
            this.backButtonFlag && this.history.pop(), this.backButtonFlag = !0;
        },
        animate: function(a, b, c, d) {
            if (this.animations.hasOwnProperty(c)) return this.doAnimation(a, b, c, d);
            throw Error("Animation Not Available");
        },
        doAnimation: function(a, b, c, d) {
            var e, f;
            return $("#app-container").prepend(b), b.addClass("animate-to-view").addClass(d).addClass("initial"), 
            $("#app-container").addClass("animate"), $("#app-container").addClass(d), f = function() {
                return b.removeClass("initial");
            }, setTimeout(f, 1), e = function() {
                return a.remove(), b.attr("id", "app-main"), b.removeClass("animate-to-view").removeClass(d), 
                $("#app-container").removeClass("animate").removeClass(d);
            }, setTimeout(e, 400);
        }
    }, a.Router = Backbone.Router.extend({
        renderView: function(b) {
            return a.Navigator.renderView($("#app-main"), b);
        }
    });
})(Jr);

var app = app || {};

(function() {
    "use strict";
    app.Workout = Backbone.Model.extend({});
})();

var app = app || {};

(function() {
    "use strict";
    app.Exercise = Backbone.Model.extend({});
})();

var app = app || {};

(function() {
    "use strict";
    app.WorkoutsCollection = Backbone.Collection.extend({
        model: app.Workout,
        localStorage: new Backbone.LocalStorage("Workouts")
    }), app.Workouts = new app.WorkoutsCollection();
})();

var app = app || {};

(function() {
    "use strict";
    app.ExercisesCollection = Backbone.Collection.extend({
        model: app.Exercise,
        localStorage: new Backbone.LocalStorage("Exercises")
    }), app.Exercises = new app.ExercisesCollection();
})();

var app = app || {};

(function() {
    "use strict";
    app.SetsCollection = Backbone.Collection.extend({
        model: app.Workout,
        localStorage: new Backbone.LocalStorage("Sets")
    }), app.Sets = new app.WorkoutsCollection();
})();

var app = app || {};

(function(a) {
    "use strict";
    app.AddWorkoutView = Backbone.View.extend({
        template: Handlebars.compile(a("#add-workout-view").html()),
        events: {
            "click .button-block": "submit",
            "click .button-close": "onCloseButton"
        },
        initialize: function() {},
        render: function() {
            return this.$el.html(this.template()), this;
        },
        submit: function(b) {
            b.preventDefault();
            var c = a(this.el).find("input[type=text]").val(), d = new app.Workout({
                name: c
            });
            this.collection.create(d);
            var e = new app.WorkoutsView({
                collection: app.Workouts
            });
            app.Router.renderView(e);
        },
        onCloseButton: function() {
            var a = new app.WorkoutsView({
                collection: app.Workouts
            });
            app.Router.renderView(a);
        }
    });
})(Zepto);

var app = app || {};

(function(a) {
    "use strict";
    app.AddExerciseView = Backbone.View.extend({
        template: Handlebars.compile(a("#add-exercise-view").html()),
        events: {
            "click .button-block": "submit",
            "click .button-close": "onCloseButton"
        },
        initialize: function(a) {
            this.workout = a.workout;
        },
        render: function() {
            return this.$el.html(this.template({
                workoutName: this.workout
            })), this;
        },
        submit: function(b) {
            b.preventDefault();
            var c = a(this.el).find("input[type=text]").val(), d = new app.Exercise({
                workout: this.workout,
                name: c,
                sets: 3
            });
            this.collection.create(d);
            var e = new app.ExercisesView({
                collection: app.Exercises,
                workout: this.workout
            });
            app.Router.renderView(e);
        },
        onCloseButton: function() {
            var a = new app.ExercisesView({
                collection: app.Exercises,
                workout: this.workout
            });
            app.Router.renderView(a);
        }
    });
})(Zepto);

var app = app || {};

(function(a) {
    "use strict";
    app.ExerciseView = Backbone.View.extend({
        tagName: "li",
        template: Handlebars.compile(a("#exercise-item").html()),
        events: {
            click: "showExercise",
            "click .delete": "deleteExercise"
        },
        initialize: function() {
            this.model.on("destroy", this.removeExercise, this);
        },
        render: function() {
            return this.$el.html(this.template(this.model.toJSON({
                exercisesInWorkout: this.exercisesInWorkout
            }))), this;
        },
        deleteExercise: function() {
            this.model.destroy();
        },
        removeExercise: function() {
            console.log("remove"), this.$el.remove();
        },
        showExercise: function() {
            if (!a(event.target).hasClass("delete")) {
                var b = new app.ExerciseDetailView({
                    model: this.model,
                    workout: this.model.get("workout")
                });
                app.Router.renderView(b), this.remove();
            }
        }
    });
})(Zepto);

var app = app || {};

(function() {
    "use strict";
    app.ExercisesListView = Backbone.View.extend({
        tagName: "ul",
        className: "list",
        initialize: function(a) {
            this.workout = a.workout, this.exercisesInThisWorkout = this.collection.where({
                workout: this.workout
            }), this.listenTo(this.collection, "add", this.addExercise), this.listenTo(this.collection, "remove", this.render);
        },
        render: function() {
            return 0 == this.exercisesInThisWorkout.length ? this.$el.append('<li class="empty"><strong>No ' + this.workout + " exercises!</strong><br /> Add one.</li>") : _.each(this.exercisesInThisWorkout, this.addExercise, this), 
            this;
        },
        addExercise: function(a) {
            var b = new app.ExerciseView({
                model: a,
                workout: this.workout
            });
            this.$el.append(b.render().el);
        }
    });
})(Zepto);

var app = app || {};

(function(a) {
    "use strict";
    app.ExercisesView = Jr.View.extend({
        template: Handlebars.compile(a("#exercises-view").html()),
        events: {
            "click .button-prev": "onClickButtonPrev",
            "click .button-add": "onClickButtonAdd"
        },
        initialize: function(a) {
            var b = this;
            b.workoutName = a.workout, app.Exercises.fetch({
                success: function() {
                    b.exercisesListView = new app.ExercisesListView({
                        collection: app.Exercises,
                        workout: b.workoutName
                    });
                }
            });
        },
        render: function() {
            return this.$el.html(this.template({
                workoutName: this.workoutName
            })), this.$el.find(".content").html(this.exercisesListView.render().el), this;
        },
        onClickButtonPrev: function() {
            var a = new app.WorkoutsView();
            app.Router.renderView(a), this.remove();
        },
        onClickButtonAdd: function() {
            var a = new app.AddExerciseView({
                workout: this.workoutName,
                collection: app.Exercises
            });
            app.Router.renderView(a), this.remove();
        }
    });
})(Zepto);

var app = app || {};

(function(a) {
    "use strict";
    app.ExerciseDetailView = Backbone.View.extend({
        template: Handlebars.compile(a("#exercise-detail-view").html()),
        events: {
            "click .button-prev": "onClickButtonPrev"
        },
        initialize: function() {
            this.exerciseName = this.model.get("name"), this.workout = this.model.get("workout"), 
            this.setView = new app.SetListView({
                model: this.model
            });
        },
        render: function() {
            return this.$el.html(this.template({
                exerciseName: this.exerciseName
            })), this.$el.find(".content").html(this.setView.render().el), this;
        },
        onClickButtonPrev: function() {
            var a = new app.ExercisesView({
                collection: app.Exercises,
                workout: this.workout
            });
            app.Router.renderView(a), this.remove();
        }
    });
})(Zepto);

var app = app || {};

(function(a) {
    "use strict";
    app.SetView = Backbone.View.extend({
        tagName: "li",
        className: "set",
        template: Handlebars.compile(a("#set-item").html()),
        events: {
            "click .add-set": "addSet",
            "keypress .set-data": "saveSetData"
        },
        initialize: function() {},
        render: function() {
            return this.$el.html(this.template()), this;
        },
        addSet: function() {
            new app.SetView({
                model: app.Set
            });
            var a = new app.Set({
                name: "my awesome set"
            });
            app.Sets.create(a), this.$el.parent().append(a.render().el);
        },
        saveSetData: function(b) {
            this.model.set("sets", {
                weight: a(b.target).val()
            }), console.log(this.model);
        }
    });
})(Zepto);

var app = app || {};

(function() {
    "use strict";
    app.SetListView = Backbone.View.extend({
        tagName: "ul",
        className: "list sets-list",
        initialize: function() {
            console.log("name:" + this.model.get("name") + " cid: " + this.model.cid), this.setsInThisExercise = app.Sets.where({
                exercise: this.model.cid
            });
        },
        render: function() {
            if (0 == this.setsInThisExercise.length) {
                var a = new app.SetView({
                    model: this.model
                });
                this.$el.append(a.render().el);
            } else alert("we have sets bitch!");
            return this;
        },
        addSetView: function() {}
    });
})(Zepto);

var app = app || {};

(function(a) {
    "use strict";
    app.WorkoutView = Jr.View.extend({
        tagName: "li",
        template: Handlebars.compile(a("#workout-item").html()),
        events: {
            click: "showWorkout",
            "click .delete": "deleteWorkout"
        },
        initialize: function() {
            this.model.on("destroy", this.removeWorkout, this);
        },
        render: function() {
            return this.$el.html(this.template(this.model.toJSON())), this;
        },
        deleteWorkout: function() {
            this.model.destroy();
        },
        removeWorkout: function() {
            this.$el.remove();
        },
        showWorkout: function(b) {
            if (!a(b.target).hasClass("delete")) {
                var c = new app.ExercisesView({
                    workout: this.model.get("name"),
                    collection: app.Exercises
                });
                app.Router.renderView(c), this.remove();
            }
        }
    });
})(Zepto);

var app = app || {};

(function() {
    "use strict";
    app.WorkoutsListView = Backbone.View.extend({
        tagName: "ul",
        className: "list",
        initialize: function() {
            this.listenTo(this.collection, "remove", this.render);
        },
        render: function() {
            return 0 == this.collection.length ? this.$el.append('<li class="empty"><strong>No workouts!</strong><br /> Add one.</li>') : this.collection.each(this.addWorkout, this), 
            this;
        },
        addWorkout: function(a) {
            var b = app.Exercises.where({
                workout: a.get("name")
            }).length;
            a.set("exercisesInWorkout", b);
            var c = new app.WorkoutView({
                model: a
            });
            this.$el.append(c.render().el);
        }
    });
})(Zepto);

var app = app || {};

(function(a) {
    "use strict";
    app.WorkoutsView = Backbone.View.extend({
        template: Handlebars.compile(a("#workouts-view").html()),
        events: {
            "click .button-prev": "onClickButtonPrev",
            "click .button-add": "onClickButtonAdd"
        },
        initialize: function() {
            var a = this;
            app.Workouts.fetch({
                success: function() {
                    a.workoutsListView = new app.WorkoutsListView({
                        collection: app.Workouts
                    });
                }
            });
        },
        render: function() {
            return this.$el.html(this.template()), this.$el.find(".content").html(this.workoutsListView.render().el), 
            this;
        },
        onClickButtonPrev: function() {
            var a = new app.HomeView({
                collection: app.Workouts
            });
            app.Router.renderView(a), this.remove();
        },
        onClickButtonAdd: function() {
            var a = new app.AddWorkoutView({
                collection: app.Workouts
            });
            app.Router.renderView(a), this.remove();
        }
    });
})(Zepto);

var app = app || {};

(function(a) {
    "use strict";
    app.HomeView = Backbone.View.extend({
        template: Handlebars.compile(a("#home-view").html()),
        events: {
            "click #show-workouts-list": "showWorkouts",
            "click #clear-localstorage": "clearLocalStorage"
        },
        initialize: function() {},
        render: function() {
            return this.$el.html(this.template({
                numberOfWorkouts: this.collection.length
            })), this;
        },
        showWorkouts: function() {
            var a = new app.WorkoutsView({
                collection: app.Workouts
            });
            app.Router.renderView(a), this.remove();
        },
        clearLocalStorage: function(a) {
            a.preventDefault(), localStorage.clear();
        }
    });
})(Zepto);

var app = app || {};

(function() {
    "use strict";
    app.AppRouter = Jr.Router.extend({
        routes: {
            home: "home",
            add: "addWorkout",
            "add-exercise": "addExercise",
            workouts: "workouts",
            "workouts/:query": "workoutDetails"
        }
    }), app.Router = new app.AppRouter();
})();

var app = app || {};

(function() {
    "use strict";
    app.Workouts.fetch({
        success: function() {
            var a = new app.HomeView({
                collection: app.Workouts
            });
            app.Router.renderView(a), app.Router.navigate("home");
        }
    }), app.Exercises.fetch();
})(Zepto);